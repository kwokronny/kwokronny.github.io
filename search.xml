<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç§æœ‰åŒ–éƒ¨ç½²Bitwardenå¯†ç ç®¡ç†æœåŠ¡</title>
      <link href="/202109/bitwarden-private-deploy/"/>
      <url>/202109/bitwarden-private-deploy/</url>
      
        <content type="html"><![CDATA[<img src="/202109/bitwarden-private-deploy/cover.png" class="" width="0" height="0"><p>Bitwarden æ˜¯åŸºä½¬åˆå‘ç°å¹¶æ¨èçš„å¦ä¸€ä¸ªå¤šå¹³å°å¯†ç ç®¡ç†å·¥å…·ï¼Œå®˜æ–¹æä¾›å…è´¹çš„å­˜å‚¨æœåŠ¡ï¼Œæœ€èµçš„è¿˜æ˜¯æ”¯æŒå…è´¹çš„ç§æœ‰åŒ–éƒ¨ç½²ï¼<br>ç”±äºå®˜æ–¹ç½‘ç«™å›½å†…è®¿é—®ä¸ç•…ğŸ˜­ï¼Œæ—¥å¸¸å°±ä¸æ–¹ä¾¿ä¸å®¶äººå…±ç”¨ï¼Œæ‰€ä»¥å°±åªå¥½å°†å…¶ç§æœ‰åŒ–éƒ¨ç½²è‡³è‡ªå·±çš„NASä¸Šå•¦ğŸ˜‰ã€‚</p><img src="/202109/bitwarden-private-deploy/preview.png" class=""><h2 id="ç§æœ‰ç¯å¢ƒ"><a href="#ç§æœ‰ç¯å¢ƒ" class="headerlink" title="ç§æœ‰ç¯å¢ƒ"></a>ç§æœ‰ç¯å¢ƒ</h2><ul><li>å®¶ä¸­è‡ªå»ºNASï¼Œç”³è¯·å…¬ç½‘IP</li><li>CentOS 7</li><li>Docker</li><li>è‡ªæœ‰åŸŸå</li></ul><h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><blockquote><p>ç”±äºå¯†ç åº“çš„ç›¸å¯¹ç§å¯†æ€§ï¼Œæ‰€ä»¥ç«¯å£è‡ªç„¶ä¸ä¼šä½¿ç”¨å¸¸è§„ç«¯å£ï¼Œä¸”æš‚æ—¶ä»…æœ‰äº›æœåŠ¡éœ€è¦httpsçš„æ”¯æŒï¼Œéœ€è¦nginxçš„åå‘ä»£ç†å®Œæˆï¼Œæˆ‘è¿™è¾¹å°±éšæœºäº†ä¸ªç«¯å£ä½¿ç”¨ï¼Œå¸¸è§„ç«¯å£å°±ç•™ç»™æ—¥åå†…ç½‘æ¶è®¾æœåŠ¡ç»™å®¶äººä½¿ç”¨å§ã€‚</p></blockquote><ol><li><h3 id="éƒ¨ç½²-bitwarden"><a href="#éƒ¨ç½²-bitwarden" class="headerlink" title="éƒ¨ç½² bitwarden"></a>éƒ¨ç½² bitwarden</h3> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker volume create bitwarden_data // åˆ›å»º bitwarden_data å·<br><br>docker run --name bitwarden \<br>-v bitwarden_data:/data \<br>-p 39434:80<br>--restart always <br>vaultwarden/server<br></code></pre></td></tr></table></figure><p> æµè§ˆå™¨è®¿é—® å®¿ä¸»IP:39434 å³å¯çœ‹åˆ° Bitwarden çš„æœåŠ¡</p></li><li><h3 id="éƒ¨ç½²-nginx"><a href="#éƒ¨ç½²-nginx" class="headerlink" title="éƒ¨ç½² nginx"></a>éƒ¨ç½² nginx</h3> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">docker run --name Nginx \<br>-v /etc/nginx:/etc/nginx \<br>-v /usr/share/nginx:/usr/share/nginx \<br>-p 39435:39435 \<br>nginx<br></code></pre></td></tr></table></figure></li><li><h3 id="ç”Ÿæˆè¯ä¹¦"><a href="#ç”Ÿæˆè¯ä¹¦" class="headerlink" title="ç”Ÿæˆè¯ä¹¦"></a>ç”Ÿæˆè¯ä¹¦</h3><p> ç”±äº Bitwarden éœ€è¦ HTTPS çš„æ”¯æŒæ‰å¯ä»¥åœ¨ chrome ç­‰æµè§ˆå™¨ä¸­åº”ç”¨ï¼Œæ‰€ä»¥æˆ‘ä¸ºè¿˜éœ€ä¸º Bitwarden æœåŠ¡åå‘ä»£ç†å¼€å¯ HTTPSã€‚æˆ‘ä»¬å½“ç„¶æ˜¯ä½¿ç”¨å…è´¹çš„ <a href="https://letsencrypt.org/zh-cn/docs/">Letâ€™s Encrypt</a>ã€‚</p><p> è€Œè¯ä¹¦ç”Ÿæˆéœ€è¦éªŒè¯åŸŸåæ˜¯å¦ä¸ºä½ æŒæœ‰ï¼Œæä¾›äº†ä»¥ä¸‹è®¤è¯æ–¹å¼ï¼š</p><ul><li>åœ¨ <code>example.com</code> ä¸‹é…ç½® DNS è®°å½•</li><li>åœ¨ <code>https://example.com/</code> çš„å·²çŸ¥ URI ä¸‹æ”¾ç½®ä¸€ä¸ª HTTP èµ„æº</li></ul><p> è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å½“ç„¶é€‰æ‹©é€šè¿‡é…ç½®DNSè®°å½•å®Œæˆè®¤è¯è·å–è¯ä¹¦å•¦ï¼Œå› ä¸ºç§æœ‰åŒ–çš„éƒ¨ç½²å˜›ï¼Œä¸€èˆ¬å°±ä¸æš´éœ²å¸¸è§„æ¥å£å•¦ã€‚</p><p> é€šè¿‡ docker è¿è¡Œ certbox å®Œæˆè¯ä¹¦è·å–è‡³ nginx æŒ‚è½½é…ç½®æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºçš„certå†…ã€‚</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash">mkdir -p /etc/nginx/cert <br>docker run -it --rm --name certbot -v /etc/nginx/cert:/etc/letsencrypt certbot/certbot --manual --preferred-challenges dns certonly<br><span class="hljs-comment"># äº¤äº’å¼æé—®ï¼š</span><br><span class="hljs-comment"># è¯·è¾“å…¥ä½ æƒ³è®¤è¯çš„åŸŸåï¼ˆå¤šä¸ªåŸŸåé€šè¿‡é€—å·æˆ–ç©ºæ ¼åˆ†éš”ï¼‰ï¼ˆå–æ¶ˆè¾“å…¥ &#x27;c&#x27; ï¼‰</span><br>Please enter the domain name(s) you would like on your certificate (comma and/or space separated) (Enter <span class="hljs-string">&#x27;c&#x27;</span> to cancel): vault.example.com<br><span class="hljs-comment"># è¯·æ±‚è¯ä¹¦ï¼Œä¸º åŸŸå å¢åŠ  ä¸€æ¡ txt è®°å½•ï¼Œname ä¸º &quot;_acme-challenge.vault.example.com&quot; ï¼Œdata ä¸º &quot;qRbOGoLXA889-IplowmYFlT_dgHYTKya9RBW5l0B73Y&quot;</span><br><span class="hljs-comment"># å®Œæˆåå¯é€šè¿‡ä¸‹é¢æç¤ºçš„ googleéªŒè¯å·¥å…·é“¾æ¥ç›´æ¥éªŒè¯æ˜¯å¦è§£ææˆåŠŸï¼ŒéªŒè¯æˆåŠŸæŒ‰å›è½¦è®¤è¯å³å¯</span><br>Requesting a certificate <span class="hljs-keyword">for</span> vault.example.com<br>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br>Please deploy a DNS TXT record under the name:<br><br>_acme-challenge.vault.example.com. <br><br>with the following value:<br><br>qRbOGoLXA889-IplowmYFlT_dgHYTKya9RBW5l0B73Y<br><br>Before continuing, verify the TXT record has been deployed. Depending on the DNS<br>provider, this may take some time, from a few seconds to multiple minutes. You can<br>check <span class="hljs-keyword">if</span> it has finished deploying with aid of online tools, such as the Google<br>Admin Toolbox: https://toolbox.googleapps.com/apps/dig/<span class="hljs-comment">#TXT/_acme-challenge.vault.example.com.</span><br>Look <span class="hljs-keyword">for</span> one or more bolded line(s) below the line \<span class="hljs-string">&#x27;;ANSWER\&#x27;</span>. It should show the<br>value(s) you\<span class="hljs-string">&#x27;ve just added.</span><br><span class="hljs-string"></span><br><span class="hljs-string">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="hljs-string">Press Enter to Continue</span><br><span class="hljs-string"># è¿˜æœ‰äº›äº¤äº’å¼å›ç­”å°±æ˜¯äº›æ˜¯å¦è®¢é˜…åŠæ˜¯å¦åŒæ„éµå®ˆåè®®çš„é—®ç­”å°±ä¸ªäººè‡ªè¡Œé€‰æ‹©äº†</span><br></code></pre></td></tr></table></figure></li><li><h3 id="ç¼–å†™nginxé…ç½®"><a href="#ç¼–å†™nginxé…ç½®" class="headerlink" title="ç¼–å†™nginxé…ç½®"></a>ç¼–å†™nginxé…ç½®</h3><p> æ–°å¢å¹¶ç¼–è¾‘ <code>vault.example.com.conf</code> é…ç½®æ–‡ä»¶</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vi /etc/nginx/conf.d/vault.example.com.conf<br></code></pre></td></tr></table></figure> <figure class="highlight bash"><figcaption><span>vault.example.com.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash">server&#123;<br>listen 443 ssl http2;<br>server_name vault.example.com;<br>index index.html index.htm default.htm default.html;<br>root /usr/share/nginx/www/vault.example.com;<br><br>add_header Permissions-Policy <span class="hljs-string">&quot;geolocation=(),midi=(),sync-xhr=(),microphone=(),camera=(),magnetometer=(),gyroscope=(),fullscreen=(self),payment=()&quot;</span>;<br>server_tokens off; <span class="hljs-comment"># ä¸æ˜¾ç¤ºnginxç‰ˆæœ¬ä¿¡æ¯</span><br><br>ssl_certificate   cert/live/vault.example.com/fullchain.pem;<br>ssl_certificate_key     cert/live/vault.example.com/privkey.pem;<br>ssl_protocols TLSv1.2 TLSv1.1 TLSv1;<br>ssl_prefer_server_ciphers on;<br>ssl_ciphers ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DH+3DES:!ADH:!AECDH:!MD5;<br>ssl_ecdh_curve secp384r1;<br>ssl_session_tickets off;<br><br><span class="hljs-comment"># OCSP stapling</span><br>ssl_stapling on;<br>ssl_stapling_verify on;<br><br>location ^~ /3KD63sjY2dd85 &#123; <span class="hljs-comment"># æŒ‡å®šåˆ°è‡ªå·±å–œæ¬¢çš„éšæœºæ•°ä¸å­—æ¯çš„ç»„åˆä½œä¸ºå¯†ç åº“æœåŠ¡çš„å…¥å£ï¼Œå¢åŠ å…¶éšè”½æ€§</span><br>proxy_set_headerHost <span class="hljs-variable">$host</span>;<br>proxy_set_headerX-Real-IP <span class="hljs-variable">$remote_addr</span>;<br>proxy_hide_headerX-Powered-By;<br>proxy_hide_headerfeature-policy;<br><br>proxy_pass http://å®¿ä¸»IP:39434/; <span class="hljs-comment"># æŒ‡å‘bitwardenæœåŠ¡</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><h3 id="ç«¯å£è½¬å‘å¹¶åº”ç”¨"><a href="#ç«¯å£è½¬å‘å¹¶åº”ç”¨" class="headerlink" title="ç«¯å£è½¬å‘å¹¶åº”ç”¨"></a>ç«¯å£è½¬å‘å¹¶åº”ç”¨</h3><p> ç”±äºä¸ºå†…ç½‘çš„ NAS æœåŠ¡ï¼Œéƒ¨ç½²å®Œæˆåå½“ç„¶è¿˜éœ€è¦é€šè¿‡è·¯ç”±å™¨ç«¯å£è½¬å‘å°† nginx ä¸º bitwardenæœåŠ¡å®šçš„éšæœºç«¯å£åè½¬å‘è‡³å¤–ç½‘<br> è‡³äºåŸŸåå¦‚ä½•ä¸è·¯ç”±å™¨ç»‘å®šå¯æœç´¢åŠ¨æ€åŸŸåä¹‹ç±»çš„ï¼Œä¸»è¦å°±æ˜¯é€šè¿‡ NAS å®šæ—¶è¯·æ±‚åŸŸåæ›´æ–°IPçš„ URL å®Œæˆã€‚</p><p> æµè§ˆå™¨è¾“å…¥ <a href="https://vault.example.com/3KD63sjY2dd85/">https://vault.example.com/3KD63sjY2dd85/</a> ï¼Œè¿›å…¥æœåŠ¡</p> <img src="/202109/bitwarden-private-deploy/login.jpg" class=""><p> åˆ°è¿™ä¸€æ­¥åŸºæœ¬å°±å¯ä»¥å®Œæˆæ³¨å†Œï¼Œå¯¼å…¥å¯†ç åº“å•¦ã€‚</p><p> åœ¨ APP åŠ å„å¹³å°åº”ç”¨ä¸Šï¼Œéƒ½å¯ä»¥æ‰¾åˆ°åœ¨å³ä¸Šè§’ç‚¹å‡»è®¾ç½®å›¾æ ‡çš„æŒ‰é’®ï¼Œè¾“å…¥æ‰˜ç®¡æœåŠ¡çš„ç½‘å€</p> <img src="/202109/bitwarden-private-deploy/set_service.png" class=""></li><li><h3 id="å®šæ—¶æ›´æ–°è¯ä¹¦"><a href="#å®šæ—¶æ›´æ–°è¯ä¹¦" class="headerlink" title="å®šæ—¶æ›´æ–°è¯ä¹¦"></a>å®šæ—¶æ›´æ–°è¯ä¹¦</h3><p> <a href="https://letsencrypt.org/zh-cn/docs/">Letâ€™s Encrypt</a> è¯ä¹¦çš„æœ‰æ•ˆæœŸæ˜¯90å¤©ï¼Œéœ€è¦å®šæ—¶ä¸ºå…¶æ›´æ–°è¯ä¹¦ï¼Œæ‰€ä»¥ä¹Ÿå°±éœ€è¦ä¸ºå†™ä¸ªè„šæœ¬å®šæ—¶æ‰§è¡Œä¸€ä¸‹</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">touch renew.sh<br>chmod -x renew.sh<br>vi renew.sh<br></code></pre></td></tr></table></figure><p> ç¼–è¾‘æ›´æ–°è„šæœ¬ </p> <figure class="highlight bash"><figcaption><span>renew.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br>docker run -it --rm --name certbot -v /etc/nginx/cert/:/etc/letsencrypt certbot/certbot renew --webroot -w /etc/letsencrypt<br><span class="hljs-comment"># é€šè¿‡ä¹‹å‰ç”Ÿæˆè¯ä¹¦åç”Ÿæˆçš„renewæ–‡ä»¶å¤¹å†…çš„ä¿¡æ¯ï¼Œè‡ªåŠ¨æ›´æ–°è¯ä¹¦</span><br>docker <span class="hljs-built_in">exec</span> -it Nginx nginx -s reload<br><span class="hljs-comment"># é‡å¯nginx</span><br></code></pre></td></tr></table></figure> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ç¼–è¾‘å®šæ—¶ä»»åŠ¡</span><br>crontab -e<br></code></pre></td></tr></table></figure> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">0 0 1 * * ~/renew.sh &gt; ~/letsencrypt.log <span class="hljs-comment">#æ¯æœˆæ‰§è¡Œä¸€æ¬¡</span><br></code></pre></td></tr></table></figure></li><li><h3 id="å…³é—­æ³¨å†ŒåŠŸèƒ½"><a href="#å…³é—­æ³¨å†ŒåŠŸèƒ½" class="headerlink" title="å…³é—­æ³¨å†ŒåŠŸèƒ½"></a>å…³é—­æ³¨å†ŒåŠŸèƒ½</h3><p> ä¸ºè‡ªå·±å’Œå®¶äººéƒ½æ³¨å†Œå¸å·åï¼Œä¿è¯å®‰å…¨æ€§ï¼Œå°±å…³é—­å¯†ç åº“çš„æ³¨å†ŒåŠŸèƒ½å•¦ã€‚</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker stop bitwarden <br><br>docker run --name bitwarden \<br>-v bitwarden_data:/data \<br>-p 39434:80<br>-e SIGNUP_ALLOWED=<span class="hljs-literal">false</span><br>--restart always <br>vaultwarden/server<br></code></pre></td></tr></table></figure></li></ol><h2 id="é‡åˆ°çš„å°å‘"><a href="#é‡åˆ°çš„å°å‘" class="headerlink" title="é‡åˆ°çš„å°å‘"></a>é‡åˆ°çš„å°å‘</h2><p>é€šè¿‡nginxç®€å•çš„é…ç½®ï¼ŒHTTPSçš„æ ‡è¯†ä¾æ—§ä¸ºçº¢è‰²é”ï¼Œè¡¨ç¤ºç€ä¸å®‰å…¨ï¼Œè™½è¯´å·²ä¸å½±å“ä½¿ç”¨äº†ï¼›ä½†å¼ºè¿«ç—‡çš„æˆ‘è¿˜æ˜¯æ‰¾äº†ä¸‹ä¸ºä»€ä¹ˆã€‚<br>ç»§è€Œå‘ç°äº†ä¸ªæ£€æµ‹ HTTPS è®¤è¯çŠ¶æ€çš„ç½‘ç«™ï¼š<br><a href="https://securityheaders.com/">SecurityHeaders</a><br>å‘ç°æ˜¯å°‘äº†ä¸€äº›Headerå±æ€§ä»¥åŠéƒ¨åˆ†å±æ€§å·²ä¸å®‰å…¨ç­‰<br>æ ¹æ® Missing Header å»è°·æ­Œå¿…åº”æœç´¢æ·»åŠ ä¸Šå³å¯</p><p>åœ¨æœç´¢çš„è¿‡ç¨‹ä¸­å‘ç°äº†ä¸‹åˆ—æ–‡ç« ï¼Œåˆšå¥½æ•™ä½  Apache å’Œ Nginx å¦‚ä½•é…ç½®å®‰å…¨å¤´éƒ¨ä¿¡æ¯çš„æ–‡ç« ï¼Œå¯¹ç…§ä¸Šè¿°ç½‘ç«™å¯ä»¥å¿«é€Ÿå°†å¤´éƒ¨é…ç½®å®Œæˆ<br><a href="https://webdock.io/en/docs/how-guides/security-guides/how-to-configure-security-headers-in-nginx-and-apache#7.-permissions-policy">Apache å’Œ Nginx å¦‚ä½•é…ç½®å®‰å…¨å¤´éƒ¨ä¿¡æ¯</a></p><blockquote><p>ç”±äºæˆ‘ä»…æ­¤æœåŠ¡éœ€è¦ HTTPS çš„æ”¯æŒï¼Œæ‰€ä»¥ä¸å¯ä»¥ä½¿ç”¨ HSTSï¼ˆå¼ºåˆ¶HTTPSï¼‰ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸å¯æ·»åŠ ä»¥ä¸‹å¤´éƒ¨ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs conf">add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot; always;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶åˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Three.js ä¹‹åšå®¢è£…é€¼æŒ‡åŒ—</title>
      <link href="/202108/threejs-blog-fake-x-manual/"/>
      <url>/202108/threejs-blog-fake-x-manual/</url>
      
        <content type="html"><![CDATA[<img src="/202108/threejs-blog-fake-x-manual/cover.png" class="" width="0" height="0"><h2 id="å…ˆä¸Šæ•ˆæœ"><a href="#å…ˆä¸Šæ•ˆæœ" class="headerlink" title="å…ˆä¸Šæ•ˆæœ"></a>å…ˆä¸Šæ•ˆæœ</h2><p>å…ˆä¸Šæœ€ç»ˆæ•ˆæœï¼Œæˆ‘çš„åšå®¢è™½ç„¶å¹²è´§å¾ˆå°‘ï¼Œä¸è¿‡ <del><code>é€¼æ ¼</code></del> è¿˜æ˜¯ä»¤è‡ªå·±æ»¡æ„çš„ï¼Œæ—¥åä¹Ÿä¼šå°è¯•å¤šå¤šåˆ†äº«ï¼Œæ¯•ç«Ÿåˆ†äº«çœŸçš„å¾ˆæ£€éªŒå¯¹çŸ¥è¯†çš„ç‰¢å›ºï¼Œæœªå‘ç°çš„çŸ¥è¯†ç›²åŒºï¼Œä¹Ÿæ›´è€ƒéªŒå†™ä½œèƒ½åŠ›ã€‚</p><p>åšå®¢é“¾æ¥: <a href="https://kwokronny.top/">https://kwokronny.top</a></p><img src="/202108/threejs-blog-fake-x-manual/effect.jpg" class=""><h3 id="CSS3-æ˜¯ä¸å¤Ÿå®ç°æˆ‘çš„éªšæ°”å“’"><a href="#CSS3-æ˜¯ä¸å¤Ÿå®ç°æˆ‘çš„éªšæ°”å“’" class="headerlink" title="CSS3 æ˜¯ä¸å¤Ÿå®ç°æˆ‘çš„éªšæ°”å“’~"></a>CSS3 æ˜¯ä¸å¤Ÿå®ç°æˆ‘çš„éªšæ°”å“’~</h3><p>åœ¨å»ºåšå®¢å‰éœ€è¦çœ‹äº†å¾ˆå¤šå¤§ä½¬çš„åšå®¢ï¼Œå¤§ä½¬ä»¬çš„è™½ç„¶ç®€æ´çš„ç•Œé¢ï¼Œä½†å†…å®¹çš„æ·±åº¦ï¼Œæ–‡ç« çš„é€¼æ ¼ï¼Œä»¤äººç¥å¾€ï¼Œæ— éœ€åšå®¢å¤–åŒ…è£…çš„æµ®åï¼Œå°±è®©å¤§å®¶äº‰ç›¸é˜…è¯»ã€‚<br>å¾ˆä¹…æ²¡è‡ªå·±è®¾è®¡ç½‘ç«™ï¼Œå®¡ç¾ä¸‹é™äº†ä¸å°‘ï¼Œåœ¨å‡ å¤©ä¸æ–­çš„æµè§ˆä¸­ï¼Œå®šä¸‹äº†è¦æ¯”å¤§å®¶è£…çš„å¥½ï¼Œå°±å¾—ç”¨å¤§å®¶ä¸å¤ªå¸¸ç”¨çš„æŠ€æœ¯æ ˆï¼Œ<code>three.js</code>æ˜¯æˆ‘æœ€ç»ˆé€‰æ‹©çš„è£…é€¼æ–¹æ¡ˆã€‚</p><h2 id="å¼€å§‹è£…é€¼"><a href="#å¼€å§‹è£…é€¼" class="headerlink" title="å¼€å§‹è£…é€¼"></a>å¼€å§‹è£…é€¼</h2><h3 id="å¯»æ‰¾æ¨¡å‹"><a href="#å¯»æ‰¾æ¨¡å‹" class="headerlink" title="å¯»æ‰¾æ¨¡å‹"></a>å¯»æ‰¾æ¨¡å‹</h3><p>å¸Œæœ›é€šè¿‡ 3D çš„æ•ˆæœè¾¾åˆ° è£…é€¼ çš„ç›®çš„ï¼Œéœ€è¦å…ˆå»ºæ¨¡ï¼Œè¿™ç©æ„å­¦èµ·æ¥ä¸€æ—¶åŠä¼šæ˜¯ä¸å¯èƒ½çš„ï¼Œæ‰€ä»¥å°±å¼€å§‹å¯»æ‰¾å…è´¹éå•†ç”¨çš„ 3D æ¨¡å‹ï¼Œåœ¨å…è´¹çš„ç´ æä¸­å¯»æ‰¾äº†è®¸å¤šçš„ç´ æï¼Œæœ€ç»ˆé€‰æ‹©äº†çƒ­çˆ±çš„ MineCraft çš„äººç‰©æ¨¡å‹ã€‚</p><blockquote><p><a href="https://sketchfab.com/">SketchFab(https://sketchfab.com/)</a></p></blockquote><img src="/202108/threejs-blog-fake-x-manual/zombie_sketchfab.png" class=""><p>ä¸‹è½½æ¨¡å‹é€‰æ‹© GLTFï¼Œæˆ‘ä»¬æ‰¾çš„ç¤ºä¾‹è®©æˆ‘ä»¬å¼•ç”¨çš„å³æ˜¯ GLTFLoaderã€‚å½“ç„¶æœ‰æ—¶ä¹Ÿä¼šä¸‹è½½åˆ°ä¸€äº›å¯¼å‡ºæœ‰é—®é¢˜çš„ï¼Œäº¦å¯ä»¥ä¸‹è½½åŸå§‹ç»“æ„ï¼Œå†é€šè¿‡ 3D ç¼–è¾‘å™¨ é‡æ–°å¯¼å‡ºï¼Œæ­¤å¤„æ¨è <a href="https://www.blender.org/">Blender3D</a>ï¼Œæˆ‘é€‰æ‹©çš„æ¨¡å‹ä¸Šä¼ è€…ä¹Ÿåˆšå¥½åŒåï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯è¯¥è½¯ä»¶å•†æä¾›çš„ã€‚</p><img src="/202108/threejs-blog-fake-x-manual/3d_download.png" class=""><h3 id="å°è¯•ç¼–å†™"><a href="#å°è¯•ç¼–å†™" class="headerlink" title="å°è¯•ç¼–å†™"></a>å°è¯•ç¼–å†™</h3><p>ä¹‹åå°±å…ˆå¼€å§‹äº† <code>three.js</code> çš„å°è¯•æ€§ç¼–å†™ï¼Œé¦–å…ˆå°±æ˜¯è¦å…ˆçœ‹ three.js çš„æ–‡æ¡£äº†ï¼Œè¿›å…¥å®˜ç½‘ï¼Œé‡Œé¢æœ‰è®¸å¤šçš„ä¼˜ç§€æ¡ˆä¾‹åŠç¤ºä¾‹ã€‚</p><blockquote><p><a href="https://threejs.org/">three.js æ–‡æ¡£</a><br>å»ºè®®å…ˆåœ¨ç½‘ä¸Šå…ˆè¿…é€Ÿé˜…è¯»äº† 3d çš„ç›¸å…³åŸºç¡€çŸ¥è¯†ï¼ŒåŠå¤§ä½¬ä»¬å†™çš„æ‰‹æŠŠæ‰‹æ•™ä½ ç© three.js ä¹‹ç±»çš„æ–‡ç« </p></blockquote><p>æˆ‘çš„å­¦ä¹ æ–¹æ³•å¾ˆå¤šæ—¶å€™æ˜¯å…ˆæŠ„ä½œä¸šçš„åŸºç¡€ä¸Šå°è¯•æŸ¥é˜…å±æ€§ã€æ”¹å˜å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä»ç¤ºä¾‹æ‰¾åˆ°å¯ä»¥æŠ„çš„<a href="https://threejs.org/examples/#webgl_animation_skinning_blending">ç¤ºä¾‹</a>å…ˆï¼Œæˆ‘é€‰çš„æ¨¡å‹åˆšå¥½æœ‰ç›¸å…³çš„ä¸‰ä¸ªéª¨æ¶åŠ¨ç”»ï¼Œæ‰€ä»¥é˜…è¯»æ­¤ç¤ºä¾‹çš„æºç ï¼Œå¯ä»¥ä¼˜å…ˆå°†ä¸‹è½½çš„æ¨¡å‹å¼•å…¥å¹¶åŠ¨èµ·æ¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">      <span class="hljs-selector-tag">html</span>,</span><br><span class="css">      <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">      &#125;</span><br><span class="css">      <span class="hljs-selector-class">.bg-canvas</span> &#123;</span><br><span class="css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">      &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-canvas&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/three@0.131.3/build/three.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/three@0.131.3/examples/js/loaders/GLTFLoader.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">      (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> scene, renderer, camera, container;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> mixer, clock, actions;</span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-comment">// è·å–ç»˜åˆ¶å®¹å™¨åŠå®¹å™¨å°ºå¯¸</span></span><br><span class="javascript">          container = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;.bg-canvas&quot;</span>);</span><br><span class="javascript">          <span class="hljs-keyword">var</span> width = container.getBoundingClientRect().width;</span><br><span class="javascript">          <span class="hljs-keyword">var</span> height = container.getBoundingClientRect().height;</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-comment">// å®ä¾‹åŒ–é€è§†æ‘„åƒæœºï¼Œæˆ‘ä»¬çœ‹è§çš„å³æ˜¯æ­¤æ‘„åƒæœºçš„è§†è§’ã€‚</span></span><br><span class="javascript">          camera = <span class="hljs-keyword">new</span> THREE.PerspectiveCamera(<span class="hljs-number">45</span>, width / height, <span class="hljs-number">1</span>, <span class="hljs-number">2000</span>);</span><br><span class="javascript">          camera.position.set(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">16</span>);</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-comment">// è®©æ¨¡å‹å¸§åŠ¨ç”»æŒ‰æ­¤å®ä¾‹åŒ–çš„æ—¶é’Ÿæ›´æ–°</span></span><br><span class="javascript">          clock = <span class="hljs-keyword">new</span> THREE.Clock();</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-comment">// å®ä¾‹åŒ–åœºæ™¯</span></span><br><span class="javascript">          scene = <span class="hljs-keyword">new</span> THREE.Scene();</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-comment">// å®ä¾‹åŒ–åŠçƒå…‰ï¼Œå…ˆæŠŠåœºæ™¯æŒ‰ç¯å…‰é¢œè‰²ç…§äº®</span></span><br><span class="javascript">          <span class="hljs-keyword">var</span> hemiLight = <span class="hljs-keyword">new</span> THREE.HemisphereLight(<span class="hljs-number">0xf2f2f2</span>, <span class="hljs-number">0xf2f2f2</span>);</span><br><span class="javascript">          hemiLight.position.set(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0</span>);</span><br><span class="javascript">          scene.add(hemiLight);</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-comment">// å®ä¾‹åŒ–å¤ªé˜³å…‰ï¼Œç…§äº®çš„åŒæ—¶ï¼Œä¸ºæ¨¡å‹æ·»åŠ ä¸Šé˜´å½±</span></span><br><span class="javascript">          <span class="hljs-keyword">var</span> dirLight = <span class="hljs-keyword">new</span> THREE.DirectionalLight(<span class="hljs-number">0xffffff</span>);</span><br><span class="javascript">          dirLight.position.set(<span class="hljs-number">0</span>, <span class="hljs-number">30</span>, <span class="hljs-number">0</span>);</span><br><span class="javascript">          dirLight.castShadow = <span class="hljs-literal">true</span>;</span><br><span class="javascript">          dirLight.shadow.camera.near = <span class="hljs-number">0.1</span>;</span><br><span class="javascript">          dirLight.shadow.camera.far = <span class="hljs-number">60</span>;</span><br><span class="javascript">          scene.add(dirLight);</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-keyword">var</span> loader = <span class="hljs-keyword">new</span> THREE.GLTFLoader();</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-comment">// åŠ è½½æ¨¡å‹</span></span><br><span class="javascript">          loader.load(<span class="hljs-string">&quot;./zombie.gltf&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">gltf</span>) </span>&#123;</span><br><span class="javascript">            <span class="hljs-keyword">var</span> model = gltf.scene;</span><br><span class="javascript">            model.traverse(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">object</span>) </span>&#123;</span><br><span class="javascript">              <span class="hljs-keyword">if</span> (object.isMesh) &#123;</span><br><span class="javascript">                object.frustumCulled = <span class="hljs-literal">false</span>;</span><br><span class="javascript">                <span class="hljs-comment">// æŠ•å°„é˜´å½±</span></span><br><span class="javascript">                object.castShadow = <span class="hljs-literal">true</span>;</span><br><span class="javascript">              &#125;</span><br><span class="javascript">            &#125;);</span><br><span class="javascript">            model.position.set(<span class="hljs-number">0.6</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2.5</span>);</span><br><span class="javascript">            model.scale.set(<span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>);</span><br><span class="javascript">            scene.add(model);</span><br><span class="javascript"></span><br><span class="javascript">            <span class="hljs-comment">// å®ä¾‹åŒ–åŠ¨ç”»æ··åˆå™¨</span></span><br><span class="javascript">            mixer = <span class="hljs-keyword">new</span> THREE.AnimationMixer(model);</span><br><span class="javascript">            actions = &#123;</span><br><span class="javascript">              <span class="hljs-attr">push_up</span>: mixer.clipAction(gltf.animations[<span class="hljs-number">0</span>]),</span><br><span class="javascript">              <span class="hljs-attr">idle</span>: mixer.clipAction(gltf.animations[<span class="hljs-number">1</span>]),</span><br><span class="javascript">              <span class="hljs-attr">walk</span>: mixer.clipAction(gltf.animations[<span class="hljs-number">2</span>]),</span><br><span class="javascript">            &#125;;</span><br><span class="javascript">            actions.idle.play();</span><br><span class="javascript">            <span class="hljs-comment">// loader éœ€è¦æ—¶é—´åŠ è½½ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ¸²æŸ“åŠ¨ç”»è¡Œä¸ºéœ€è¦åœ¨loaderçš„å›è°ƒå‡½æ•°å†…</span></span><br><span class="javascript">            animate();</span><br><span class="javascript">          &#125;);</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-comment">// å®ä¾‹åŒ– WebGLæ¸²æŸ“å™¨ï¼Œç›¸å…³é…ç½®å¯ä»¥å¯¹ç…§ç€æ–‡æ¡£è°ƒæ•´</span></span><br><span class="javascript">          renderer = <span class="hljs-keyword">new</span> THREE.WebGLRenderer(&#123; <span class="hljs-attr">alpha</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> &#125;);</span><br><span class="javascript">          renderer.setPixelRatio(<span class="hljs-built_in">window</span>.devicePixelRatio);</span><br><span class="javascript">          renderer.setSize(width, height);</span><br><span class="javascript">          renderer.outputEncoding = THREE.sRGBEncoding;</span><br><span class="javascript">          renderer.shadowMap.enabled = <span class="hljs-literal">true</span>;</span><br><span class="javascript"></span><br><span class="javascript">          renderer.setSize(width, height);</span><br><span class="javascript">          container.appendChild(renderer.domElement);</span><br><span class="javascript">        &#125;</span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-comment">// åŠ¨ç”»å¾ªç¯</span></span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">animate</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          requestAnimationFrame(animate);</span><br><span class="javascript">          <span class="hljs-keyword">var</span> delta = clock.getDelta();</span><br><span class="javascript">          mixer.update(delta);</span><br><span class="javascript">          render();</span><br><span class="javascript">        &#125;</span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          renderer.render(scene, camera);</span><br><span class="javascript">        &#125;</span><br><span class="javascript"></span><br><span class="javascript">        init();</span><br><span class="javascript">      &#125;)();</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><img src="/202108/threejs-blog-fake-x-manual/zombie_demo.gif" class=""><p>ä¸Šé¢ç¤ºä¾‹å®Œæˆåï¼Œæˆ‘ä»¬é€šè¿‡æŠ„ä½œä¸šï¼Œå¤§è‡´äº†è§£äº†å¦‚æœåŠ å…¥æ¨¡å‹ï¼ŒåŠ¨ç”»æ¸²æŸ“ï¼Œæ‘„åƒå¤´è§†è§’ç­‰ï¼Œå¯¹ç…§ç€ç›¸å…³çš„ç±»ï¼ŒæŸ¥é˜…ä¸€éå±æ€§åŠå‡½æ•°ï¼Œå°±å¯ä»¥å¤§æ¦‚æŒæ¡å…¶ç”¨æ³•å•¦ã€‚</p><blockquote><p>çš®è‚¤çº¹ç†æˆ‘å¿˜è®°æ˜¯åœ¨å“ªé‡Œæ‹¿åˆ°çš„äº†ï¼Œå¯èƒ½æ˜¯åœ¨åˆ«çš„ä¸‹è½½ç½‘ç«™æ‰¾åˆ°æ¨¡å‹ä¸­ çº¹ç†è´´å›¾çš„ UV åˆšå¥½ä¸€è‡´çš„ å›¾ç‰‡ï¼Œæ›¿æ¢å›¾ç‰‡å³å¯ï¼Œéœ€è¦çš„å¯è‡ªè¡Œä¸‹è½½</p><center><img src="/202108/threejs-blog-fake-x-manual/zombie_texture.png" class=""></center></blockquote><h3 id="å¢åŠ å…ƒç´ "><a href="#å¢åŠ å…ƒç´ " class="headerlink" title="å¢åŠ å…ƒç´ "></a>å¢åŠ å…ƒç´ </h3><p>é‚£åªæœ‰ä¸€ä¸ªä¸»è§’ç›¸å¯¹å•è°ƒï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æˆ‘ä»¬æŠ„ä½œä¸šå­¦ä¹ åˆ°çš„ï¼ŒåŠ ä¸€äº›å…¶å®ƒæ¨¡å‹ï¼Œä¸°å¯Œåœºæ™¯ã€‚</p><p>æœ€ç»ˆå†³å®šåŠ å…¥è¿™ä¸ª<a href="https://sketchfab.com/3d-models/carriage-with-pumpkins-2a50986ce81a4fea850dc43efeb40009">æ¨¡å‹</a></p><img src="/202108/threejs-blog-fake-x-manual/carriage.png" class=""><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ...</span><br><span class="hljs-comment">// loader æ˜¯å·²å®ä¾‹åŒ–çš„åŠ è½½å™¨ï¼Œæ— é¡»å¤šæ¬¡å®ä¾‹åŒ–åŠ è½½å™¨åŠ è½½æ¨¡å‹</span><br>loader.load(<span class="hljs-string">&quot;/gltf/pumpkin.gltf&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">gltf</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> model = gltf.scene;<br>  model.traverse(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">object</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (object.isMesh) &#123;<br>      object.frustumCulled = <span class="hljs-literal">false</span>;<br>      object.castShadow = <span class="hljs-literal">true</span>;<br>    &#125;<br>  &#125;);<br>  model.rotation.set(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>  model.position.set(<span class="hljs-number">1</span>, <span class="hljs-number">0.1</span>, -<span class="hljs-number">2.4</span>);<br>  <span class="hljs-keyword">let</span> scale = <span class="hljs-number">0.33</span>;<br>  model.scale.set(scale, scale, scale);<br>  scene.add(model);<br>&#125;);<br><span class="hljs-comment">// ...</span><br></code></pre></td></tr></table></figure><p>åœºæ™¯è¿˜æ²¡æœ‰ç»™ä»–åŠ åœ°é¢ï¼ŒZombie å’Œ å—ç“œè½¦ è¿˜ä¼¼æ‚¬åœ¨ç©ºä¸­ï¼Œéœ€è¦å†ä¸ºåœºæ™¯åŠ ä¸€å—åœ°ã€‚éšæ„æœç´¢äº†å¼  MineCraft çš„è‰åœ°è´´å›¾ï¼Œåœ¨ three.js ç¤ºä¾‹ ä¸­æ‰¾åˆ°æœ‰å¯èƒ½å…³è”çš„ç¤ºä¾‹ï¼Œåˆšå¥½ç¬¬ä¸€ä¸ªå°±æœ‰è‰åœ°ï¼Œç”¨å°å­¦çš„è‹±è¯­å‘ç°äº†è¯¥ä»£ç ç‰‡æ®µã€‚</p><img src="/202108/threejs-blog-fake-x-manual/example_ground.png" class=""><p>ç”±äºè®¾æƒ³ç»™è¿™ä¸ª 3D æ•ˆæœåŠ ä¸Šäº›ç®€å•äº¤äº’ï¼Œä¸ºäº†ä¸å¤ªè¿å’Œï¼Œå°†è¿™ä¸ªæ•ˆæœä¼¼å±•å…çš„æ–¹å¼å±•ç°ï¼Œå¯ä»¥é€šè¿‡æŒ‰é’®æ§åˆ¶ä¸»ä½“çš„æ—‹è½¬ä»¥åŠ Zombie çš„åŠ¨ä½œåˆ‡æ¢ï¼Œæœ€ç»ˆé€‰æ‹©äº† CylinderGeometry(åœ†æŸ±å‡ ä½•ä½“)ï¼Œå®Œæˆä¸»ä½“çš„æ•ˆæœã€‚</p><p>å…¶ä¸­ä¸»ä½“çš„æ•ˆæœæˆ‘ä»¬è¿˜éœ€è¦ä¸æ–­çš„è°ƒæ•´ä»–åˆ°ä¸€ä¸ªåˆé€‚çš„ä½ç½®ï¼Œä¸”å½“æ“æ§æ—‹è½¬æ—¶ï¼Œéœ€è¦ä¸€èµ·å¤šä¸ªå‡ ä½•ä½“ä¸€åŒæ—‹è½¬ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™è¿™ 3 ä¸ªä¸»ä½“ ç¾¤ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å»ºç«‹ä¸€ä¸ª 3Då¯¹è±¡ï¼Œå°†ä¸»ä½“æ•ˆæœçš„ 3ä¸ªä¸»ä½“ åŒ…æ‹¬è¿›æ¥ï¼Œç»Ÿä¸€æ“æ§</span><br>stage = <span class="hljs-keyword">new</span> THREE.Object3D();<br>scene.add(stage);<br><br><span class="hljs-comment">// æ–°å¢çš„è‰åœ°</span><br><br><span class="hljs-keyword">var</span> groundTexture = <span class="hljs-keyword">new</span> THREE.TextureLoader().load(<span class="hljs-string">&quot;/gltf/textures/grass.png&quot;</span>);<br><span class="hljs-comment">//è®¾ç½®çº¹ç†çš„æ°´å¹³ä¸å‚ç›´åº”ç”¨é‡å¤æ¸²æŸ“</span><br>groundTexture.wrapS = groundTexture.wrapT = THREE.RepeatWrapping;<br><span class="hljs-comment">//è®¾ç½®çº¹ç†çš„é‡å¤æ¸²æŸ“æ¬¡æ•°</span><br>groundTexture.repeat.set(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>);<br><span class="hljs-comment">// å¢åŠ æè´¨çš„æ¸…æ™°åº¦</span><br>groundTexture.anisotropy = <span class="hljs-number">16</span>;<br>groundTexture.encoding = THREE.sRGBEncoding;<br><br><span class="hljs-keyword">var</span> bottomBase = <span class="hljs-keyword">new</span> THREE.Mesh(<span class="hljs-keyword">new</span> THREE.CylinderBufferGeometry(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">32</span>), <span class="hljs-keyword">new</span> THREE.MeshLambertMaterial(&#123; <span class="hljs-attr">map</span>: groundTexture &#125;));<br><span class="hljs-comment">// æè´¨æ˜¯å¦æ¥æ”¶é˜´å½±</span><br>bottomBase.receiveShadow = <span class="hljs-literal">true</span>;<br>stage.add(bottomBase);<br><br><span class="hljs-comment">// ...</span><br><span class="hljs-comment">// ä»¥åŠå°† loader å›è°ƒä¸­åŠ å…¥åœºæ™¯ scene.add(model)æ”¹ä¸º</span><br>stage.add(model);<br></code></pre></td></tr></table></figure><img src="/202108/threejs-blog-fake-x-manual/demo_effect.png" class=""><h3 id="å¢åŠ å±é™©éš”ç¦»å¸¦"><a href="#å¢åŠ å±é™©éš”ç¦»å¸¦" class="headerlink" title="å¢åŠ å±é™©éš”ç¦»å¸¦"></a>å¢åŠ å±é™©éš”ç¦»å¸¦</h3><p>ç¡®è®¤ä¸»ä½“æ•ˆæœå³å¸ƒå±€åï¼Œç”±äº ä¸»ä½“æ•ˆæœ ä¸»è¦åœ¨å³ä¸‹è§’ï¼Œå³ä¸Šè§’æ€»æ„Ÿè§‰æœ‰äº›ç©ºï¼Œé€‚å½“çš„æƒ³åƒåœºæ™¯ï¼Œæœ€åæƒ³åˆ°äº†å¢åŠ éš”ç¦»å¸¦ï¼Œé»„è‰²ä¸ç»¿è‰²çš„æ­é…ä¹Ÿæ„å¤–çš„åˆé€‚ï¼Œä¹Ÿå°±é¡ºå¸¦å®šä¸‹äº†åšå®¢çš„ä¸»è‰²ç­‰é¢œè‰²çš„è®¾è®¡ã€‚</p><blockquote><p>æœ€åˆé‡‡ç”¨çš„æ˜¯ css3 åº”ç”¨ <code>animation</code> å¯¹ <code>background-position</code> è°ƒæ•´è¾¾åˆ°éš”ç¦»å¸¦çš„åŠ¨æ•ˆï¼Œä½†è¯¥æ–¹æ¡ˆåŸºç¡€æ‰å®çš„å°ä¼™ä¼´ä¼šå‘ç°ï¼Œæ˜“å¼•èµ·é‡ç»˜ï¼ŒCPU è½¬çš„å—¡å—¡çš„ï¼Œè¡¨ç¤ºå¾ˆæ·¦ã€‚</p></blockquote><p>æ‰€ä»¥æœ€è¿‘ä¹Ÿå°±æŠ½ç©ºå°† éš”ç¦»å¸¦ æ”¹ç”¨ Three.js å®Œæˆã€‚<br>é¦–å…ˆæˆ‘ä»¬å…ˆåœ¨å®˜æ–¹çš„ç¤ºä¾‹ä¸­å°è¯•æŠ„æŠ„ä½œä¸šï¼Œä½†å¹¶æ²¡æœ‰æ‰¾åˆ°ç›¸ä¼¼å…³è”çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬é€šè¿‡å‰é¢æŠ„ä½œä¸šçš„å­¦ä¹ ï¼Œå¤§æ¦‚æ€è€ƒå‡ºæ•ˆæœçš„å®ç°æ–¹å¼ï¼Œå¸¸è§çš„è‡ªç„¶å°±æ˜¯çº¹ç†åç§»ã€çº¹ç†åŠ¨ç”»äº†ã€‚</p><blockquote><p>æœç´¢åˆ°çš„çº¹ç†æ“æ§æ–‡ç« ï¼š <a href="https://blog.csdn.net/u014291990/article/details/103374603">Threejs çº¹ç†å¯¹è±¡ Texture é˜µåˆ—ã€åç§»ã€æ—‹è½¬(çº¹ç†åŠ¨ç”»)</a></p></blockquote><p>æœ€ç»ˆéš”ç¦»å¸¦çš„ä»£ç å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å› çº¹ç†å˜é‡éœ€è¦ç»™animateå‡½æ•°å¼•ç”¨ï¼Œæ‰€ä»¥éœ€è¦åœ¨å¤–é¢å£°æ˜æ­¤çº¹ç†å˜é‡</span><br><span class="hljs-keyword">var</span> warningTexture;<br><br><span class="hljs-comment">//...</span><br><span class="hljs-comment">//function init()&#123;</span><br>warningTexture = <span class="hljs-keyword">new</span> THREE.TextureLoader().load(<span class="hljs-string">&quot;/img/warning_zone.png&quot;</span>);<br>warningTexture.wrapS = THREE.RepeatWrapping;<br>warningTexture.repeat.set(<span class="hljs-number">4</span>, <span class="hljs-number">1</span>);<br><br><span class="hljs-keyword">var</span> warningBar = <span class="hljs-keyword">new</span> THREE.Mesh(<br>  <span class="hljs-comment">// PlaneGeometryå¹³é¢ç¼“å†²å‡ ä½•ä½“</span><br>  <span class="hljs-keyword">new</span> THREE.PlaneGeometry((<span class="hljs-number">0.8</span> * (<span class="hljs-number">424</span> * <span class="hljs-number">4</span>)) / <span class="hljs-number">60</span>, <span class="hljs-number">0.8</span>),<br>  <span class="hljs-keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="hljs-attr">map</span>: warningTexture &#125;)<br>);<br>scene.add(warningBar);<br><br><span class="hljs-comment">//...</span><br><span class="hljs-comment">//function animate()&#123;</span><br><span class="hljs-comment">//...</span><br>warningTexture.offset.x -= <span class="hljs-number">0.007</span>;<br><span class="hljs-comment">//&#125;</span><br></code></pre></td></tr></table></figure><img src="/202108/threejs-blog-fake-x-manual/effect.gif" class=""><h2 id="æœªå®Œå¾…ç»­"><a href="#æœªå®Œå¾…ç»­" class="headerlink" title="æœªå®Œå¾…ç»­"></a>æœªå®Œå¾…ç»­</h2><p>æˆ‘çš„åšå®¢æ˜¯åŸºäº hexo æ”¹è‡ªè¡Œå°è¯•ç¼–å†™ä¸»é¢˜ï¼Œè¿˜æœªæ•´ç†æˆå¯å¼€æºçš„ä¸»é¢˜é¡¹ç›®ï¼ŒåæœŸæœ‰æ—¶é—´ä¹Ÿäº‰å–åˆ†äº«å‡ºæ¥ä¾›å¤§å®¶å‚è€ƒã€‚</p><blockquote><p>three.js æˆ‘è¿˜åªæ˜¯èœé¸¡ï¼Œå¤§ä½¬çœ‹çœ‹çƒ­é—¹ï¼Œä¸è¦ç¬‘æˆ‘ï¼Œæœ‰å¥½çš„ç©æ³•ï¼Œä¹Ÿæœ›ä¸åèµæ•™~å“ˆå“ˆå“ˆå“ˆã€‚</p></blockquote><h2 id="é™„ä»¶ï¼šæœ€ç»ˆä»£ç "><a href="#é™„ä»¶ï¼šæœ€ç»ˆä»£ç " class="headerlink" title="é™„ä»¶ï¼šæœ€ç»ˆä»£ç "></a>é™„ä»¶ï¼šæœ€ç»ˆä»£ç </h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">      <span class="hljs-selector-tag">html</span>,</span><br><span class="css">      <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">      &#125;</span><br><span class="css">      <span class="hljs-selector-class">.bg-canvas</span> &#123;</span><br><span class="css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">      &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-canvas&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/three@0.131.3/build/three.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/three@0.131.3/examples/js/loaders/GLTFLoader.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">      (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> scene, renderer, camera, container;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> mixer, clock, actions, warningTexture;</span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-comment">// è·å–ç»˜åˆ¶å®¹å™¨åŠå®¹å™¨å°ºå¯¸</span></span><br><span class="javascript">          container = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;.bg-canvas&quot;</span>);</span><br><span class="javascript">          <span class="hljs-keyword">var</span> width = container.getBoundingClientRect().width;</span><br><span class="javascript">          <span class="hljs-keyword">var</span> height = container.getBoundingClientRect().height;</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-comment">// å®ä¾‹åŒ–é€è§†æ‘„åƒæœºï¼Œæˆ‘ä»¬çœ‹è§çš„å³æ˜¯æ­¤æ‘„åƒæœºçš„è§†è§’ã€‚</span></span><br><span class="javascript">          camera = <span class="hljs-keyword">new</span> THREE.PerspectiveCamera(<span class="hljs-number">45</span>, width / height, <span class="hljs-number">1</span>, <span class="hljs-number">2000</span>);</span><br><span class="javascript">          camera.position.set(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">16</span>);</span><br><span class="javascript"></span><br><span class="javascript">          clock = <span class="hljs-keyword">new</span> THREE.Clock();</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-comment">// å®ä¾‹åŒ–åœºæ™¯</span></span><br><span class="javascript">          scene = <span class="hljs-keyword">new</span> THREE.Scene();</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-comment">// å®ä¾‹åŒ–åŠçƒå…‰ï¼Œå…ˆæŠŠåœºæ™¯æŒ‰ç¯å…‰é¢œè‰²ç…§äº®</span></span><br><span class="javascript">          <span class="hljs-keyword">var</span> hemiLight = <span class="hljs-keyword">new</span> THREE.HemisphereLight(<span class="hljs-number">0xf2f2f2</span>, <span class="hljs-number">0xf2f2f2</span>);</span><br><span class="javascript">          hemiLight.position.set(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0</span>);</span><br><span class="javascript">          scene.add(hemiLight);</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-keyword">var</span> dirLight = <span class="hljs-keyword">new</span> THREE.DirectionalLight(<span class="hljs-number">0xffffff</span>);</span><br><span class="javascript">          dirLight.position.set(<span class="hljs-number">0</span>, <span class="hljs-number">30</span>, <span class="hljs-number">0</span>);</span><br><span class="javascript">          dirLight.castShadow = <span class="hljs-literal">true</span>;</span><br><span class="javascript">          dirLight.shadow.camera.near = <span class="hljs-number">0.1</span>;</span><br><span class="javascript">          dirLight.shadow.camera.far = <span class="hljs-number">60</span>;</span><br><span class="javascript">          scene.add(dirLight);</span><br><span class="javascript"></span><br><span class="javascript">          warningTexture = <span class="hljs-keyword">new</span> THREE.TextureLoader().load(<span class="hljs-string">&quot;./warning_zone.png&quot;</span>);</span><br><span class="javascript">          warningTexture.wrapS = THREE.RepeatWrapping;</span><br><span class="javascript">          warningTexture.repeat.set(<span class="hljs-number">4</span>, <span class="hljs-number">1</span>);</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-keyword">var</span> warningBar = <span class="hljs-keyword">new</span> THREE.Mesh(</span><br><span class="javascript">            <span class="hljs-comment">// PlaneGeometryå¹³é¢ç¼“å†²å‡ ä½•ä½“</span></span><br><span class="javascript">            <span class="hljs-keyword">new</span> THREE.PlaneGeometry((<span class="hljs-number">0.8</span> * (<span class="hljs-number">424</span> * <span class="hljs-number">4</span>)) / <span class="hljs-number">60</span>, <span class="hljs-number">0.8</span>),</span><br><span class="javascript">            <span class="hljs-keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="hljs-attr">map</span>: warningTexture &#125;)</span><br><span class="javascript">          );</span><br><span class="javascript">          warningBar.position.set(<span class="hljs-number">0</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">5.4</span>);</span><br><span class="javascript">          warningBar.rotation.set(<span class="hljs-number">0</span>, -<span class="hljs-number">0.3</span>, -<span class="hljs-number">0.1</span>);</span><br><span class="javascript">          scene.add(warningBar);</span><br><span class="javascript"></span><br><span class="javascript">          stage = <span class="hljs-keyword">new</span> THREE.Object3D();</span><br><span class="javascript">          scene.add(stage);</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-keyword">var</span> groundTexture = <span class="hljs-keyword">new</span> THREE.TextureLoader().load(<span class="hljs-string">&quot;./textures/grass.png&quot;</span>);</span><br><span class="javascript">          groundTexture.wrapS = groundTexture.wrapT = THREE.RepeatWrapping;</span><br><span class="javascript">          groundTexture.repeat.set(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>);</span><br><span class="javascript">          groundTexture.anisotropy = <span class="hljs-number">16</span>;</span><br><span class="javascript">          groundTexture.encoding = THREE.sRGBEncoding;</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-keyword">var</span> bottomBase = <span class="hljs-keyword">new</span> THREE.Mesh(<span class="hljs-keyword">new</span> THREE.CylinderBufferGeometry(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">32</span>), <span class="hljs-keyword">new</span> THREE.MeshLambertMaterial(&#123; <span class="hljs-attr">map</span>: groundTexture &#125;));</span><br><span class="javascript">          bottomBase.receiveShadow = <span class="hljs-literal">true</span>;</span><br><span class="javascript">          stage.add(bottomBase);</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-keyword">var</span> loader = <span class="hljs-keyword">new</span> THREE.GLTFLoader();</span><br><span class="javascript"></span><br><span class="javascript">          loader.load(<span class="hljs-string">&quot;./pumpkin.gltf&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">gltf</span>) </span>&#123;</span><br><span class="javascript">            <span class="hljs-keyword">var</span> model = gltf.scene;</span><br><span class="javascript">            model.traverse(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">object</span>) </span>&#123;</span><br><span class="javascript">              <span class="hljs-keyword">if</span> (object.isMesh) &#123;</span><br><span class="javascript">                object.frustumCulled = <span class="hljs-literal">false</span>;</span><br><span class="javascript">                object.castShadow = <span class="hljs-literal">true</span>;</span><br><span class="javascript">              &#125;</span><br><span class="javascript">            &#125;);</span><br><span class="javascript">            model.rotation.set(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);</span><br><span class="javascript">            model.position.set(<span class="hljs-number">1</span>, <span class="hljs-number">0.1</span>, -<span class="hljs-number">2.4</span>);</span><br><span class="javascript">            <span class="hljs-keyword">let</span> scale = <span class="hljs-number">0.33</span>;</span><br><span class="javascript">            model.scale.set(scale, scale, scale);</span><br><span class="javascript">            stage.add(model);</span><br><span class="javascript">          &#125;);</span><br><span class="javascript">          <span class="hljs-comment">// åŠ è½½æ¨¡å‹</span></span><br><span class="javascript">          loader.load(<span class="hljs-string">&quot;./zombie.gltf&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">gltf</span>) </span>&#123;</span><br><span class="javascript">            <span class="hljs-keyword">var</span> model = gltf.scene;</span><br><span class="javascript">            model.traverse(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">object</span>) </span>&#123;</span><br><span class="javascript">              <span class="hljs-keyword">if</span> (object.isMesh) &#123;</span><br><span class="javascript">                object.frustumCulled = <span class="hljs-literal">false</span>;</span><br><span class="javascript">                <span class="hljs-comment">// æŠ•å°„é˜´å½±</span></span><br><span class="javascript">                object.castShadow = <span class="hljs-literal">true</span>;</span><br><span class="javascript">              &#125;</span><br><span class="javascript">            &#125;);</span><br><span class="javascript">            model.position.set(<span class="hljs-number">0.6</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2.5</span>);</span><br><span class="javascript">            model.scale.set(<span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>);</span><br><span class="javascript">            stage.add(model);</span><br><span class="javascript"></span><br><span class="javascript">            <span class="hljs-comment">// å®ä¾‹åŒ–åŠ¨ç”»æ··åˆå™¨</span></span><br><span class="javascript">            mixer = <span class="hljs-keyword">new</span> THREE.AnimationMixer(model);</span><br><span class="javascript">            actions = &#123;</span><br><span class="javascript">              <span class="hljs-attr">push_up</span>: mixer.clipAction(gltf.animations[<span class="hljs-number">0</span>]),</span><br><span class="javascript">              <span class="hljs-attr">idle</span>: mixer.clipAction(gltf.animations[<span class="hljs-number">1</span>]),</span><br><span class="javascript">              <span class="hljs-attr">walk</span>: mixer.clipAction(gltf.animations[<span class="hljs-number">2</span>]),</span><br><span class="javascript">            &#125;;</span><br><span class="javascript">            actions.walk.play();</span><br><span class="javascript">            animate();</span><br><span class="javascript">          &#125;);</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-comment">// å®ä¾‹åŒ– WebGLæ¸²æŸ“å™¨ï¼Œç›¸å…³é…ç½®å¯ä»¥å¯¹ç…§ç€æ–‡æ¡£è°ƒæ•´</span></span><br><span class="javascript">          renderer = <span class="hljs-keyword">new</span> THREE.WebGLRenderer(&#123; <span class="hljs-attr">alpha</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> &#125;);</span><br><span class="javascript">          renderer.setPixelRatio(<span class="hljs-built_in">window</span>.devicePixelRatio);</span><br><span class="javascript">          renderer.setSize(width, height);</span><br><span class="javascript">          renderer.outputEncoding = THREE.sRGBEncoding;</span><br><span class="javascript">          renderer.shadowMap.enabled = <span class="hljs-literal">true</span>;</span><br><span class="javascript"></span><br><span class="javascript">          renderer.setSize(width, height);</span><br><span class="javascript">          container.appendChild(renderer.domElement);</span><br><span class="javascript">        &#125;</span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">animate</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          requestAnimationFrame(animate);</span><br><span class="javascript">          <span class="hljs-keyword">var</span> delta = clock.getDelta();</span><br><span class="javascript">          warningTexture.offset.x -= <span class="hljs-number">0.007</span>;</span><br><span class="javascript">          mixer.update(delta);</span><br><span class="javascript">          render();</span><br><span class="javascript">        &#125;</span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          renderer.render(scene, camera);</span><br><span class="javascript">        &#125;</span><br><span class="javascript"></span><br><span class="javascript">        init();</span><br><span class="javascript">      &#125;)();</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> å‰ç«¯æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Three.js </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäº element-ui å¼€æºçš„ saas ä¸šåŠ¡æ‰©å±•</title>
      <link href="/202108/element-ui-saas-extend/"/>
      <url>/202108/element-ui-saas-extend/</url>
      
        <content type="html"><![CDATA[<img src="/202108/element-ui-saas-extend/cover.png" class="" width="0" height="0"><h1 id="Element-SaaS-æ‰©å±•"><a href="#Element-SaaS-æ‰©å±•" class="headerlink" title="Element SaaS æ‰©å±•"></a>Element SaaS æ‰©å±•</h1><p><a href="https://www.npmjs.com/package/element-ui-saas-extend"><img src="https://img.shields.io/npm/v/element-ui-saas-extend"></a> <a href="https://www.npmjs.com/package/element-ui-saas-extend"><img src="https://img.shields.io/npm/dt/element-ui-saas-extend"></a></p><p>ç”±äºè¿‘æœŸå·¥ä½œä¸»è¦åå‘ SaaS ä¸šåŠ¡å¼€å‘ï¼Œå¼€å‘å†…å®¹åœ¨è¡¨å•äº¤äº’åŠè¡¨æ ¼ä¸Šç­‰å¼€å‘é‡å¤æ€§ä¹Ÿå¾ˆé«˜ï¼ŒåŸºäºé¡¹ç›®å¤§å¤šåº”ç”¨ element å¥—ä»¶å¼€å‘ï¼Œæ‰€ä»¥å°±èŒå‘äº†æ•´ç†ä¸ªé’ˆå¯¹ saasä¸šåŠ¡ çš„elementç»„ä»¶åº“saasæ‰©å±•ã€‚</p><h2 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h2><ul><li><a href="https://kwokronny.gitee.io/element-ui-saas-extend">Gitee æ–‡æ¡£é“¾æ¥</a></li><li><a href="https://kwokronny.github.io/element-ui-saas-extend">Github æ–‡æ¡£é“¾æ¥</a></li></ul><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul><li><h3 id="æ•ˆç‡è‡³ä¸Š"><a href="#æ•ˆç‡è‡³ä¸Š" class="headerlink" title="æ•ˆç‡è‡³ä¸Š"></a>æ•ˆç‡è‡³ä¸Š</h3>  æ•´ç†å¸¸è§ä¸šåŠ¡ä¸‹çš„é‡å¤æ€§å·¥ä½œï¼Œæ±‡åˆæˆé¢„è®¾ç»„ä»¶ï¼Œé«˜æ•ˆçš„å®Œæˆå·¥ä½œã€‚</li><li><h3 id="å°½äº«è‡ªç”±"><a href="#å°½äº«è‡ªç”±" class="headerlink" title="å°½äº«è‡ªç”±"></a>å°½äº«è‡ªç”±</h3>å°½å¯èƒ½çš„æ¢³ç†è€¦åˆï¼Œåœ¨å…¼é¡¾é«˜æ•ˆçš„åŒæ—¶ï¼Œäº¦ç»™äºˆè‡ªç”±çš„ç©ºé—´è‡ªå®šä¹‰å‚ç›´ä¸šåŠ¡ä¸‹çš„ç‰¹æ®Šåœºæ™¯ã€‚</li><li><h3 id="ç®€å•æ˜“ç”¨"><a href="#ç®€å•æ˜“ç”¨" class="headerlink" title="ç®€å•æ˜“ç”¨"></a>ç®€å•æ˜“ç”¨</h3>æ²¿ç”¨Element UI çš„æ ‡å‡†å¼€å‘ï¼Œå°½å¯èƒ½å¤šçš„ç¤ºä¾‹ä»£ç ä¸æ–‡æ¡£ï¼Œå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ã€‚</li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">yarn add element-ui-saas-extend -S<br>// or<br>npm install element-ui-saas-extend -S<br></code></pre></td></tr></table></figure><h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><figure class="highlight js"><figcaption><span>static</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">import</span> ElementUI <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;element-ui&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;<br>Vue.use(ElementUI);<br><br><span class="hljs-keyword">import</span> ElementUISaaSExtend <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;element-ui-saas-extend&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;element-ui-saas-extend/lib/theme-chalk/index.css&#x27;</span>;<br>Vue.use(ElementUISaaSExtend);<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€æºé¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼€æº </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>go-bindata-assetfs å®ç°å•æ–‡ä»¶ç¼–è¯‘</title>
      <link href="/202105/golang-bindata-static/"/>
      <url>/202105/golang-bindata-static/</url>
      
        <content type="html"><![CDATA[<img src="/202105/golang-bindata-static/cover.png" class="" width="0" height="0"><p>åœ¨å¼€å‘ yoz-comment è¯„è®ºç³»ç»Ÿä¸­ä¸ºäº†æ–¹ä¾¿éƒ¨ç½²ï¼Œåœ¨éƒ¨ç½²çš„è¿‡ç¨‹ä¸­å®ç°å•æ–‡ä»¶æ— ä¾èµ–å‘å¸ƒï¼Œå°±åœ¨æƒ³æ˜¯å¦å¯ä»¥å°†é™æ€æ–‡ä»¶ä¸€åŒç¼–è¯‘è¿›åº”ç”¨ä¸­ï¼›åœ¨æœç´¢åæ‰¾åˆ°äº† <a href="https://github.com/go-bindata/go-bindata">go-bindata</a> ï¼Œä¸ºäº†å¾ˆæ–¹ä¾¿äº web åº”ç”¨ï¼Œæœ€åé€‰æ‹©ä»¥ go-bindata ä¸ºä¾èµ–çš„ <a href="https://github.com/elazarl/go-bindata-assetfs">go-bindata-assetfs</a>ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œç›´æ¥å°è¯•</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">go get -u github.com/go-bindata/go-bindata/...<br>go get github.com/elazarl/go-bindata-assetfs/...<br></code></pre></td></tr></table></figure><ul><li><p>go-bindata æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå°†é™æ€æ–‡ä»¶ç”Ÿæˆä¸º go ä»£ç ï¼Œæ–‡ä»¶ä»¥ byte æ•°ç»„çš„å½¢å¼å­˜åœ¨ã€‚</p></li><li><p>go-bindata-assetfs æ˜¯æ–‡ä»¶ç³»ç»Ÿæ¥å£çš„å®ç°ï¼Œä»ç”Ÿæˆçš„ go æ–‡ä»¶ä¸­æ‹¿æ–‡ä»¶æ•°æ®ã€‚</p></li></ul><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">go-bindata-assetfs -o static/static.go -pkg=static static_data/...<br></code></pre></td></tr></table></figure><ul><li><p>æ— æ ‡ç­¾ä¼ å‚æŒ‡çš„æ˜¯  éœ€è½¬æ¢çš„æ–‡ä»¶ï¼Œ</p></li><li><p><code>-o</code> æŒ‡è½¬æ¢åå¯¼å‡ºæ–‡ä»¶ä½ç½®ï¼Œé»˜è®¤ä¸º <code>./bindata.go</code></p></li><li><p><code>-pkg</code> æŒ‡å¯¼å‡ºçš„åŒ…åï¼Œé»˜è®¤ä¸º <code>main</code></p></li><li><p><code>-ignore [regexp value] </code> æ­£åˆ™æ–‡æœ¬å¿½ç•¥åŒ¹é…æ–‡ä»¶<br>  å¦‚ï¼š<code>-ignore &quot;\\.DS_Store|package.json&quot;</code></p></li><li><p><code>-debug</code> æŒ‡è°ƒè¯•æ¨¡å¼ï¼Œç”Ÿæˆçš„åŒ…å¹¶ä¸ä¼šåµŒå…¥æ–‡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥ç¡¬ç›˜è¯»å–æ–‡ä»¶ï¼Œæ–¹ä¾¿å‰ç«¯çƒ­æ›´æ–°è°ƒè¯•ã€‚</p></li><li><p>åŸºç¡€ç¤ºä¾‹</p></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;project/statics&quot;</span><br><span class="hljs-string">&quot;net/http&quot;</span><br><br>assetfs <span class="hljs-string">&quot;github.com/elazarl/go-bindata-assetfs&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><br><span class="hljs-comment">// é‡æ–°å®ç°æ–‡ä»¶æ¥å£</span><br>staticFS := assetfs.AssetFS&#123;<br>Asset: statics.Asset, <br>AssetDir: statics.AssetDir, <br>AssetInfo: statics.AssetInfo, <br>Prefix: <span class="hljs-string">&quot;static_data&quot;</span>, <span class="hljs-comment">// è®¿é—®è·¯ç”±index.html =&gt; æŒ‡å‘æ–‡ä»¶ static_data/index.html</span><br>Fallback: <span class="hljs-string">&quot;index.html&quot;</span>,<br>&#125;<br><br>http.Handle(<span class="hljs-string">&quot;/&quot;</span>, http.FileServer(&amp;staticFS))<br>http.ListenAndServe(<span class="hljs-string">&quot;:8080&quot;</span>, <span class="hljs-literal">nil</span>)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Gin ç¤ºä¾‹<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;project/statics&quot;</span><br><span class="hljs-string">&quot;net/http&quot;</span><br><br>assetfs <span class="hljs-string">&quot;github.com/elazarl/go-bindata-assetfs&quot;</span><br><span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>engine := gin.Default()<br><br><span class="hljs-comment">// é€šè¿‡ go-bindata-assetfs æä¾›çš„å‡½æ•°å°†é™æ€èµ„æº</span><br>staticFS := assetfs.AssetFS&#123;<br>Asset: statics.Asset,<br>AssetDir: statics.AssetDir, <br>AssetInfo: statics.AssetInfo, <br>Prefix: <span class="hljs-string">&quot;static_data&quot;</span>, <span class="hljs-comment">// è®¿é—®è·¯ç”±index.html =&gt; æŒ‡å‘æ–‡ä»¶ static_data/index.html</span><br>Fallback: <span class="hljs-string">&quot;index.html&quot;</span>,<br>&#125;<br>engine.StaticFS(<span class="hljs-string">&quot;/&quot;</span>, &amp;staticFS) <span class="hljs-comment">//é…ç½®é™æ€èµ„æºæ–‡ä»¶è·¯ç”±</span><br>engine.Run(<span class="hljs-string">&quot;:8080&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> åç«¯æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yoz-comment å¼€æºè¯„è®ºç³»ç»Ÿ</title>
      <link href="/202105/yoz-comment/"/>
      <url>/202105/yoz-comment/</url>
      
        <content type="html"><![CDATA[<img src="/202105/yoz-comment/cover.png" class="" width="0" height="0"><h1 id="å¼€æºçš„è¯„è®ºç³»ç»Ÿ"><a href="#å¼€æºçš„è¯„è®ºç³»ç»Ÿ" class="headerlink" title="å¼€æºçš„è¯„è®ºç³»ç»Ÿ"></a>å¼€æºçš„è¯„è®ºç³»ç»Ÿ</h1><p><a href="https://github.com/hiyoz/yoz-comment"><img src="https://img.shields.io/github/go-mod/go-version/hiyoz/yoz-comment" alt="Go Version"></a> <a href="https://github.com/hiyoz/yoz-comment"><img src="https://img.shields.io/github/license/hiyoz/yoz-comment" alt="License"></a></p><img src="/202105/yoz-comment/preview.jpg" class=""><p>å»ºç«‹åšå®¢ï¼ŒåŸç”¨ç€<a href="https://github.com/utterance/utterances">utterance</a>è¯„è®ºç³»ç»Ÿï¼Œæ–¹ä¾¿æ˜“ç”¨ï¼Œä½†ç•™è¨€è€…éƒ½éœ€è¦ç™»å½•åæ–¹å¯ç•™è¨€è¿‡äºç¹çä¸”å‡å°‘ç•™è¨€ç§¯ææ€§ï¼Œæ”¯æŒè‡ªæ­å»ºçš„è¯„è®ºç³»ç»Ÿå¤§éƒ¨åˆ†ä¸ºpythonå¼€å‘ï¼Œéœ€è¦åœ¨æœåŠ¡å™¨å®‰è£…ä¸€å®šçš„ä¾èµ–ç­‰ï¼Œå› ä¸ºä¸åŸºå‹å…±ç”¨æœåŠ¡å™¨ï¼Œä¸æƒ³å¼„ä¹±æœåŠ¡å™¨ç¯å¢ƒï¼Œé¡ºä¾¿ç»ƒæ‰‹ç©ä¸‹golangï¼Œä¾¿è‡ªå·±é€ äº†è¿™ä¸ªè½®å­ã€‚<br>åŒæ—¶ä¹Ÿæ¬¢è¿å¤§å®¶æ Issues æŒ‡æ­£æˆ–æäº¤ Pull Request ä¼˜åŒ–</p><ul><li><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul><li>å¤šçº§è¯„è®º</li><li>éƒ¨ç½²ç®€å•ï¼Œå¯è§†åŒ–é…ç½®</li><li>æ”¯æŒMySQLã€PostgreSQL</li><li>æ”¯æŒå“åº”å¼</li><li>æ”¯æŒ æ˜/æš— ä¸»é¢˜</li><li>æ¥å…¥ Gravatar å¤´åƒæ˜¾ç¤º</li><li>æ”¯æŒæ•æ„Ÿè¯è¯†åˆ«</li><li>æ”¯æŒé‚®ä»¶é€šçŸ¥è‡ªå·± åŠ SendCloudå¹³å° å‘ä¿¡é€šçŸ¥ç•™è¨€è€…æœ‰å›å¤</li></ul></li></ul><blockquote><p>ç”±äº gorm.io/driver/sqlite ä¸­ä¾èµ–çš„ go-sqlite3 éœ€è¦å¼€å¯ CGO æ”¯æŒï¼Œç¼–è¯‘è·¨å¹³å°éœ€è¦è¾ƒä¸ºå¤æ‚çš„æ“ä½œï¼Œæ‰ç–å­¦æµ…ï¼Œåªå¥½æš‚æ—¶æ”¾å¼ƒï¼Œæœ‰äº†è§£çš„æœ‹å‹è¿˜è¯·å¤šå¤šæŒ‡æ•™ã€‚</p></blockquote><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><ul><li><h3 id="éƒ¨ç½²è‡³æœåŠ¡å™¨"><a href="#éƒ¨ç½²è‡³æœåŠ¡å™¨" class="headerlink" title="éƒ¨ç½²è‡³æœåŠ¡å™¨"></a>éƒ¨ç½²è‡³æœåŠ¡å™¨</h3><ul><li><h4 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h4>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run \<br> -v /deploy_dir:/app \ <span class="hljs-comment">#éƒ¨ç½²ä½ç½®</span><br> -p 9975:9975 \ <span class="hljs-comment">#ç«¯å£</span><br> --name yoz-comment \ <span class="hljs-comment">#å®¹å™¨åç§°</span><br> hiyoz/yoz-comment<br></code></pre></td></tr></table></figure></li><li><h4 id="ç›´æ¥éƒ¨ç½²"><a href="#ç›´æ¥éƒ¨ç½²" class="headerlink" title="ç›´æ¥éƒ¨ç½²"></a>ç›´æ¥éƒ¨ç½²</h4>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nohup ./yoz-comment &gt; /dev/null 2&gt;&amp;1 &amp;<br></code></pre></td></tr></table></figure></li></ul></li><li><h3 id="ã€å¯é€‰ã€‘SendCloud-å‘ä¿¡é€šçŸ¥"><a href="#ã€å¯é€‰ã€‘SendCloud-å‘ä¿¡é€šçŸ¥" class="headerlink" title="ã€å¯é€‰ã€‘SendCloud å‘ä¿¡é€šçŸ¥"></a>ã€å¯é€‰ã€‘SendCloud å‘ä¿¡é€šçŸ¥</h3><p>  ä¸ºå¢åŠ ç«™ç‚¹çš„äº’åŠ¨ï¼Œå¾ˆå¤šç”¨æˆ·ç•™è¨€åé€šå¸¸æ— æ³•å¾—çŸ¥è‡ªå·±çš„ç•™è¨€å¾—åˆ°å›å¤ï¼Œä¹Ÿå°±å‡å°‘äº†ç½‘ç«™çš„äº’åŠ¨æ€§ï¼Œä½†ç”±äºå¸¸è§çš„é‚®ç®±å­˜åœ¨è¢«æ‹¦æˆªSMTPå‘ä¿¡é—®é¢˜ï¼Œä¸”SMTPåè®®ç›´æ¥å‘é€ä¼šæš´éœ²æœåŠ¡å™¨ç«™ç‚¹ä½ç½®ï¼Œæ‰€ä»¥å°±éœ€è¦å€ŸåŠ©å‘ä¿¡å¹³å°å¢å¼ºäº’åŠ¨æ€§å•¦ï¼Œé€‰ç”¨SendCloudåŸå› æ˜¯æˆ‘å¥½æœ‹å‹ä¸æˆ‘å…±äº«äº†æ­¤å¹³å°çš„è´¦å·ä½¿ç”¨ï¼ŒåæœŸéœ€è¦å¢åŠ å…¶å®ƒå¹³å°å¯ä»¥æäº¤pull-requestï¼ˆå¯¹å¼€æºé¡¹ç›®ç®¡ç†ç»éªŒå°‘ï¼Œå¦‚æœ‰éœ€è¦è¿˜è¯·ä¸åèµæ•™ï¼‰</p><blockquote><p>æä¾›çš„é‚®ä»¶æ¨¡æ¿ä»£ç </p></blockquote>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;9999&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none !important; font-size:0; line-height:0&quot;</span>&gt;</span>ä½ åœ¨ KwokRonny åšå®¢ä¸Šçš„ç•™è¨€æœ‰å›å¤å•¦<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color:white;border-top:2px solid #12ADDB;box-shadow:0 1px 3px #AAAAAA; line-height:180%; padding:0 15px 12px;width:500px;margin:100px auto;color:#555555;font-family:Century Gothic,Trebuchet MS,Hiragino Sans GB,å¾®è½¯é›…é»‘,Microsoft Yahei,Tahoma,Helvetica,Arial,SimSun,sans-serif;font-size:14px;&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;border-bottom:1px solid #DDD;font-size:16px;font-weight:normal;padding:13px 0 10px 0;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: #12ADDB;font-weight: bold;&quot;</span>&gt;</span><span class="hljs-symbol">&amp;gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>ä½ åœ¨ <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://kwokronny.top&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-decoration:none;color: #12ADDB;&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span>KwokRonny<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> åšå®¢ä¸Šçš„ç•™è¨€æœ‰å›å¤å•¦ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding:0 12px 0 12px;margin-top:18px&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>%you% åŒå­¦ï¼Œä½ åœ¨æ–‡ç« ã€Š<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;%post_url%&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-decoration:none; color:#12addb&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span>%post%<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>ã€‹ä¸Šçš„è¯„è®º:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: #f5f5f5;border: 0 solid #DDD;padding: 10px 15px;margin:18px 0&quot;</span>&gt;</span>%you_comment%<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>%comment_author% ç»™ä½ çš„å›å¤å¦‚ä¸‹:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: #f5f5f5;border: 0 solid #DDD;padding: 10px 15px;margin:18px 0&quot;</span>&gt;</span>%comment%<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä½ å¯ä»¥ç‚¹å‡» <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;%comment_url%&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-decoration:none; color:#12addb&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span>æŸ¥çœ‹å›å¤çš„å®Œæ•´å…§å®¹ <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>ï¼Œæ¬¢è¿å†æ¥ç©å‘€~<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>  <strong>é¢„è§ˆ</strong></p>  <img src="/202105/yoz-comment/mail_preview.png" class=""></li><li><h3 id="é…ç½®å®‰è£…"><a href="#é…ç½®å®‰è£…" class="headerlink" title="é…ç½®å®‰è£…"></a>é…ç½®å®‰è£…</h3><p>  è¿è¡Œåä¼šæ£€æµ‹åˆ°åº”ç”¨ç›®å½•ä¸‹ <code>./config.yaml</code> æ˜¯å¦å­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦è¿è¡Œé…ç½®è¿‡ç¨‹ã€‚</p><p>  è®¿é—® <a href="http://localhost:9975/">http://localhost:9975</a> ä¼šè¿›å…¥å®‰è£…é…ç½®é¡µé¢</p><blockquote><p>SMTPé‚®ä»¶é€šçŸ¥ä½¿ç”¨åŒåŸŸåçš„é‚®ç®±å‘é€é‚®ä»¶é€šçŸ¥é¿å…é‚®ä»¶å‘é€å¤±è´¥æˆ–è¿›å…¥åƒåœ¾æ¡¶</p></blockquote>  <img src="/202105/yoz-comment/install.jpg" class=""><p>  æ ¹æ®é…ç½®é¡µé¢æ“ä½œå®Œæˆåä¼šåœ¨ç›¸åº”ä½ç½®ç”Ÿæˆ <code>config.yaml</code> é…ç½®æ–‡ä»¶åï¼Œæ‰‹åŠ¨é‡æ–°å¯åŠ¨åº”ç”¨</p></li><li><h3 id="åœ¨é¡µé¢ä¸­å¼•ç”¨ä»£ç "><a href="#åœ¨é¡µé¢ä¸­å¼•ç”¨ä»£ç " class="headerlink" title="åœ¨é¡µé¢ä¸­å¼•ç”¨ä»£ç "></a>åœ¨é¡µé¢ä¸­å¼•ç”¨ä»£ç </h3><p>  åœ¨å±•ç¤ºè¯„è®ºç»„ä»¶çš„ä½ç½®æ·»åŠ ä»¥ä¸‹ä»£ç </p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> </span><br><span class="hljs-tag"><span class="hljs-attr">id</span>=<span class="hljs-string">&quot;YozComment&quot;</span> </span><br><span class="hljs-tag"><span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&#123;éƒ¨ç½²åœ°å€&#125;/client.js&quot;</span> </span><br><span class="hljs-tag"><span class="hljs-attr">token</span>=<span class="hljs-string">&quot;é¡µé¢å”¯ä¸€TOKEN&quot;</span> </span><br><span class="hljs-tag"><span class="hljs-attr">theme</span>=<span class="hljs-string">&quot;&#123;light|dark&#125;&quot;</span> </span><br><span class="hljs-tag"><span class="hljs-attr">crossorigin</span>=<span class="hljs-string">&quot;anonymous&quot;</span> </span><br><span class="hljs-tag"><span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><h3 id="ç®¡ç†åå°"><a href="#ç®¡ç†åå°" class="headerlink" title="ç®¡ç†åå°"></a>ç®¡ç†åå°</h3><p>  å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ æ‰°ä¹±å­—ç¬¦ ä¸ºåå°ç®¡ç†å…¥å£</p><p>  å¦‚è®¾ç½®è·¯ç”±ä¸º <code>gkqoSDBxv43fgL9CP3pV9u</code></p><p>  åˆ™åå°ç®¡ç†è·¯ç”±ä¸º https://{éƒ¨ç½²å€å€}/gkqoSDBxv43fgL9CP3pV9u/</p>  <img src="/202105/yoz-comment/manage.jpg" class=""></li></ul><h2 id="å¼€å‘"><a href="#å¼€å‘" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h2><ul><li><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><ul><li><p>è¯„è®ºç»„ä»¶éƒ¨åˆ†</p><p>  åº”ç”¨ Typescript å¼€å‘ï¼Œå¼€å‘æ¶æ„åŠæ€è·¯éƒ¨åˆ†ä¸»è¦å€Ÿé‰´ <a href="https://github.com/utterance/utterances">utterance</a> ã€‚é€šè¿‡åœ¨ç½‘ç«™å†…åµŒ iframe å‡å°‘å¯¹ä»£ç é—´çš„å†²çªä¸å®‰å…¨é—®é¢˜ã€‚</p><p>  è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¼šå°†ç›¸å…³é™æ€æ–‡ä»¶ç¼–è¯‘è‡³ templates/web æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶å‰ç«¯çƒ­æ›´æ–°</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm start<br></code></pre></td></tr></table></figure></li><li><p>åå°ç®¡ç†</p><p>  é‡‡ç”¨çº¯å‰ç«¯æ–¹å¼é€šè¿‡  CDN å¼•ç”¨ iviewui+axioså®Œæˆé…ç½®é¡µé¢ï¼Œç®¡ç†é¡µé¢åŠç™»é™†ç•Œé¢</p></li></ul></li><li><h3 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h3><p>  åç«¯è¿ç”¨ gin+gorm å¼€å‘ï¼Œå¼€å‘æ¶æ„ä¸»è¦æ˜¯MVCæ¶æ„ï¼Œå¹¶å°†æ‰€æœ‰é™æ€èµ„æº é€šè¿‡ <a href="https://github.com/elazarl/go-bindata-assetfs/">go-bindata-assetfs</a> æ‰“åŒ…è¿›åº”ç”¨ï¼Œæ–¹ä¾¿éƒ¨ç½²ã€‚</p><p>  å®‰è£… <a href="https://github.com/pilu/fresh">fresh</a> å¼€å¯çƒ­æ›´æ–°</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm run bindata-install <span class="hljs-comment"># å…¨å±€å®‰è£… go-bindata-assetfs å·¥å…·</span><br><br>npm run bindata-debug <span class="hljs-comment"># åœ¨å¼€å‘ä¸­ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼Œé€šè¿‡ gin-bindata æä¾›çš„ debug æ–¹æ³• å¯¹é™æ€èµ„æºé€šè¿‡é“¾æ¥çš„æ–¹æ³•è°ƒç”¨</span><br><br>go get github.com/pilu/fresh <span class="hljs-comment"># çƒ­æ›´æ–°å…¨å±€å·¥å…·å®‰è£…</span><br><br>fresh <span class="hljs-comment"># çƒ­æ›´æ–°è°ƒè¯•å¼€å‘</span><br></code></pre></td></tr></table></figure></li><li><h3 id="æ„å»ºæ‰“åŒ…"><a href="#æ„å»ºæ‰“åŒ…" class="headerlink" title="æ„å»ºæ‰“åŒ…"></a>æ„å»ºæ‰“åŒ…</h3>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm run build <span class="hljs-comment"># æ„å»ºè¯„è®ºç»„ä»¶é™æ€æ–‡ä»¶è‡³templates/web</span><br><br>npm run bindata <span class="hljs-comment"># å°†templates/webä¸‹çš„é™æ€æ–‡ä»¶æ‰“åŒ…è¿›äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ–¹ä¾¿éƒ¨ç½²</span><br><br>go build main.go <span class="hljs-comment"># ç”Ÿæˆåº”ç”¨</span><br></code></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€æºé¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼€æº </tag>
            
            <tag> golang </tag>
            
            <tag> typescript </tag>
            
            <tag> parcel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vuexå®ç°å†å²è®°å½•</title>
      <link href="/202101/vuex-develop-history/"/>
      <url>/202101/vuex-develop-history/</url>
      
        <content type="html"><![CDATA[<img src="/202101/vuex-develop-history/cover.png" class="" width="0" height="0"><p>æœ€è¿‘è‡ªç ”ç€ä¸€ä¸ªå¯è§†åŒ–æ“ä½œå¹³å°ï¼Œå…¶ä¸­æ¶‰åŠåˆ°ç”¨æˆ·æ“ä½œåå¯æ’¤é”€æˆ–é‡åšï¼Œåœ¨ç½‘ä¸Šæœäº†ä¸€äº›è§£å†³æ€è·¯ï¼Œå®Œå–„è‡ªå·±æ‰€è®¾æƒ³çš„è§£å†³æ€è·¯ã€‚</p><h2 id="å†å²è®°å½•éœ€æ±‚çš„è¦ç‚¹"><a href="#å†å²è®°å½•éœ€æ±‚çš„è¦ç‚¹" class="headerlink" title="å†å²è®°å½•éœ€æ±‚çš„è¦ç‚¹"></a>å†å²è®°å½•éœ€æ±‚çš„è¦ç‚¹</h2><ul><li>å¯å­˜å‚¨åœ¨ localStorage ä¸­</li><li>å¯å¤šæ¬¡æ’¤é”€æˆ–å¤šæ¬¡é‡åš</li><li>ç‚¹å‡»åˆ—è¡¨ä¸­çš„ä¸€é¡¹ï¼Œå°†å†å²å€’é€€æˆ–å‰è¿›è‡³æŒ‡å®šä½ç½®</li></ul><p>çœ‹ä¼¼ç®€å•çš„éœ€æ±‚ï¼Œåœ¨åŸºç¡€å»ºè®¾è®¾è®¡ä¸Šçš„é”™è¯¯ï¼Œäº¦ä¼šåœ¨æœªæ¥å¯¼è‡´æ›´å¤šçš„å·¥ä½œé‡ã€‚æ‰€ä»¥ç»“åˆä¸Šé¢ä¸¤ç‚¹çš„è¦æ±‚ï¼Œå‘ç° vuex çš„åŸºæœ¬æ€è·¯éå¸¸é€‚åˆå®Œæˆè¿™ä¸ªéœ€æ±‚ï¼Œredux åŒæ ·ã€‚</p><h2 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h2><blockquote><p>æ­¤é¡¹ç›®ç”¨äº† typescript æ¥åŠ å¼ºä»£ç çš„ä¸¥è°¨æ€§ï¼Œæ–¹ä¾¿æ—¥åç»´æŠ¤ï¼Œå¤§å®¶ç®€å•çœ‹ä¸ªæ€è·¯ã€‚</p></blockquote><h3 id="1-å…ˆå®šä¹‰å†å²è®°å½•çš„æ•°æ®ç»“æ„"><a href="#1-å…ˆå®šä¹‰å†å²è®°å½•çš„æ•°æ®ç»“æ„" class="headerlink" title="1. å…ˆå®šä¹‰å†å²è®°å½•çš„æ•°æ®ç»“æ„"></a>1. å…ˆå®šä¹‰å†å²è®°å½•çš„æ•°æ®ç»“æ„</h3>  <figure class="highlight typescript"><figcaption><span>vue.d.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> HistoryItem &#123;<br>  <span class="hljs-attr">timestrap</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// è®°å½•æ—¶é—´æˆ³</span><br>  name: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// è®°å½•åç§°</span><br>  redo: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// é‡åšMutation</span><br>  undo: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// æ’¤é”€Mutation</span><br>  redoParams: <span class="hljs-built_in">any</span>[]; <span class="hljs-comment">// é‡åšMutationæäº¤å‚æ•°</span><br>  undoParams: <span class="hljs-built_in">any</span>[]; <span class="hljs-comment">// æ’¤é”€Mutationæäº¤å‚æ•°</span><br>&#125;<br><br><span class="hljs-keyword">interface</span> HistoryStatus &#123;<br>  <span class="hljs-attr">historys</span>: HistoryItem[]; <span class="hljs-comment">// è®°å½•historyæ•°ç»„</span><br>  _currentHistory: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹ç´¢å¼•</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-ç¼–å†™-History-çŠ¶æ€æ¨¡å—"><a href="#2-ç¼–å†™-History-çŠ¶æ€æ¨¡å—" class="headerlink" title="2. ç¼–å†™ History çŠ¶æ€æ¨¡å—"></a>2. ç¼–å†™ History çŠ¶æ€æ¨¡å—</h3><p>  ç¼–å†™åŸºç¡€æ“ä½œhistoryçŠ¶æ€çš„vuex <code>module</code>ï¼Œåˆ›å»ºè®°å½•çš„<code>Mutation</code>ï¼Œé‡åšå’Œæ’¤é”€çš„Action</p><blockquote><p>ä¸€æ¡è®°å½•æ˜¯åŒ…å«å¯¹è¿™ä¸ªæ­¥éª¤çš„æ‰§è¡Œ<code>redo</code>æ“ä½œä¸æ’¤é”€<code>undo</code>æ“ä½œçš„ã€‚æ‰€ä»¥åœ¨ç”¨æˆ·ç‚¹å‡»åˆ—è¡¨å…¶ä¸­ä¸€é¡¹æ—¶ï¼Œåº”è¯¥æ˜¯å¾ªç¯å›é€€åˆ°å½“å‰é¡¹çš„å‰ä¸€é¡¹undoï¼Œæˆ–å¾ªç¯redoåˆ°å½“å‰é¡¹<br>æ‰€ä»¥éœ€è¦å¢åŠ ä¸€æ¡ç©ºè®°å½•ï¼Œæ–¹ä¾¿ç”¨æˆ·ç‚¹å‡»ç©ºè®°å½•æ’¤é”€æœ€åˆçš„æ“ä½œã€‚</p><img src="/202101/vuex-develop-history/history_dialog.png" class=""><p>è¿ç”¨äº†<code>vuex-module-decorators</code> è£…é¥°å™¨ï¼Œå†™æ›´æ˜“ç»´æŠ¤çš„ä»£ç </p></blockquote>  <figure class="highlight typescript"><figcaption><span>store/modules/History.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; VuexModule, Module, Mutation, Action &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vuex-module-decorators&quot;</span>;<br><br><span class="hljs-meta">@Module</span>(&#123; <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span> &#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HistoryModule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">VuexModule</span>&lt;<span class="hljs-title">HistoryStatus</span>&gt; <span class="hljs-title">implements</span> <span class="hljs-title">HistoryStatus</span> </span>&#123;<br>  <span class="hljs-comment">/** </span><br><span class="hljs-comment">   * åˆå§‹åŒ–ä¸€ä¸ªç©ºè®°å½•çš„åŸå› ä¸»è¦æ˜¯æ–¹ä¾¿åˆ—è¡¨æ“ä½œæ—¶ï¼š</span><br><span class="hljs-comment">   * å½“ç”¨æˆ·ç‚¹å‡»æœ€æ—©çš„ä¸€æ¡è®°å½•æ—¶ï¼Œå¯ä»¥æ­£å¸¸æ’¤é”€ç”¨æˆ·æ“ä½œçš„ç¬¬ä¸€æ­¥</span><br><span class="hljs-comment">  **/</span><br>  <span class="hljs-keyword">public</span> historys: HistoryItem[] = [<br>    &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">`æ‰“å¼€`</span>,<br>      <span class="hljs-attr">timestrap</span>: <span class="hljs-built_in">Date</span>.now(),<br>      <span class="hljs-attr">redo</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">redoParams</span>: [],<br>      <span class="hljs-attr">undo</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">undoParams</span>: [],<br>    &#125;,<br>  ];<br>  <span class="hljs-keyword">public</span> _currentHistory: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;<br><br>  <span class="hljs-comment">// getter</span><br>  <span class="hljs-keyword">get</span> <span class="hljs-title">current</span>()&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>._currentHistory;<br>  &#125;<br><br>  <span class="hljs-comment">// getter</span><br>  <span class="hljs-keyword">get</span> <span class="hljs-title">historyList</span>(): <span class="hljs-title">HistoryItem</span>[] &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.historys || [];<br>  &#125;<br><br>  <span class="hljs-comment">// åˆ›å»ºå†å²è®°å½•</span><br>  <span class="hljs-meta">@Mutation</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">CREATE_HISTORY</span>(<span class="hljs-params">payload: HistoryItem</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>._currentHistory &lt; <span class="hljs-built_in">this</span>.historys.length - <span class="hljs-number">1</span>) &#123;<br>      <span class="hljs-built_in">this</span>.historys = <span class="hljs-built_in">this</span>.historys.slice(<span class="hljs-number">0</span>, <span class="hljs-built_in">this</span>._currentHistory);<br>    &#125;<br>    <span class="hljs-comment">// ç”±äºjsçš„æ·±æµ…æ‹·è´é—®é¢˜ï¼Œæ‰€ä»¥åœ¨åˆ›å»ºæ—¶éƒ½éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ·±æ‹·è´</span><br>    <span class="hljs-comment">// æƒ³å°è¯•lodashçš„cloneå‡½æ•°ï¼Œä½†å‘ç°å¥½åƒJSON.stringifyçš„æ–¹å¼cloneåº”è¯¥æ›´å¿«çš„ï¼Œæ¯•ç«Ÿæˆ‘ä»¬çš„æ•°æ®ä¸å­˜åœ¨å‡½æ•°</span><br>    <span class="hljs-comment">// æˆ‘è¿™é‡Œå°±å…ˆä¸æ”¹äº†ï¼Œä¸»è¦æ˜¯è¡¨è¾¾å‡ºæ€è·¯å³å¯</span><br>    <span class="hljs-built_in">this</span>.historys.push(_.cloneDeep(payload));<br>    <span class="hljs-built_in">this</span>._currentHistory = <span class="hljs-built_in">this</span>.historys.length - <span class="hljs-number">1</span>;<br>  &#125;<br><br>  <span class="hljs-meta">@Mutation</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">SET_CURRENT_HISTORY</span>(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>._currentHistory = index &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : index;<br>  &#125;<br><br>  <span class="hljs-comment">// é‡åš</span><br>  <span class="hljs-meta">@Action</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">RedoHistory</span>(<span class="hljs-params">times: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span></span>)</span> &#123;<br>    <span class="hljs-keyword">let</span> &#123; state, commit &#125; = <span class="hljs-built_in">this</span>.context;<br>    <span class="hljs-keyword">let</span> historys: HistoryItem[] = state.historys;<br>    <span class="hljs-keyword">let</span> current: <span class="hljs-built_in">number</span> = state._currentHistory;<br>    <span class="hljs-keyword">if</span> (current + times &gt;= historys.length) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">while</span> (times &gt; <span class="hljs-number">0</span>) &#123;<br>      current++;<br>      <span class="hljs-keyword">let</span> history = historys[current];<br>      <span class="hljs-keyword">if</span> (history) &#123;<br>        commit(history.redo, ...history.redoParams, &#123; <span class="hljs-attr">root</span>: <span class="hljs-literal">true</span> &#125;);<br>      &#125;<br>      times--;<br>    &#125;<br>    commit(<span class="hljs-string">&quot;SET_CURRENT_HISTORY&quot;</span>, current);<br>  &#125;<br><br>  <span class="hljs-comment">// æ’¤é”€</span><br>  <span class="hljs-meta">@Action</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">UndoHistory</span>(<span class="hljs-params">times: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span></span>)</span> &#123;<br>    <span class="hljs-keyword">let</span> &#123; state, commit &#125; = <span class="hljs-built_in">this</span>.context;<br>    <span class="hljs-keyword">let</span> historys: HistoryItem[] = state.historys;<br>    <span class="hljs-keyword">let</span> current: <span class="hljs-built_in">number</span> = state._currentHistory;<br>    <span class="hljs-keyword">if</span> (current - times &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">while</span> (times &gt; <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-keyword">let</span> history = historys[current];<br>      <span class="hljs-keyword">if</span> (history) &#123;<br>        commit(history.undo, ...history.undoParams, &#123; <span class="hljs-attr">root</span>: <span class="hljs-literal">true</span> &#125;);<br>      &#125;<br>      times--;<br>      current--;<br>    &#125;<br>    commit(<span class="hljs-string">&quot;SET_CURRENT_HISTORY&quot;</span>, current);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-ç¼–å†™å¯ä»¥æ’¤é”€æˆ–é‡åšçš„åŠŸèƒ½"><a href="#3-ç¼–å†™å¯ä»¥æ’¤é”€æˆ–é‡åšçš„åŠŸèƒ½" class="headerlink" title="3. ç¼–å†™å¯ä»¥æ’¤é”€æˆ–é‡åšçš„åŠŸèƒ½"></a>3. ç¼–å†™å¯ä»¥æ’¤é”€æˆ–é‡åšçš„åŠŸèƒ½</h3><p>  å®Œæˆä¸Šé¢ä¸¤æ­¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™å„ç§æ“ä½œäº†</p><ol><li><p>ç¼–å†™å¯¹æ•°æ®åŸºç¡€æ“ä½œçš„<code>Mutation</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Mutation</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">CREATE_PAGE</span>(<span class="hljs-params">payload: &#123; page: PageItem; index: <span class="hljs-built_in">number</span> &#125;</span>)</span> &#123;<br>  <span class="hljs-built_in">this</span>.pages.splice(payload.index, <span class="hljs-number">0</span>, _.cloneDeep(payload.page));<br>  <span class="hljs-built_in">this</span>._currentPage = <span class="hljs-built_in">this</span>.pages.length - <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-meta">@Mutation</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">REMOVE_PAGE</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>)</span> &#123;<br>  <span class="hljs-keyword">let</span> index = <span class="hljs-built_in">this</span>.pages.findIndex(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.id == id);<br>  index &gt; -<span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">this</span>.pages.splice(index, <span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>._currentPage == index) &#123;<br>    <span class="hljs-built_in">this</span>._currentPage = <span class="hljs-built_in">this</span>.pages.length &gt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : -<span class="hljs-number">1</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å°†åŸºç¡€æ“ä½œæŒ‰è¦æ±‚å°è£…æˆå¸¦ä¿å­˜-&gt;è®°å½•-&gt;æ‰§è¡Œçš„<code>Action</code></p><figure class="highlight typescript"><figcaption><span>store/modules/Page.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŒ…è£…åˆ›å»ºé¡µé¢å‡½æ•°</span><br><span class="hljs-meta">@Action</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">CreatePage</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-string">&quot;page&quot;</span> | <span class="hljs-string">&quot;dialog&quot;</span></span>)</span> &#123;<br>  <span class="hljs-keyword">let</span> &#123; state, commit &#125; = <span class="hljs-built_in">this</span>.context;<br>  <br>  <span class="hljs-comment">// è®°å½•ä¿å­˜å³å°†åˆ›å»ºçš„é¡µé¢</span><br>  <span class="hljs-keyword">let</span> id = _.uniqueId(<span class="hljs-keyword">type</span>) + <span class="hljs-built_in">Date</span>.now();<br>  <span class="hljs-keyword">let</span> pageName = pageType[<span class="hljs-keyword">type</span>];<br>  <span class="hljs-keyword">let</span> page: PageItem = &#123;<br>    id,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;pageName&#125;</span><span class="hljs-subst">$&#123;state.pages.length + <span class="hljs-number">1</span>&#125;</span>`</span>,<br>    <span class="hljs-keyword">type</span>,<br>    <span class="hljs-attr">layers</span>: [],<br>    <span class="hljs-attr">style</span>: &#123; <span class="hljs-attr">width</span>: <span class="hljs-number">720</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">1280</span> &#125;,<br>  &#125;;<br><br>  <span class="hljs-comment">//åˆ›å»ºå†å²è®°å½•</span><br>  <span class="hljs-keyword">let</span> history: HistoryItem = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">`åˆ›å»º<span class="hljs-subst">$&#123;pageName&#125;</span>`</span>,<br>    <span class="hljs-attr">timestrap</span>: <span class="hljs-built_in">Date</span>.now(),<br>    <span class="hljs-attr">redo</span>: <span class="hljs-string">&quot;Page/CREATE_PAGE&quot;</span>,<br>    <span class="hljs-attr">redoParams</span>: [&#123; <span class="hljs-attr">index</span>: state.pages.length - <span class="hljs-number">1</span>, page &#125;],<br>    <span class="hljs-attr">undo</span>: <span class="hljs-string">&quot;Page/REMOVE_PAGE&quot;</span>,<br>    <span class="hljs-attr">undoParams</span>: [id],<br>  &#125;;<br>  <span class="hljs-comment">// ä¿å­˜è®°å½•æ­¤å†å²è®°å½•</span><br>  commit(<span class="hljs-string">&quot;Histroy/CREATE_HISTORY&quot;</span>, history, &#123; <span class="hljs-attr">root</span>: <span class="hljs-literal">true</span> &#125;);<br><br>  commit(history.redo, ...history.redoParams, &#123; <span class="hljs-attr">root</span>: <span class="hljs-literal">true</span> &#125;);<br>&#125;<br></code></pre></td></tr></table></figure></li></ol>  <figure class="highlight typescript"><figcaption><span>store/modules/Page.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Action</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">RemovePage</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>)</span> &#123;<br>  <span class="hljs-comment">// è®°å½•ä¿å­˜ç°åœºçŠ¶æ€</span><br>  <span class="hljs-keyword">let</span> index = <span class="hljs-built_in">this</span>.pages.findIndex(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.id == id);<br>  <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br>  <span class="hljs-keyword">let</span> page: PageItem = <span class="hljs-built_in">this</span>.context.state.pages[index];<br><br>  <span class="hljs-comment">//åˆ›å»ºå†å²è®°å½•</span><br>  <span class="hljs-keyword">let</span> history: HistoryItem = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">`åˆ é™¤ <span class="hljs-subst">$&#123;page.name&#125;</span>`</span>,<br>    <span class="hljs-attr">timestrap</span>: <span class="hljs-built_in">Date</span>.now(),<br>    <span class="hljs-attr">redo</span>: <span class="hljs-string">&quot;Page/REMOVE_PAGE&quot;</span>,<br>    <span class="hljs-attr">redoParams</span>: [id],<br>    <span class="hljs-attr">undo</span>: <span class="hljs-string">&quot;Page/CREATE_PAGE&quot;</span>,<br>    <span class="hljs-attr">undoParams</span>: [&#123; page, index &#125;],<br>  &#125;;<br><br>  <span class="hljs-comment">// ä¿å­˜è®°å½•æ­¤å†å²è®°å½•</span><br>  <span class="hljs-built_in">this</span>.context.commit(<span class="hljs-string">&quot;Histroy/CREATE_HISTORY&quot;</span>, history, &#123; <span class="hljs-attr">root</span>: <span class="hljs-literal">true</span> &#125;);<br>  <span class="hljs-built_in">this</span>.context.commit(history.redo, ...history.redoParams, &#123; <span class="hljs-attr">root</span>: <span class="hljs-literal">true</span> &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p>  ä»¥ä¸Šï¼Œæ’¤é”€ä¸é‡åšçš„åŠŸèƒ½å°±åŸºæœ¬å®Œæˆäº†</p><h3 id="4-ä½¿ç”¨"><a href="#4-ä½¿ç”¨" class="headerlink" title="4. ä½¿ç”¨"></a>4. ä½¿ç”¨</h3><pre><code>1. æˆ‘ä»¬ç°åœ¨åªéœ€è¦åœ¨ä½¿ç”¨æ—¶åˆ›å»ºæˆ–åˆ é™¤é¡µé¢æ—¶ä½¿ç”¨å°è£…çš„`Action`å<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-title">create</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-string">&quot;page&quot;</span> | <span class="hljs-string">&quot;dialog&quot;</span></span>)</span> &#123;<br>  <span class="hljs-built_in">this</span>.$store.dispatch(<span class="hljs-string">&quot;Page/CreatePage&quot;</span>, <span class="hljs-keyword">type</span>);<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-title">remove</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>)</span> &#123;<br>  <span class="hljs-built_in">this</span>.$store.dispatch(<span class="hljs-string">&quot;Page/RemovePage&quot;</span>, id);<br>&#125;<br></code></pre></td></tr></table></figure>2. é…ç½®å…¨å±€çƒ­é”®<figure class="highlight typescript"><figcaption><span>App.vue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript">...<br><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;<br>  <span class="hljs-keyword">let</span> self = <span class="hljs-built_in">this</span>;<br>  hotkeys(<span class="hljs-string">&quot;ctrl+z&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event, handler</span>) </span>&#123;<br>    self.$store.dispatch(<span class="hljs-string">&quot;History/UndoHistory&quot;</span>);<br>  &#125;);<br>  hotkeys(<span class="hljs-string">&quot;ctrl+y&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event, handler</span>) </span>&#123;<br>    self.$store.dispatch(<span class="hljs-string">&quot;History/RedoHistory&quot;</span>);<br>  &#125;);<br>&#125;<br>...<br></code></pre></td></tr></table></figure></code></pre><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2>  <img src="/202101/vuex-develop-history/effect.gif" class="">]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> å‰ç«¯æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> JavaScript </tag>
            
            <tag> Vuex </tag>
            
            <tag> æ€è·¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ‹å‹å®‰åˆ©çš„ä¸€æ¬¾è½»é‡çº§dockerå®¹å™¨å¯è§†åŒ–ç®¡ç†</title>
      <link href="/202101/recommend-portainer/"/>
      <url>/202101/recommend-portainer/</url>
      
        <content type="html"><![CDATA[<img src="/202101/recommend-portainer/cover.png" class="" width="0" height="0"><p>åˆšå¼€å§‹ç©dockeråŠlinuxç©çš„å°‘æˆ‘æ¥è¯´ï¼Œæœ‰å¯è§†åŒ–çš„Dockerç®¡ç†å·¥å…·çœŸçš„ä¸è¦å¤ªé¦™äº†ã€‚</p><img src="/202101/recommend-portainer/portainer.png" class=""><h1 id="å®‰è£…å¹¶è¿è¡Œ-portainer-é•œåƒ"><a href="#å®‰è£…å¹¶è¿è¡Œ-portainer-é•œåƒ" class="headerlink" title="å®‰è£…å¹¶è¿è¡Œ portainer é•œåƒ"></a>å®‰è£…å¹¶è¿è¡Œ portainer é•œåƒ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ‹‰å–portaineré•œåƒ</span><br>docker pull docker pull portainer/portainer-ce<br><span class="hljs-comment"># åˆ›å»º portainer_data docker volumeç›®å½•</span><br>docker volume create portainer_data<br><span class="hljs-comment"># åˆ›å»ºè¿è¡Œportainerå®¹å™¨</span><br>docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce<br><span class="hljs-comment"># -d åå°è¿è¡Œ</span><br><span class="hljs-comment"># -p æ˜ å°„8000ä¸9000çš„ç«¯å£</span><br><span class="hljs-comment"># --name å®¹å™¨åç§°</span><br><span class="hljs-comment"># --restart=always dockeré‡å¯æ—¶è‡ªåŠ¨å¯åŠ¨å®¹å™¨</span><br><span class="hljs-comment"># -v æ˜ å°„æœ¬åœ°docker.sock åŠ æ–°åˆ›å»ºçš„portainer_data volumeç›®å½•</span><br></code></pre></td></tr></table></figure><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>å®‰è£…å®Œæˆåï¼Œé€šè¿‡ <a href="http://ip:9000/">http://ip:9000/</a> å³å¯è®¿é—®ï¼Œè®¾ç½®æœåŠ¡çš„ç”¨æˆ·åå¯†ç å</p><img src="/202101/recommend-portainer/set_user.png" class=""><p>å‰é¢çš„æ˜ å°„ä¸­å·²å°†docker.sockæ˜ å°„äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥é€‰æ‹© <code>Local</code> å <code>connect</code> å°±å¯ä»¥ç›´æ¥ä½¿ç”¨å•¦</p><img src="/202101/recommend-portainer/bind_docker_sock.png" class=""><p>Portaineræä¾›ä¸€äº›å¸¸ç”¨é•œåƒå¿«æ·åˆ›å»ºçš„æœåŠ¡ ï¼Œæ•°æ®æ¥æºäº github ä»“åº“å†…çš„æŸä¸€èµ„æºï¼Œç”±äºå›½å†…è®¿é—®é—®é¢˜ï¼Œå¯¼è‡´è®¿é—®å¤±è´¥ï¼Œæ— æ³•ä½¿ç”¨<br>å¯ç›´æ¥åˆ° Settings è®¾ç½® App Templates çš„ URLï¼š</p><blockquote><p>ç”¨ jsdelivr ä¼š å…è´¹ä¸º Github çš„èµ„æº CDNåŠ é€Ÿ<br><a href="https://cdn.jsdelivr.net/gh/portainer/templates/templates-2.0.json">https://cdn.jsdelivr.net/gh/portainer/templates/templates-2.0.json</a></p></blockquote><h1 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h1><p>æœ‰æ‰‹å°±è¡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶åˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitLab éƒ¨ç½²è¸©å‘è®°</title>
      <link href="/202101/docker-gitlab/"/>
      <url>/202101/docker-gitlab/</url>
      
        <content type="html"><![CDATA[<img src="/202101/docker-gitlab/cover.png" class="" width="0" height="0"><p>è¿™ç¯‡æ–‡ç« ä¸»è¦<del>æ°´</del>åœ¨äºæˆ‘ç›´æ¥å®‰è£…é…ç½®å®Œgitlabåï¼Œé‡åˆ°çš„å‡ ä¸ªè¿·ä¹‹é—®é¢˜ä¸æ‰¾åˆ°çš„è§£å†³æ–¹æ¡ˆã€‚</p><h1 id="ç¯å¢ƒä»‹ç»"><a href="#ç¯å¢ƒä»‹ç»" class="headerlink" title="ç¯å¢ƒä»‹ç»"></a>ç¯å¢ƒä»‹ç»</h1><ul><li><p>æœåŠ¡å™¨ç‰ˆæœ¬ï¼šubuntu server 18.04.3 (Win10 è™šæ‹Ÿæœº)</p></li><li><p>Docker ç‰ˆæœ¬ï¼š19.03.8</p></li><li><p>gitlab ç‰ˆæœ¬ï¼š13.5.4</p></li><li><h1 id="gitlabå°éƒ¨åˆ†è·³è½¬é“¾æ¥urlç«¯å£é”™è¯¯"><a href="#gitlabå°éƒ¨åˆ†è·³è½¬é“¾æ¥urlç«¯å£é”™è¯¯" class="headerlink" title="gitlabå°éƒ¨åˆ†è·³è½¬é“¾æ¥urlç«¯å£é”™è¯¯"></a>gitlabå°éƒ¨åˆ†è·³è½¬é“¾æ¥urlç«¯å£é”™è¯¯</h1><p>  å› éšç§˜éœ€æ±‚ï¼Œæœªåˆ†é…80ç«¯å£ç»™gitlabæœåŠ¡ï¼Œå¯è§†åŒ–é…ç½®çš„è¿‡ç¨‹ä¸­ä¿®æ”¹äº†è®¿é—®urlï¼Œå¯¼è‡´å‡ºç° gitlab å°éƒ¨åˆ†è·³è½¬çš„é“¾æ¥urlç«¯å£é”™è¯¯ã€‚<br>  ç”±äºé—®é¢˜ä¹Ÿæ¯”è¾ƒå°ä¼—ï¼Œç”šè‡³ä¸çŸ¥å¦‚ä½•æœè¿™ä¸ªé—®é¢˜ï¼Œåœ¨ç™¾æ„è«å±•ä¹‹é™…ï¼Œæœäº†ä¸‹æœ€åŸºç¡€çš„éƒ¨ç½²æ•™ç¨‹ï¼Œæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼Œå…¶å®ä¹Ÿæ˜¯ä¸ªå¾ˆåŸºç¡€çš„é…ç½®é—®é¢˜ã€‚</p><blockquote><p>åœ¨æ­¤æ•™ç¨‹ä¸­æ‰¾åˆ°çš„ç­”æ¡ˆï¼š<a href="https://segmentfault.com/a/1190000021229534">é€šè¿‡ Docker å¿«é€Ÿéƒ¨ç½²å…¬å¸å†…éƒ¨ GitLab</a></p></blockquote>  <figure class="highlight bash"><figcaption><span>gitlab.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">external_url <span class="hljs-string">&#x27;http://[ip/hostname]:3300&#x27;</span><br><br><span class="hljs-comment"># nginxé»˜è®¤ä¼šå»external_urlä¸­è·å–ç«¯å£ç”¨ä»¥è®¿é—®ï¼Œä½†æˆ‘ä»¬çª—å£åªæ˜ å°„äº†80ï¼Œæ‰€ä»¥è¿˜éœ€è¦nginxæŒ‡å‘çš„ç«¯å£åˆ°80</span><br>nginx[<span class="hljs-string">&#x27;listen_port&#x27;</span>] = 80<br><span class="hljs-comment"># httpséœ€è¦ä¸‹é¢è¿™å¥</span><br><span class="hljs-comment"># nginx[&#x27;redirect_http_to_https_port&#x27;] = 443</span><br><br><span class="hljs-comment"># é…ç½® 1011 ç«¯å£</span><br>gitlab_rails[<span class="hljs-string">&#x27;gitlab_shell_ssh_port&#x27;</span>] = 1011<br></code></pre></td></tr></table></figure></li><li><p>ä¸çŸ¥æ˜¯ä½•åŸå› ï¼Œæˆ‘çš„gitlabè¿˜æ²¡å¤šå°‘é¡¹ç›®å­˜æ”¾ï¼Œæ¯å¤©å´æŒ‰ 1G ä»¥ä¸Šçš„å¤§å°å ç”¨äº†æˆ‘çš„ç¡¬ç›˜ï¼ŒGITLABæ˜¯æ¶è®¾åœ¨æœ¬åœ°æœºå­ä¸­çš„VMè™šæ‹Ÿæœºçš„ï¼Œæš‚æ—¶æ²¡ç©ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±åªå¥½å…ˆå¯¹è™šæ‹Ÿæœºæ‰©å®¹äº†ã€‚</p><blockquote><p>å‘ç°gitlabåº”è¯¥ä¸‹çš„prometheusæ–‡ä»¶å¤¹å¤§åˆ°çˆ†ç‚¸ï¼Œé€šè¿‡æŸ¥è¯¢prometheusçš„å¿…è¦æ€§åï¼Œæˆ‘å¯¹å…¶ç›´æ¥åœç”¨å¤„ç†äº†ã€‚</p></blockquote>  <figure class="highlight bash"><figcaption><span>gitlab.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åœç”¨prometheus</span><br>prometheus_monitoring[<span class="hljs-string">&#x27;enable&#x27;</span>] = <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure></li></ul><p>æŒ‰ä¸Šè¿°ä¿®æ”¹å®Œæˆå é‡å¯gitlabå°±å¯ä»¥å•¦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker restart gitlab<br></code></pre></td></tr></table></figure><h1 id="æˆ‘çš„gitlabæœ€ç»ˆæ•ˆæœ"><a href="#æˆ‘çš„gitlabæœ€ç»ˆæ•ˆæœ" class="headerlink" title="æˆ‘çš„gitlabæœ€ç»ˆæ•ˆæœ~"></a>æˆ‘çš„gitlabæœ€ç»ˆæ•ˆæœ~</h1><img src="/202101/docker-gitlab/result.png" class="">]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> æœåŠ¡è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>stylus-shortcut åŠ é€Ÿç¼–å†™ CSS</title>
      <link href="/202012/stylus-shortcut/"/>
      <url>/202012/stylus-shortcut/</url>
      
        <content type="html"><![CDATA[<img src="/202012/stylus-shortcut/cover.png" class="" width="0" height="0"><p><a href="https://www.npmjs.com/package/stylus-shortcut"><img src="https://img.shields.io/npm/v/stylus-shortcut"></a> <a href="https://www.npmjs.com/package/stylus-shortcut"><img src="https://img.shields.io/npm/dt/stylus-shortcut"></a></p><p>stylus-shortcut å¯ä»¥åŠ é€Ÿç¼–å†™ CSSï¼Œé€šè¿‡ stylus ä¸­ mixin çš„åŠŸèƒ½ï¼Œå°†æ ·å¼å¸¸ç”¨ç»„åˆåˆå¹¶æ±‡ä»¥ç®€å•ä¸€å¥ï¼Œå‡å°‘ä»£ç çš„ç¼–å†™é‡ï¼›å¹¶é€šè¿‡ stylus å¾ªç¯å°†å¸¸ç”¨ä¸»é¢˜å˜é‡ç”Ÿæˆå¸¸ç”¨çš„æ ·å¼è§„åˆ™ï¼Œå¯å¿«æ·ä½¿ç”¨ã€‚</p><h2 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h2><ul><li><a href="https://kwokronny.gitee.io/stylus-shortcut">Gitee æ–‡æ¡£é“¾æ¥</a></li><li><a href="https://kwokronny.github.io/stylus-shortcut">Github æ–‡æ¡£é“¾æ¥</a></li></ul><h2 id="å¼€å‘æ„å›¾"><a href="#å¼€å‘æ„å›¾" class="headerlink" title="å¼€å‘æ„å›¾"></a>å¼€å‘æ„å›¾</h2><p>ç¼–å†™è¿™ä¸ªé¡¹ç›®æœ€åˆçš„ç›®çš„æ˜¯åœ¨å¼€å‘ä¸€ SaaS å¹³å°æ—¶ï¼Œæˆ‘å·²é‡‡ç”¨ ElementUI çš„åŸºç¡€ä¸Šè¿›è¡Œå¼€å‘ï¼Œå¹¶é€šè¿‡è‡ªå®šä¹‰ä¸»é¢˜è¦†ç›–äº†éƒ¨åˆ†æ ·å¼åŠé¢œè‰²å˜é‡åã€‚å¸¸å¸¸éœ€è¦åœ¨éƒ¨åˆ†å…ƒç´ ä¸Šä¸ºå…ƒç´ å‘½ååä»…ä»…ä¸ºå…¶åŠ ä¸€é¡¹é—´è·å±æ€§æˆ–æ–‡æœ¬é¢œè‰²ç­‰ç®€å•çš„æ ·å¼ã€‚æ¥å›åˆ‡æ¢æ ·å¼æ–‡ä»¶ä¸ DOM æ–‡ä»¶ï¼ŒåŠä¸ºä¸é‡è¦çš„å°å…ƒç´ å‘½åï¼Œå¤šè€Œçƒ¦ï¼›æˆ–è®¸è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Bootstrap å¯ä»¥ä¸€ä¸‹æˆä¸ºå¤§å®¶çƒ­çˆ±çš„åº“å§ã€‚</p><p>æ‰€ä»¥æˆ‘ç®€å•é€šè¿‡ stylus çš„å¾ªç¯æŒ‰è®¾è®¡è§„èŒƒç”Ÿæˆå¸¸ç”¨çš„é—´è·ã€å­—ä½“ã€é¢œè‰²ã€è¾¹æ¡†ã€flexä¸é˜´å½±ç­‰æ ·å¼ï¼ŒçœŸçš„éå¸¸çš„æ–¹ä¾¿ä¸å¿«è½ï¼›äº‹å®è¯æ˜é¢‘ç¹çš„åˆ‡æ¢æ–‡ä»¶æ˜¯å®¹æ˜“å¿˜è®°è‡ªå·±éœ€è¦åšä»€ä¹ˆçš„ã€‚<br>å†ä¹‹åï¼Œä¸ºä¸€äº›å¤æ‚çš„è®¾è®¡ç¼–å†™æ ·å¼æ—¶ï¼Œå¸¸å¸¸åœ¨å†™å®Œ width æ—¶åŸºæœ¬ä¸‹ä¸€å¥å¯èƒ½å°±æ˜¯ heightï¼Œå—’å—’å—’ä¸‹æ¥ï¼Œå†™äº†è®¸å¤šè¡Œï¼Œä½†å¸¸å¸¸è¿™äº›ä¼´éšç€è§„å¾‹ï¼Œå®šä½æ—¶ä¼šå†™ left,topã€å®½é«˜å†™å®Œæ—¶å¯èƒ½è¿˜ä¼šå†è®¾ç½®ä¸ªåœ†è§’ç­‰ï¼Œå†™äº†å‡ å¹´å‰ç«¯åæ—©å·²åŒçƒ¦äº†é•¿é•¿çš„æ ·å¼è§„åˆ™ã€‚<br>æ‰€ä»¥æˆ‘é€šè¿‡ stylus çš„ mixin åŠŸèƒ½ï¼Œå°†ç¼–å†™ CSS æ—¶å¸¸ç”¨çš„è§„å¾‹æ±‡æˆä¸€å¥ï¼Œå°å°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥æå‡å¤§å¤§çš„æ•ˆç‡ã€‚<br>ç¼–å†™æ–‡æ¡£æ—¶ï¼Œä¹Ÿå¸¸é—®è‡ªå·±é¡¹ç›®å¦‚æ­¤çš„å°ï¼Œæ˜¯å¦éœ€è¦å˜æˆä¸€ä¸ªåº“å‘¢ï¼Ÿæˆ‘æ‰¾åˆ°äº†ç­”æ¡ˆï¼Œå°è€Œç®€å°±æ˜¯è¿™ä¸ªé¡¹ç›®çš„åˆå¿ƒï¼Œä»–è§£å†³çš„æ˜¯å¼€å‘ä¸­å¸¸å¸¸å¿½è§†çš„å°çƒ¦æ¼ï¼Œæ•´ç†å‡ºè§„å¾‹å¢åŠ ç¼–å†™æ•ˆç‡ä¹Ÿæ˜¯è¿™ä¸ªå°é¡¹ç›®æœ€é‡è¦çš„æ ¸å¿ƒ<br>å¦‚æœä½ ä¹ŸåŒæˆ‘ä¸€æ ·å­˜åœ¨è¿™äº›åŒçƒ¦ï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªåº“å“Ÿ~</p><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul><li>å‡å°‘é‡å¤æ€§ç¼–å†™æ ·å¼</li><li>å¿«é€Ÿå°†è®¾è®¡è§„èŒƒè½¬åŒ–æˆæ ·å¼åº“</li><li>éµå¾ª BEM å‘½åè§„åˆ™</li><li>å°è€Œç¾ï¼Œåªè§£å†³å¸¸è§ä½†å°çš„éº»çƒ¦</li></ul><h2 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;your-custom-variable-file.styl&quot;</span> <span class="hljs-comment">//å¼•å…¥è‡ªå®šä¹‰å˜é‡</span><br><span class="hljs-comment">// åŒæ—¶å¼•å…¥ shortcut.styl mixin.styl</span><br><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;stylus-shortcut&quot;</span><br><span class="hljs-comment">// or å•ç‹¬å¼•å…¥ shortcut.styl</span><br><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;stylus-shortcut/src/shortcut.styl</span><br><span class="hljs-string">// or å•ç‹¬å¼•å…¥ mixin.styl</span><br><span class="hljs-string">@import &quot;</span>stylus-shortcut/<span class="hljs-attribute">src</span>/mixin.styl<br></code></pre></td></tr></table></figure><blockquote><p>å˜é‡ä¸mixinéœ€è¦åœ¨å¤šæ–‡ä»¶ä¸‹è‡ªåŠ¨å¼•ç”¨å¯é€šè¿‡stylus-loader<br>å¦‚ vue-cli@3 é…ç½®ç¤ºä¾‹ï¼Œåœ¨ stylus-loader ä¸­é…ç½® import å…¨å±€å¼•å…¥</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//vue.config.js</span><br>modules.export=&#123;<br>  ...<br>  <span class="hljs-attr">css</span>: &#123;<br>    <span class="hljs-comment">// é…ç½®cssæ¨¡å—</span><br>    <span class="hljs-attr">loaderOptions</span>: &#123;<br>      <span class="hljs-comment">// å‘é¢„å¤„ç†å™¨ Loader ä¼ é€’é…ç½®é€‰é¡¹</span><br>      <span class="hljs-attr">stylus</span>: &#123;<br>        <span class="hljs-attr">import</span>: [<br>          <span class="hljs-string">&quot;your-custom-variable-file.styl&quot;</span>,<br>          <span class="hljs-string">&quot;stylus-shortcut/src/mixin.styl&quot;</span><br>        ]<br>      &#125;<br>    &#125;<br>  &#125;<br>  ...<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs variable.styl">yoz_color = &#123;<br>  primary: #1890ff,<br>  link: #1890ff,<br>  success: #52c41a,<br>  warning: #faad14,<br>  error: #f5222d<br>&#125;;<br>yoz_spacing ?= &#123;<br>  &#x27;5&#x27;: 5px,<br>  &#x27;10&#x27;: 10px,<br>  &#x27;20&#x27;: 20px,<br>  &#x27;30&#x27;: 30px<br>&#125;;<br>...<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex-h&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-c_primary&quot;</span>&gt;</span>æ–‡æœ¬é¢œè‰²primary<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-comment">&lt;!--æ–‡æœ¬é¢œè‰²ä¸ºå˜é‡å€¼primary--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box bg-c_primary spac-ml_20&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-comment">&lt;!--èƒŒæ™¯é¢œè‰²ä¸ºprimary--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box bg-c_primary spac-mh_20&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-comment">&lt;!--æ°´å¹³å¤–é—´è·--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box bg-c_primary spac-p_20&quot;</span>&gt;</span>å†…é—´è·<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-comment">&lt;!--å››è¾¹å†…é—´è·--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¼€æºé¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼€æº </tag>
            
            <tag> stylus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰åˆ©ä¸€æ¬¾å…è´¹å¥½ç”¨çš„å¼€æºå¯†ç ç®¡ç†è½¯ä»¶ - KeePassXC</title>
      <link href="/202011/recommend-keepass/"/>
      <url>/202011/recommend-keepass/</url>
      
        <content type="html"><![CDATA[<img src="/202011/recommend-keepass/cover.png" class="" width="0" height="0"><h2 id="ç”¨è¿‡çš„å¯†ç ç®¡ç†è½¯ä»¶"><a href="#ç”¨è¿‡çš„å¯†ç ç®¡ç†è½¯ä»¶" class="headerlink" title="ç”¨è¿‡çš„å¯†ç ç®¡ç†è½¯ä»¶"></a>ç”¨è¿‡çš„å¯†ç ç®¡ç†è½¯ä»¶</h2><p>æ¨èå‰å…ˆä»‹ç»è‡ªå·±åœ¨å¯†ç ç®¡ç†ä¸Šç»å†è¿‡çš„å†ç¨‹ï¼Œæ— å…´è¶£å¯ç›´æ¥è·³è¿‡è¿™ä¸€æ®µ</p><ol><li><h3 id="çº§åˆ«å¯†ç åˆ¶"><a href="#çº§åˆ«å¯†ç åˆ¶" class="headerlink" title="çº§åˆ«å¯†ç åˆ¶"></a>çº§åˆ«å¯†ç åˆ¶</h3><p>ç»Ÿä¸€ä¸‰ä¸ªçº§åˆ«çš„å¯†ç ï¼Œåˆ†ä¸ºï¼šæ— éšç§é£é™©ï¼Œè½»éšç§é£é™©ï¼Œé‡åº¦éšç§é£é™©çš„å¯†ç ï¼Œå¯†ç å¤æ‚åº¦æŒ‰çº§åˆ«å‡é«˜ã€‚æ–¹ä¾¿ï¼Œåªç”¨è®°ä¸‰ä¸ªå¯†ç å³å¯å°½å¯èƒ½çš„ä¿æŠ¤è‡ªå·±çš„éšç§å’Œæ–¹ä¾¿è‡ªå·±çš„è®°å¿†ã€‚</p></li><li><h3 id="lastpass"><a href="#lastpass" class="headerlink" title="lastpass"></a>lastpass</h3><p><code>è¶…èƒ½å°ç´«</code>æœ€æ—©æ¨èæˆ‘ç”¨çš„å¯†ç ç®¡ç†çš„ CHORME æ‰©å±•ï¼Œåæ¥ä¹Ÿå› ä¸ºæ›å‡ºè¿‡ç›¸å…³çš„å¯†ç æ³„æ¼æ–°é—»ï¼Œæ‰€ä»¥å°±è¯•ç€æ‰¾ä¸ªå®‰å…¨äº›çš„ã€‚</p></li><li><h3 id="1Password"><a href="#1Password" class="headerlink" title="1Password"></a>1Password</h3><p>åŒæ ·æ˜¯<code>è¶…èƒ½å°ç´«</code>ç»™æˆ‘å®‰åˆ©çš„ï¼Œåˆšå¥½è¯•ç€å…è´¹è¯•ç”¨ 1 å¹´ï¼Œè¯•ç”¨äº†å‡ ä¸ªæœˆï¼Œä¸ªäººåœ¨ä½¿ç”¨ä¸Šæ„Ÿè§‰åœ¨äº¤äº’è¿˜æ˜¯ä¸å¤ªå–œçˆ±ï¼Œå„å¹³å°çš„æ“ä½œç›¸å¯¹ä¸ç»Ÿä¸€ï¼Œå¯†ç ç”Ÿæˆã€åˆ é™¤ï¼Œä¿®æ”¹ç­‰æ“ä½œä¸Šæœ‰äº›éº»çƒ¦ï¼Œç‰¹åˆ«æ˜¯æˆ‘åœ¨æ–°å¹³å°æ³¨å†Œæ´»ç™»é™†æ—¶ä¸ä¼šè‡ªåŠ¨æ”¶é›†æˆ‘çš„ä¿¡æ¯è¯¢é—®æˆ‘æ˜¯å¦å­˜å‚¨ï¼Œä¸çŸ¥æ˜¯ä¸æ˜¯æˆ‘æ²¡é…ç½®å¥½ï¼›è¿™æ ·æƒ³æƒ³è®¢é˜…è´¹ç”¨è¿˜æ˜¯è®©æˆ‘ç¨ç¨å¿ƒç—›çš„ã€‚</p></li></ol><h2 id="æ­£å¼å®‰åˆ©-KeePass"><a href="#æ­£å¼å®‰åˆ©-KeePass" class="headerlink" title="æ­£å¼å®‰åˆ© - KeePass"></a>æ­£å¼å®‰åˆ© - KeePass</h2><p>KeePass èµ·åˆçœŸåªæ˜¯æŠ±ç€è¯•è¯•çš„å¿ƒæ€ï¼Œæ¯•ç«Ÿå¤§æ¦‚å¦‚æœæœ‰äº†è§£çš„è¯ï¼ŒKeePass çš„ç›¸å…³å®˜ç½‘åŒ…æ‹¬ç½‘ä¸Šè®¸å¤šçš„ä½¿ç”¨æ–‡æ¡£ä¸­çš„è½¯ä»¶æˆªå›¾ï¼Œç•Œé¢é£æ ¼è·Ÿ 2000 å¹´åŸºæœ¬æ— å¼‚äº†ï¼›æˆ‘ä¸»è¦ç”µè„‘æ˜¯ MacBook çš„ï¼Œä¸€å¼€å§‹è¿˜çœŸæ²¡æ‰“ç®—ç”¨è¿™å¥—å…¨å¹³å°è§£å†³æ–¹æ¡ˆï¼Œæƒ³ç€å†æ‰¾æ‰¾ï¼Œä½†çªç„¶è®¤çœŸçœ‹äº†ä¸‹ç½‘ç«™ï¼Œå‘ç°å¼€æºçš„é¡¹ç›®ï¼Œéƒ½æœ‰ç€ä¼Ÿå¤§çš„å¼€æºç²¾ç¥çš„ç¨‹åºå‘˜åœˆå­ï¼Œä¸€ä¸ªå¹³å°å‡ºç°äº†ä¸‰å››ç§åŸºäº keepass çš„ç¬¬ä¸‰æ–¹ç‰ˆæœ¬åŠå„ç§åŸç”Ÿæ’ä»¶ã€‚</p><img src="/202011/recommend-keepass/main_big.png" class=""><p>å®˜æ–¹ç‰ˆæœ¬ KeePass</p><ol><li><h3 id="å¼€å§‹ä½¿ç”¨"><a href="#å¼€å§‹ä½¿ç”¨" class="headerlink" title="å¼€å§‹ä½¿ç”¨"></a>å¼€å§‹ä½¿ç”¨</h3>å¼€å§‹è¯•ç€æŠŠä»¥å‰çš„å¯†ç æ•°æ®å¯¼å‡ºåï¼Œå¼€å§‹è¯•ç€è½¬ç§»å¯†ç åˆ°è¿™ä¸ªæ–°çš„è§£å†³æ–¹æ¡ˆçš„è½½ä½“æ—¶ï¼Œå®˜æ–¹æä¾›çš„å„å¹³å°ç‰ˆæœ¬ï¼Œå…¶å®åœ¨äº¤äº’ä¸ŠåŠå®ç”¨æ€§ä¸Šéƒ½ç¡®è®¤ä¸åŠ<code>1Password</code>æ‰€å¸¦å‡ºçš„åŸºæœ¬åŠŸèƒ½ï¼Œå„å¹³å°é—´äº¤äº’å·®å¼‚å¤§ï¼Œä¸”ç›´æ¥æ— æµè§ˆå™¨æ‰©å±•çš„æ”¯æŒï¼Œæœ‰çš„ä¹Ÿåªæ˜¯å·²ä»è°·æ­Œå®˜æ–¹åº”ç”¨æ‰©å±•å•†åº—ä¸‹æ¶åï¼Œåšä¸»é—´ä¼ å‡ºçš„ç¦»çº¿ç‰ˆæœ¬äº†ï¼›æ‰€ä»¥è¿˜çœŸæœ‰ç‚¹æƒ³æ”¾å¼ƒï¼Œè€å®äº¤é’±ç”¨å›<code>1Password</code>äº†ã€‚</li></ol><blockquote><p>å°±åœ¨æˆ‘å‡†å¤‡æ”¾å¼ƒå‰ï¼Œå¤šæœç´¢äº†ä¸€æ¬¡ã€‚æˆ‘æ‹¥æŠ±äº†å¼€æº<del>ç©·é€¼ä¸é…1password</del></p></blockquote><ol start="2"><li><h3 id="å‘ç°å®è—"><a href="#å‘ç°å®è—" class="headerlink" title="å‘ç°å®è—"></a>å‘ç°å®è—</h3>åœ¨ä¸€æ¬¡æ— æ„çš„æœç´¢ä¸­ï¼Œæˆ‘å‘ç°äº†è¿™æ¬¾åŸºäº<code>KeePass</code>å¼€å‘çš„ç¬¬ä¸‰æ–¹å…¨å¹³å°æ”¯æŒçš„è½¯ä»¶ç‰ˆæœ¬<a target="_blank" href="https://keepassxc.org/"><center><img src="/202011/recommend-keepass/keepassxc-logo.svg" class="" width="100"></center><center style="color:#30782f">KeePassXC</center></a></li></ol><p>ä¸€èµ·å…ˆçœ‹çœ‹çš„æˆªå›¾</p><img src="/202011/recommend-keepass/welcome_screen.png" class=""><img src="/202011/recommend-keepass/database_view.png" class=""><h2 id="ä½¿ç”¨æ•™ç¨‹"><a href="#ä½¿ç”¨æ•™ç¨‹" class="headerlink" title="ä½¿ç”¨æ•™ç¨‹"></a>ä½¿ç”¨æ•™ç¨‹</h2><ol><li><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å†æ”¾ç½®ä¸ª<a href="https://keepassxc.org/"><strong>ä¼ é€é—¨</strong></a><br>æ ¹æ®è‡ªå·±çš„ç³»ç»Ÿä¸‹è½½åŒ¹é…çš„<code>KeePassXC</code>è½¯ä»¶,</p><img src="/202011/recommend-keepass/download_page.png" class=""><p>ä¸‹è½½åæŒ‰ç³»ç»Ÿå¸¸ç”¨æ–¹å¼å®‰è£…è½¯ä»¶å³å¯ã€‚</p></li><li><h3 id="ç”Ÿæˆå¯†ç åº“æ–‡ä»¶"><a href="#ç”Ÿæˆå¯†ç åº“æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆå¯†ç åº“æ–‡ä»¶"></a>ç”Ÿæˆå¯†ç åº“æ–‡ä»¶</h3><blockquote><p>å·²ç”¨ KeePass æˆ–å…¶ä»–ç¬¬ä¸‰æ–¹åŸºäº KeePass çš„è½¯ä»¶ç”Ÿæˆçš„å¯†ç æ–‡ä»¶ï¼Œå¯è·³è¿‡æ­¤æ­¥éª¤ï¼Œç›´æ¥æ‰“å¼€é£Ÿç”¨<br>å®‰è£…å®Œæˆåå¹¶æ‰“å¼€åï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆè½¯ä»¶è¯­è¨€å¤šç§ï¼Œé»˜è®¤è·Ÿéšç³»ç»Ÿè¯­è¨€ï¼‰</p></blockquote><ol><li><p>ç‚¹å‡» <code>æ–°å»ºæ•°æ®åº“/Create new database</code> å¼¹å‡ºæ–°å»ºçª—å£</p><img src="/202011/recommend-keepass/welcome_screen.png" class=""></li><li><p>å¡«å†™æ•°æ®åº“åç§°ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p><img src="/202011/recommend-keepass/create_lib.png" class=""></li><li><p>åŠ å¯†è®¾ç½®ï¼Œæ­¤æ­¥éª¤å¯ç›´æ¥ä¸‹ä¸€æ­¥ï¼Œäº¦å¯è¯¦ç»†äº†è§£ä¸‹ï¼Œæ¯•ç«Ÿæˆ‘çš„éšç§ä¸æ¶‰åŠ PY äº¤æ˜“ï¼Œæ‰€ä»¥åŠ å¯†å¤æ‚åº¦æ­£å¸¸å°±å¥½ã€‚ï¼ˆåé¢æƒ³æ”¹ä¹Ÿå¯ä»¥æ”¹ï¼‰</p><img src="/202011/recommend-keepass/setting_encrypt.png" class=""></li><li><p>å¯†ç è®¾ç½®ï¼Œè¾“å…¥ä½ çš„ä¸»å¯†ç ï¼ŒåŠå†æ¬¡è¾“å…¥åï¼Œç¡®è®¤å¹¶ä¿å­˜åˆ°å­˜å‚¨çš„ä½ç½®å°±å®Œæˆå•¦ã€‚ &gt; æ•°æ®åº“çš„é’¥åŒ™ï¼Œå”¯ä¸€è¦è®°ä½çš„å¯†ç ï¼Œæ¯æ¬¡æ•°æ®åº“å› é™å®šæ—¶é—´æœªä½¿ç”¨æ—¶æˆ–é”å±ç¦»å¼€åé”å®šæ—¶ï¼Œéƒ½éœ€è¦è¾“å…¥è¿™ä¸ªå¯†ç è§£é”ä½¿ç”¨å­˜å‚¨çš„å¯†ç ã€‚ï¼ˆä¸»å¯†ç æœ€å¥½å®šæœŸæ›´æ¢ï¼‰ï¼Œæœ‰æ¡ä»¶çš„äº¦å¯å¢åŠ ç¡¬ä»¶è®¾å¤‡ä½¿ç”¨ï¼Œå¢å¼ºå®‰å…¨æ€§ã€‚</p><img src="/202011/recommend-keepass/setting_main_password.png" class=""></li><li><p><strong>æœ€åä¸€ä¸ªå¤§é—®é¢˜</strong>ï¼šå¯†ç çš„å­˜æ”¾</p></li></ol><p>å› éœ€è¦å¤šå¹³å°ä½¿ç”¨ï¼Œå¯†ç åº“çš„åŒæ­¥å°¤ä¸ºé‡è¦ï¼›éœ€è¦å€ŸåŠ©äº‘ç›˜å®Œæˆã€‚ï¼ˆå½“ç„¶ï¼Œäº¦å¯ä»¥è‡ªæ¶æœåŠ¡å­˜å‚¨å¹¶ä½¿ç”¨ï¼‰</p><p>æ¨èäº‘ç›˜ï¼š<code>oneDriver</code></p><p>é‚£åŒæ­¥çš„ä½ç½®å¥½äº†åï¼Œæ¥ä¸‹æ¥å°±åªç”¨æŠŠç”Ÿæˆå¥½çš„æ•°æ®åº“æ–‡ä»¶æ”¾åˆ°äº‘ç›˜å°± OK å•¦ã€‚</p><img src="/202011/recommend-keepass/icloud.png" class=""></li><li><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><ol><li>æŸ¥çœ‹è®¾ç½®é¡¹ï¼Œè®¾ç½®é¡¹å¯æ ¹æ®è‡ªå·±çš„ä¹ æƒ¯é…ç½®ï¼Œæˆ‘å°±ä¸ä¸€ä¸€è¯´æ˜äº†ã€‚</li></ol><blockquote><p>å…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ å¸¸è§„-&gt;åŸºç¡€è®¾ç½®-&gt;ç”¨æˆ·ç•Œé¢ è®°å¾—å‹¾é€‰<code>æœ€å°åŒ–è€Œä¸æ˜¯é€€å‡ºåº”ç”¨ç¨‹åº</code>ï¼Œä¿æŒç¨‹åºå¯åŠ¨ã€‚</p></blockquote><img src="/202011/recommend-keepass/base_setting.png" class=""><ol start="2"><li>ä¸‹è½½æµè§ˆå™¨æ‰©å±•å¹¶é…ç½®è¿æ¥æ•°æ®åº“</li></ol><img src="/202011/recommend-keepass/setting_browser.png" class=""><p>å¦‚ä¸Šå›¾æŒ‰éœ€é…ç½®ï¼Œå¹¶æŒ‰æ‰€ç”¨çš„æµè§ˆå™¨ä¸‹è½½å¯¹åº”çš„æ‰©å±•ã€‚è¿›å…¥æµè§ˆå™¨æ‰©å±•è¿›è¡Œé…ç½®ç»‘å®šå³å¯</p><img src="/202011/recommend-keepass/bind_browser.jpg" class=""><ol start="3"><li>å½“æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ç™»é™†æ—¶ï¼ŒKeePassXC ä¼šé€šè¿‡åŒ¹é…é“¾æ¥åè¯¢é—®æ˜¯å¦æˆæƒä¿¡æ¯ï¼Œç¡®è®¤åï¼Œå½“åªæœ‰ä¸€ä¸ªå¯†ç æ—¶å°±ä¼šç›´æ¥è‡ªåŠ¨è¾“å…¥åˆ°è¾“å…¥æ¡†äº†ï¼Œè¯¥å¹³å°æœ‰å¤šä¸ªè´¦å·æ—¶äº¦å¯ç‚¹å‡»è¾“å…¥æ¡†ååˆ‡æ¢ã€‚</li></ol><img src="/202011/recommend-keepass/browser_request.png" class=""><img src="/202011/recommend-keepass/browser_input.png" class=""><p>è¿˜æœ‰æ›´å¤šçš„ç»†èŠ‚ç­‰å¾…ä½ çš„æ‘¸ç´¢å•¦~</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶åˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¯ä»¶åˆ†äº« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sprite-free-cli é›ªç¢§å›¾å‘½ä»¤è¡Œå·¥å…·</title>
      <link href="/202011/sprites-cli-develop/"/>
      <url>/202011/sprites-cli-develop/</url>
      
        <content type="html"><![CDATA[<img src="/202011/sprites-cli-develop/cover.png" class="" width="0" height="0"><h2 id="å°å›¾çš„çƒ¦æ¼"><a href="#å°å›¾çš„çƒ¦æ¼" class="headerlink" title="å°å›¾çš„çƒ¦æ¼"></a>å°å›¾çš„çƒ¦æ¼</h2><p>é¡¹ç›®ä¸­ç»å¸¸æœ‰ä¸å¯é¿å…çš„å‡ºç°å°å›¾æ ‡ï¼Œé›ªç¢§å›¾ä¾ç„¶æ˜¯å¾ˆå¤šå›¢é˜Ÿçš„é€‰æ‹©ï¼Œç½‘ä¸Šä¹Ÿæœ‰äº†å„ç§å„æ ·çš„é›ªç¢§å›¾æ’ä»¶æˆ–æ–¹æ¡ˆç­‰ã€‚ä½†å¤§å¤šæ•°ä»…ä»…å®ç°äº†ç®€æ˜“çš„æ‹¼å›¾åŠè§„åˆ™ç”Ÿæˆï¼Œæˆ‘åœ¨é¡¹ç›®ä¸­å¸¸å¸¸é‡åˆ°ä¸¤ä¸ªå°å›¾éœ€è¦åœ¨ç”¨æˆ·äº¤äº’æ—¶åˆ‡æ¢ç­‰ç”šè‡³æ›´ä¸ºå¤æ‚çš„éœ€æ±‚ï¼›ç»ˆäºåœ¨ç™¾å¿™<del>æ‡’ç™Œç»ç—‡</del>ä¹‹ä¸­æäº†ä¸€ä¸ªç”Ÿæˆé›ªç¢§å›¾çš„å‘½ä»¤è¡Œå°å·¥å…·ï¼Œæœ›å¤§å®¶å‚è€ƒæŒ‡æ•™ã€‚</p><h2 id="sprite-free-cli"><a href="#sprite-free-cli" class="headerlink" title="sprite-free-cli"></a>sprite-free-cli</h2><p><a href="https://www.npmjs.com/package/sprite-free-cli"><img src="https://img.shields.io/npm/v/sprite-free-cli"></a></p><p>é›ªç¢§å›¾ç”Ÿæˆçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯¹èŒƒå›´ç›®å½•ä¸‹çš„ç‰¹å®šæ–‡ä»¶å¤¹æ‰¹é‡åˆæˆé›ªç¢§å›¾ï¼Œä»…éœ€æä¾› js å¤„ç†æ ·å¼è§„åˆ™ç”Ÿæˆï¼Œæ— éœ€å­¦ä¹ æ–°çš„æ¨¡æ¿è¯­è¨€ï¼Œé«˜åº¦è‡ªç”±åŒ–çš„ JS é€»è¾‘æ§åˆ¶ç”Ÿæˆï¼›é»˜è®¤æä¾› 4 ç§é¢„å¤„ç†è¯­è¨€çš„ç”Ÿæˆæ¨¡æ¿ã€‚</p><h2 id="å¿«é€Ÿä¸Šæ‰‹"><a href="#å¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="å¿«é€Ÿä¸Šæ‰‹"></a>å¿«é€Ÿä¸Šæ‰‹</h2><ul><li><h3 id="å…¨å±€å®‰è£…"><a href="#å…¨å±€å®‰è£…" class="headerlink" title="å…¨å±€å®‰è£…"></a>å…¨å±€å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install sprite-free-cli -g<br></code></pre></td></tr></table></figure></li><li><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">sprite-free [options]<br><br>é€šè¿‡å‘½ä»¤å¯¹æŒ‡å®šç›®å½•èŒƒå›´å†…çš„æ‰€æœ‰ä»¥ -sprite ç»“å°¾çš„é›ªç¢§å›¾æ–‡ä»¶å¤¹ï¼Œç”Ÿæˆ é›ªç¢§å›¾å’Œæ ·å¼ åˆ°ç”Ÿæˆç›®å½•ï¼Œå¹¶ç”Ÿæˆé›ªç¢§å›¾çš„å¯¹åº”æ ·å¼æ–‡ä»¶ã€‚æ”¯æŒä¸åŒæ–‡ä»¶å¤¹è‡ªå®šä¹‰ç”Ÿæˆè§„åˆ™<br><br>Options:<br>  -s, --scope [dir]  [å¿…å¡«]ç›®å½•èŒƒå›´ï¼Œç›®å½•èŒƒå›´å†…æ‰€æœ‰ç»“å°¾ -sprite ç»“æŸçš„é›ªç¢§å›¾æ–‡ä»¶å¤¹<br>  -r, --rule [css|less|scss|stylus]   ç”Ÿæˆæ ·å¼è§„åˆ™ç‰ˆæœ¬: css less scss stylusï¼Œé»˜è®¤ cssã€‚é›ªç¢§å›¾æ–‡ä»¶å¤¹å†…æœ‰ç‰¹æ®Šç”Ÿæˆè§„åˆ™è„šæœ¬ template.js ä¼˜å…ˆä½¿ç”¨ç‰¹æ®Šç”Ÿæˆè§„åˆ™<br>  -d, --dist [dir]   ç”Ÿæˆç›®å½•ï¼Œé»˜è®¤ <span class="hljs-string">&quot;./&quot;</span>ï¼›ç›®å½•èŒƒå›´scope çš„ç›¸å¯¹è·¯å¾„<br></code></pre></td></tr></table></figure></li><li><h3 id="åŸºç¡€ä½¿ç”¨ç¤ºä¾‹"><a href="#åŸºç¡€ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="åŸºç¡€ä½¿ç”¨ç¤ºä¾‹"></a>åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h3><p>  <code>demo</code>ç›®å½•ä¸‹<code>demo-sprite</code>å­˜å‚¨äº†ç­‰å¾…åˆæˆçš„é›ªç¢§å›¾åŸæ–™ã€‚å¸Œæœ›ç”Ÿæˆstylusçš„CSSè§„åˆ™æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sprite-free -s demo -r stylus<br></code></pre></td></tr></table></figure><p>é€šè¿‡å‘½ä»¤å³å¯åœ¨demoç›®å½•ä¸‹ç”Ÿæˆ demo-sprite.styl ä¸ demo-sprite.pngæ–‡ä»¶ã€‚</p></li><li><h3 id="è‡ªå®šä¹‰æ ·å¼ç”Ÿæˆç¤ºä¾‹"><a href="#è‡ªå®šä¹‰æ ·å¼ç”Ÿæˆç¤ºä¾‹" class="headerlink" title="è‡ªå®šä¹‰æ ·å¼ç”Ÿæˆç¤ºä¾‹"></a>è‡ªå®šä¹‰æ ·å¼ç”Ÿæˆç¤ºä¾‹</h3><p>  éƒ¨åˆ†é›ªç¢§å›¾åœ¨ä½¿ç”¨æ—¶å¸Œæœ›æ”¯æŒä¸€å®šçš„äº¤äº’æ•ˆæœï¼Œå¦‚ï¼šæŸå›¾æ ‡åœ¨ç§»è¿‡å»æ—¶å˜æ¢æˆå¦ä¸€ä¸ªå›¾æ ‡æ—¶ï¼›å³å¯é€šè¿‡è‡ªå®šä¹‰æ ·å¼ç”Ÿæˆçš„æ–¹æ¡ˆï¼Œå†è‡ªå®šä¹‰ç”Ÿæˆç¬¦åˆéœ€æ±‚çš„CSSè§„åˆ™ã€‚</p><p>  ä»…éœ€å°†åœ¨ ç›¸åº”çš„é›ªç¢§å›¾æ–‡ä»¶å¤¹å†… å¦‚ï¼š<code>[name]-sprite</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»º<code>template.js</code>æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><blockquote><p>å½“é›ªç¢§å›¾æ–‡ä»¶å¤¹ä¸‹å­˜åœ¨<code>template.js</code>æ—¶ï¼Œè¯¥é›ªç¢§å›¾æ–‡ä»¶å¤¹çš„CSSè§„åˆ™ç”Ÿæˆä»…ä»¥æ­¤ä¸ºå”¯ä¸€çš„ç”Ÿæˆè§„åˆ™</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">spritesheet</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> spritesCSS = <span class="hljs-string">``</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(spritesheet.sprites)) &#123;<br>    spritesCSS = spritesheet.sprites<br>      .map(<span class="hljs-function">(<span class="hljs-params">sprite</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">let</span> name = <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^van-/</span>.test(sprite.name)) &#123;<br>          name = <span class="hljs-string">`.<span class="hljs-subst">$&#123;sprite.name&#125;</span>`</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          name = <span class="hljs-string">`.&#123;$spriteName&#125;-<span class="hljs-subst">$&#123;sprite.name&#125;</span>`</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^tab-([\w]+)_a$/</span>.test(sprite.name)) &#123;<br>          name = <span class="hljs-string">&quot;.van-tabbar-item--active &quot;</span> + name.replace(<span class="hljs-string">&quot;_a&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/_a$/</span>.test(sprite.name)) &#123;<br>          name = name.replace(<span class="hljs-string">&quot;_a&quot;</span>, <span class="hljs-string">&quot;.active&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">`</span><br><span class="hljs-string">          <span class="hljs-subst">$&#123;name&#125;</span> &#123;</span><br><span class="hljs-string">            <span class="hljs-subst">$&#123;sprite.name.indexOf(<span class="hljs-string">&quot;van-&quot;</span>) &gt; -<span class="hljs-number">1</span> ? <span class="hljs-string">&quot;@extend .&#123;$spriteName&#125;&quot;</span> : <span class="hljs-string">&quot;&quot;</span>&#125;</span></span><br><span class="hljs-string">            background-position: ptr(-<span class="hljs-subst">$&#123;sprite.x&#125;</span>) ptr(-<span class="hljs-subst">$&#123;sprite.y&#125;</span>);</span><br><span class="hljs-string">            width: ptr(<span class="hljs-subst">$&#123;sprite.width&#125;</span>);</span><br><span class="hljs-string">            height: ptr(<span class="hljs-subst">$&#123;sprite.height&#125;</span>);</span><br><span class="hljs-string">          &#125;</span><br><span class="hljs-string">        `</span>;<br>      &#125;)<br>      .join(<span class="hljs-string">&quot;&quot;</span>);<br>  &#125;<br>  <span class="hljs-keyword">let</span> mainCSS = <span class="hljs-string">`</span><br><span class="hljs-string">      $spriteName= &quot;<span class="hljs-subst">$&#123;spritesheet.name&#125;</span>&quot;</span><br><span class="hljs-string">      .&#123;$spriteName&#125;&#123;</span><br><span class="hljs-string">          position: relative;</span><br><span class="hljs-string">          display: inline-block;</span><br><span class="hljs-string">          font-style: normal;</span><br><span class="hljs-string">          vertical-align: middle;</span><br><span class="hljs-string">          background-image: url(&quot;<span class="hljs-subst">$&#123;spritesheet.image&#125;</span>&quot;);</span><br><span class="hljs-string">          background-size: ptr(<span class="hljs-subst">$&#123;spritesheet.width&#125;</span>) ptr(<span class="hljs-subst">$&#123;spritesheet.height&#125;</span>);</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">      <span class="hljs-subst">$&#123;spritesCSS&#125;</span></span><br><span class="hljs-string">  `</span>;<br>  <span class="hljs-keyword">return</span> [mainCSS, <span class="hljs-string">&quot;styl&quot;</span>]; <span class="hljs-comment">//è¿”å›æ ·å¼è§„åˆ™æ–‡æœ¬å’Œæ–‡ä»¶åç¼€å</span><br>&#125;;<br></code></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢çš„è‡ªå®šä¹‰è„šæœ¬å°†ä¼šå¯¼å‡ºå¦‚ä¸‹æ ·å¼ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-variable">$spriteName</span> = <span class="hljs-string">&#x27;demo&#x27;</span>;<br><br>.&#123;<span class="hljs-variable">$spriteName</span>&#125; &#123;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">font-style</span>: normal;<br>  <span class="hljs-attribute">vertical-align</span>: middle;<br>  <span class="hljs-attribute">background-image</span>: url(<span class="hljs-string">&#x27;./demo-sprite.png&#x27;</span>);<br>  <span class="hljs-attribute">background-size</span>: ptr(<span class="hljs-number">285</span>) ptr(<span class="hljs-number">230</span>);<br>&#125;<br><br>.&#123;<span class="hljs-variable">$spriteName</span>&#125;-cart &#123;<br>  <span class="hljs-attribute">background-position</span>: ptr(<span class="hljs-number">0</span>) ptr(-<span class="hljs-number">140</span>);<br>  <span class="hljs-attribute">width</span>: ptr(<span class="hljs-number">46</span>);<br>  <span class="hljs-attribute">height</span>: ptr(<span class="hljs-number">40</span>);<br>&#125;<br><br>...<br><br>.&#123;<span class="hljs-variable">$spriteName</span>&#125;-tab-cart &#123;<br>  <span class="hljs-attribute">background-position</span>: ptr(-<span class="hljs-number">112</span>) ptr(-<span class="hljs-number">140</span>);<br>  <span class="hljs-attribute">width</span>: ptr(<span class="hljs-number">46</span>);<br>  <span class="hljs-attribute">height</span>: ptr(<span class="hljs-number">38</span>);<br>&#125;<br><br><span class="hljs-selector-class">.van-tabbar-item--active</span> .&#123;<span class="hljs-variable">$spriteName</span>&#125;-tab-cart &#123;<br>  <span class="hljs-attribute">background-position</span>: ptr(-<span class="hljs-number">56</span>) ptr(-<span class="hljs-number">140</span>);<br>  <span class="hljs-attribute">width</span>: ptr(<span class="hljs-number">46</span>);<br>  <span class="hljs-attribute">height</span>: ptr(<span class="hljs-number">38</span>);<br>&#125;<br><br>...<br><br><span class="hljs-selector-class">.van-checkbox__icon</span> &#123;<br>  <span class="hljs-keyword">@extend</span> .&#123;<span class="hljs-variable">$spriteName</span>&#125;;<br>  <span class="hljs-attribute">background-position</span>: ptr(-<span class="hljs-number">248</span>) ptr(-<span class="hljs-number">98</span>);<br>  <span class="hljs-attribute">width</span>: ptr(<span class="hljs-number">32</span>);<br>  <span class="hljs-attribute">height</span>: ptr(<span class="hljs-number">32</span>);<br>&#125;<br><br><span class="hljs-selector-class">.van-checkbox__icon</span><span class="hljs-selector-class">.van-checkbox__icon--checked</span> &#123;<br>  <span class="hljs-keyword">@extend</span> .&#123;<span class="hljs-variable">$spriteName</span>&#125;;<br>  <span class="hljs-attribute">background-position</span>: ptr(-<span class="hljs-number">248</span>) ptr(-<span class="hljs-number">140</span>);<br>  <span class="hljs-attribute">width</span>: ptr(<span class="hljs-number">32</span>);<br>  <span class="hljs-attribute">height</span>: ptr(<span class="hljs-number">32</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥é€šè¿‡è‡ªç”±çš„æ”¹å˜é€»è¾‘å®Œæˆå¤šå˜çš„éœ€æ±‚å•¦ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€æºé¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nodejs </tag>
            
            <tag> å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rem å“åº”å¼ç½‘ç«™é€‚é…è§£å†³æ–¹æ¡ˆ</title>
      <link href="/202011/web-rem-resolve/"/>
      <url>/202011/web-rem-resolve/</url>
      
        <content type="html"><![CDATA[<img src="/202011/web-rem-resolve/cover.png" class="" width="0" height="0"><h2 id="REM-è§£å†³æ–¹æ¡ˆ"><a href="#REM-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="REM è§£å†³æ–¹æ¡ˆ"></a>REM è§£å†³æ–¹æ¡ˆ</h2><h3 id="ä¸»è¦æ€è·¯"><a href="#ä¸»è¦æ€è·¯" class="headerlink" title="ä¸»è¦æ€è·¯"></a>ä¸»è¦æ€è·¯</h3><p>é€šè¿‡å“åº”å¼è®¾è®¡ç¨¿å°ºå¯¸ä¸ä¸€çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ <code>resizeäº‹ä»¶</code> æ—¶åˆ¤æ–­çª—å£é€‰ç”¨å¯¹åº”å®¢æˆ·ç«¯çš„ <code>è®¾è®¡ç¨¿å®½åº¦</code> è¿ç®—ï¼Œè¾…ä»¥ <code>@mediaå“åº”å¼</code> å³å¯å®Œç¾å¤ç°å“åº”å¼çš„è®¾è®¡å•¦ã€‚</p><h3 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h3><blockquote><p>ä»¥éœ€å¼€å‘ <em>PCç«¯</em> å’Œ <em>æ‰‹æœºç«¯</em> çš„å“åº”å¼é¡¹ç›®ä¸ºä¾‹</p></blockquote><ul><li><h4 id="å°†jsä»£ç æ”¾åœ¨-lt-head-gt-å†…ï¼Œä¸”ä¸ä¾èµ–ä»»ä½•æ’ä»¶ä»¥ä¿è¯ä»–æœ€æ—©è¢«æ‰§è¡Œã€‚"><a href="#å°†jsä»£ç æ”¾åœ¨-lt-head-gt-å†…ï¼Œä¸”ä¸ä¾èµ–ä»»ä½•æ’ä»¶ä»¥ä¿è¯ä»–æœ€æ—©è¢«æ‰§è¡Œã€‚" class="headerlink" title="å°†jsä»£ç æ”¾åœ¨ &lt;head&gt; å†…ï¼Œä¸”ä¸ä¾èµ–ä»»ä½•æ’ä»¶ä»¥ä¿è¯ä»–æœ€æ—©è¢«æ‰§è¡Œã€‚"></a>å°†jsä»£ç æ”¾åœ¨ <code>&lt;head&gt;</code> å†…ï¼Œä¸”ä¸ä¾èµ–ä»»ä½•æ’ä»¶ä»¥ä¿è¯ä»–æœ€æ—©è¢«æ‰§è¡Œã€‚</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recal</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> docElement = <span class="hljs-built_in">document</span>.documentElement || <span class="hljs-built_in">document</span>.body;<br>    <br>    <span class="hljs-comment">// #region å¯æ ¹æ®å“åº”å¼éœ€æ±‚è‡ªç”±è°ƒæ•´é€»è¾‘</span><br>    <span class="hljs-keyword">let</span> clientWidth = docElement.clientWidth,<br>      designWidth = <span class="hljs-number">1200</span>; <span class="hljs-comment">//PCç«¯è®¾è®¡ç¨¿å®½åº¦ï¼ˆä¸»å†…å®¹åŒºåŸŸï¼‰</span><br><br>    <span class="hljs-keyword">if</span> (clientWidth &lt; <span class="hljs-number">750</span>) &#123; <span class="hljs-comment">// å®¢æˆ·ç«¯å±å¹•å®½åº¦å°äºä¸€å®šå°ºå¯¸æ—¶</span><br>      designWidth = <span class="hljs-number">640</span>; <span class="hljs-comment">//è½¬ä¸ºç§»åŠ¨ç«¯è®¾è®¡ç¨¿å®½åº¦</span><br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (clientWidth &lt; designWidth) &#123;<span class="hljs-comment">// å®¢æˆ·ç«¯å±å¹•å®½åº¦å°äº PCç«¯è®¾è®¡ç¨¿å®½åº¦ ä½†æœªéœ€è½¬æ¢æˆ ç§»åŠ¨ç«¯è®¾è®¡ æ—¶</span><br>      clientWidth -= <span class="hljs-number">80</span> <br>      <span class="hljs-comment">// è§£å†³åœ¨750~1200å·¦å³å•ç‹¬è®¾è®¡çš„æƒ…å†µï¼Œè®©å†…å®¹ä¸»ä½“çš„å±•ç¤ºæœ‰ä¸€å®šçš„ç•™ç™½</span><br>    &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">//å¦åˆ™ç›´æ¥åº”ç”¨PCç«¯è®¾è®¡ç¨¿å®½åº¦</span><br>      clientWidth = designWidth;<br>    &#125;<br>    <span class="hljs-comment">// #region </span><br>    docElement.style.fontSize = (clientWidth / designWidth) * <span class="hljs-number">100</span> + <span class="hljs-string">&quot;px&quot;</span>;<br>  &#125;<br>  <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&quot;resize&quot;</span>, recal);<br>  recal();<br>&#125;)();<br></code></pre></td></tr></table></figure></li><li><h4 id="cssé¢„å¤„ç†å™¨ç¼–å†™å‡½æ•°-æˆ‘è¿™è¾¹ç”¨çš„æ˜¯stylus"><a href="#cssé¢„å¤„ç†å™¨ç¼–å†™å‡½æ•°-æˆ‘è¿™è¾¹ç”¨çš„æ˜¯stylus" class="headerlink" title="cssé¢„å¤„ç†å™¨ç¼–å†™å‡½æ•°(æˆ‘è¿™è¾¹ç”¨çš„æ˜¯stylus)"></a>cssé¢„å¤„ç†å™¨ç¼–å†™å‡½æ•°(æˆ‘è¿™è¾¹ç”¨çš„æ˜¯stylus)</h4><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs styl"><br><span class="hljs-function"><span class="hljs-title">ptr</span><span class="hljs-params">(px)</span></span>&#123;<br>  return unit((px / <span class="hljs-number">100</span>), <span class="hljs-string">&#x27;rem&#x27;</span>);<br>&#125;<br><br>body&#123;<br>  <span class="hljs-attribute">font-size</span>: ptr(<span class="hljs-number">12</span>)<br>&#125;<br><br><span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">1200px</span>)&#123;<br>  .container&#123;<br>    <span class="hljs-attribute">width</span>: ptr(<span class="hljs-number">1200</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">750px</span>)&#123;<br>  .container&#123;<br>    <span class="hljs-attribute">width</span>: ptr(<span class="hljs-number">750</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> å‰ç«¯æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> è§£å†³æ–¹æ¡ˆ </tag>
            
            <tag> å“åº”å¼ </tag>
            
            <tag> é€‚é… </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
