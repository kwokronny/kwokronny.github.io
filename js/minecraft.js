!function(){var o,s,r,d,E,c,p,l,w,u,t=!1,n=0;function h(){requestAnimationFrame(h);var e=p.getDelta();c.update(e),E[0].offset.x-=.007,E[1].offset.x+=.007,t&&(n+=.004,l.rotation.y=n%360),s.render(o,r)}function R(){var e=d.getBoundingClientRect().width,t=d.getBoundingClientRect().height;r.aspect=e/t,window.innerWidth<=750?(r.position.set(0,3,10),l.position.y=1,w.position.y=1):(r.position.set(0,2,16),w.position.y=-2,l.position.y=-2,l.rotation.x=0),r.updateProjectionMatrix(),s.setSize(e,t)}!function(){var e=(d=document.querySelector(".bg-canvas")).getBoundingClientRect().width,t=d.getBoundingClientRect().height;(r=new THREE.PerspectiveCamera(45,e/t,1,2e3)).position.set(0,2,16),p=new THREE.Clock,o=new THREE.Scene;var n=new THREE.HemisphereLight(15921906,15921906);n.position.set(0,50,0),o.add(n);var a=new THREE.DirectionalLight(16777215);a.position.set(0,30,0),a.castShadow=!0,a.shadow.camera.near=.1,a.shadow.camera.far=60,o.add(a),(l=new THREE.Object3D).position.y=-4,o.add(l),(w=new THREE.Object3D).position.y=-4,o.add(w);var i=(new THREE.TextureLoader).load("/gltf/textures/grass.png");i.wrapS=i.wrapT=THREE.RepeatWrapping,i.repeat.set(5,5),i.anisotropy=16,i.encoding=THREE.sRGBEncoding,(n=new THREE.Mesh(new THREE.CylinderBufferGeometry(5,5,.1,32),new THREE.MeshLambertMaterial({map:i}))).receiveShadow=!0,l.add(n),(E=[(new THREE.TextureLoader).load("/img/warning_zone.png"),(new THREE.TextureLoader).load("/img/warning_zone.png")]).forEach(function(e){e.wrapS=THREE.RepeatWrapping,e.repeat.set(4,1)}),(a=new THREE.Mesh(new THREE.PlaneGeometry(.8*1696/60,.8),new THREE.MeshBasicMaterial({map:E[0]}))).receiveShadow=!0,a.position.set(2,3,-5.4),a.rotation.set(0,.3,-.3),(i=new THREE.Mesh(new THREE.PlaneGeometry(.8*1696/60,.8),new THREE.MeshBasicMaterial({map:E[1]}))).receiveShadow=!0,i.position.set(0,7,-5.4),i.rotation.set(0,-.3,.3),(n=new THREE.Mesh(new THREE.PlaneGeometry(848/60,.5),new THREE.MeshBasicMaterial({map:E[1]}))).receiveShadow=!0,n.position.set(0,1.5,5.4),n.rotation.set(0,-.3,.1),w.add(a),w.add(i),w.add(n),(n=new THREE.GLTFLoader).load("/gltf/pumpkin.gltf",function(e){e=e.scene;e.traverse(function(e){e.isMesh&&(e.frustumCulled=!1,e.castShadow=!0)}),e.rotation.set(0,1,0),e.position.set(1,.1,-2.4);e.scale.set(.33,.33,.33),l.add(e)}),n.load("/gltf/zombie.gltf",function(e){var t=e.scene;t.traverse(function(e){e.isMesh&&(e.frustumCulled=!1,e.castShadow=!0)}),t.position.set(.6,0,2.5),t.scale.set(1.5,1.5,1.5),l.add(t),c=new THREE.AnimationMixer(t),(u={push_up:c.clipAction(e.animations[0]),idle:c.clipAction(e.animations[1]),walk:c.clipAction(e.animations[2])}).walk.play(),h();e=d.querySelector(".loading");d.removeChild(e)}),(s=new THREE.WebGLRenderer({alpha:!0,antialias:!0})).setPixelRatio(window.devicePixelRatio),s.setSize(e,t),s.outputEncoding=THREE.sRGBEncoding,s.shadowMap.enabled=!0,s.shadowMap.type=THREE.PCFSoftShadowMap,d.appendChild(s.domElement),R(),window.addEventListener("resize",R,!1)}(),document.querySelectorAll(".bg-canvas .switch-action input").forEach(function(e){e.addEventListener("change",function(e){"checkbox"==e.target.type?t=!t:(Object.values(u).forEach(function(e){e.stop()}),e=e.target.value,u[e].play())})})}();