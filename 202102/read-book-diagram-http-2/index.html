<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="content-type" content="text/html; charset=utf-8"><title>读记《图解HTTP》HTTP报文与状态码 KwokRonny&#39;Blog</title><meta name="keywords" content="kwokronny,javascript,web,linux,docker,golang,全沾工程师,阅读笔记,网络协议,http,https,ajax,comet,spdy,认证,web,图解HTTP,协议,http协议,tcp协议,报文,http报文,状态码,http状态码,攻击,web攻击"><meta name="description" content="HTTP 报文报文结构下图为请求报文及响应报文结构组成描述请求行[请求方法] [URI] [HTTP版本] 格式，用于请求时状态行[HTTP版本] [HTTP状态码] [原因短语] 格式，告知响应的状态首部字段每个字段以 [字段名]:[字段"><meta content="telephone=no" name="format-detection"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><link rel="alternate" href="/atom.xml" title="KwokRonny Feed" type="application/atom+xml"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?ee452beed5ca135deb3d5befca38907d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Y5BQMHE7WN"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Y5BQMHE7WN")</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2236624_69rc9okdrcb.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/css/index.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="header"><div class="nav-btn"><span class="lt"><i></i></span><span class="lb"><i></i></span></div><a href="/" class="logo">KwokRonny&#39;Blog</a><div class="nav"><div class="nav-item"><a class="hover" href="/archives"><i class="fa fa-archive"></i> 文章</a></div><div class="nav-item"><a href="/categories" class="hover"><i class="fa fa-inbox"></i> 分类</a><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E8%BF%90%E7%BB%B4/"><i class="fa fa-folder-open"></i> 服务运维</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E8%BF%90%E7%BB%B4/docker/"><i class="fa fa-folder-open"></i> docker</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E6%96%87/"><i class="fa fa-folder-open"></i> 杂文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"><i class="fa fa-folder-open"></i> 解决方案</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/WEB%E5%BC%80%E5%8F%91/"><i class="fa fa-folder-open"></i> WEB开发</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%88%86%E4%BA%AB/"><i class="fa fa-folder-open"></i> 软件分享</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"><i class="fa fa-folder-open"></i> 阅读笔记</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/%E6%8A%80%E6%9C%AF%E7%B1%BB/"><i class="fa fa-folder-open"></i> 技术类</a></li></ul></li></ul></div><div class="nav-item"><a href="/tags" class="hover"><i class="fa fa-tag"></i> 标签</a><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag"><i class="fa fa-tag"></i> JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag"><i class="fa fa-tag"></i> LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag"><i class="fa fa-tag"></i> Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuex/" rel="tag"><i class="fa fa-tag"></i> Vuex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag"><i class="fa fa-tag"></i> css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag"><i class="fa fa-tag"></i> docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag"><i class="fa fa-tag"></i> nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stylus/" rel="tag"><i class="fa fa-tag"></i> stylus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/" rel="tag"><i class="fa fa-tag"></i> web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" rel="tag"><i class="fa fa-tag"></i> 响应式</a></li></ul></div><div class="nav-item"><a href="/friend" class="hover"><i class="fa fa-mars"></i> 伙伴们</a><div class="friend-link-list clearfix"><a class="friend" target="_blank" href="https://www.mokeyjay.com/"><img src="https://www.mokeyjay.com/headimg.png"><div class="info"><h3 class="text-clamp_1" title="超能小紫 mokeyjay">超能小紫 mokeyjay</h3><div class="text-clamp_1" title="Web全沾 // 专业学渣 // 贰刺猿 // 永远还不完信用卡">Web全沾 // 专业学渣 // 贰刺猿 // 永远还不完信用卡</div></div></a></div></div><div class="nav-item-link"><a href="/about" class="hover"><i class="fa fa-user"></i></a> <a target="_blank" rel="noopener" href="https://github.com/kwokronny" class="hover"><i class="fa fa-github-alt"></i></a> <a href="/atom.xml" class="hover"><i class="fa fa-rss-square"></i></a></div></div></div><div class="warning-zone"></div><div class="warning-zone right"></div><div class="container-mask"></div><div class="bg-canvas"><div class="loading"><img src="/img/loading.svg"><div>3D Model Loading</div></div><div class="switch-action"><label class="hvr-push"><input type="checkbox" name="rotate"> <i class="iconfont icon-rotate3d"></i></label> <label class="hvr-push"><input type="radio" value="walk" name="action"> <i class="iconfont icon-walk"></i></label> <label class="hvr-push"><input type="radio" value="idle" checked="checked" name="action"> <i class="iconfont icon-idle"></i></label> <label class="hvr-push"><input type="radio" value="push_up" name="action"> <i class="iconfont icon-push_up"></i></label></div></div><div class="main-container"><div id="content-outer"><div id="content-inner"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@10.4.0/styles/dracula.min.css"><div class="left-panel"><div class="article-menu panel"><h3>目录</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#HTTP-%E6%8A%A5%E6%96%87"><span class="toc-text">HTTP 报文</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%A5%E6%96%87%E7%BB%93%E6%9E%84"><span class="toc-text">报文结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-text">HTTP 首部字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-text">通用首部字段</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86-Connection"><span class="toc-text">连接管理 Connection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%93%E5%AD%98-Cache"><span class="toc-text">缓存 Cache</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-text">请求首部字段</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Accept-%E7%94%A8%E6%88%B7%E5%8F%AF%E4%BB%A3%E7%90%86%E7%9A%84%E7%9A%84%E5%AA%92%E4%BD%93%E7%B1%BB%E5%9E%8B"><span class="toc-text">Accept 用户可代理的的媒体类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Expect-%E6%9C%9F%E5%BE%85%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E7%89%B9%E5%AE%9A%E8%A1%8C%E4%B8%BA"><span class="toc-text">Expect 期待服务器的特定行为</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#If-XXX-%E9%99%84%E5%B8%A6%E6%9D%A1%E4%BB%B6%E8%AF%B7%E6%B1%82"><span class="toc-text">If-XXX 附带条件请求</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-text">响应首部字段</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ETag-%E5%AE%9E%E4%BD%93%E6%A0%87%E8%AF%86"><span class="toc-text">ETag 实体标识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Vary-%E7%BC%93%E5%AD%98%E6%8E%A7%E5%88%B6"><span class="toc-text">Vary 缓存控制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5%EF%BC%88%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%E4%B8%8E%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%E7%9A%84%E7%9A%84%E5%AE%9E%E4%BD%93%E9%83%A8%E5%88%86%E4%BD%BF%E7%94%A8%E7%9A%84%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5%EF%BC%89"><span class="toc-text">实体首部字段（请求报文与响应报文的的实体部分使用的首部字段）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1-Cookie-%E7%9A%84%E5%AD%97%E6%AE%B5"><span class="toc-text">服务 Cookie 的字段</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Set-Cookie"><span class="toc-text">Set-Cookie</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#End-to-end-%E9%A6%96%E9%83%A8%E5%92%8C-Hop-by-hop-%E9%A6%96%E9%83%A8"><span class="toc-text">End-to-end 首部和 Hop-by-hop 首部</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HTTP-%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-text">HTTP 状态码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2XX-%E6%88%90%E5%8A%9F%E7%8A%B6%E6%80%81%E7%A0%81-Success"><span class="toc-text">2XX 成功状态码 Success</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3XX-%E9%87%8D%E5%AE%9A%E5%90%91-Redirection"><span class="toc-text">3XX 重定向 Redirection</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4XX-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%94%99%E8%AF%AF-Client-Error"><span class="toc-text">4XX 客户端错误 Client Error</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5XX-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%94%99%E8%AF%AF-Server-Error"><span class="toc-text">5XX 服务器错误 Server Error</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%A7%E7%BB%AD%E9%98%85%E8%AF%BB"><span class="toc-text">继续阅读</span></a></li></ol></div></div><article id="post"><h1 class="title">读记《图解HTTP》HTTP报文与状态码</h1><small class="description"><span class="date"><i class="fa fa-calendar"></i> 2021年02月27日</span> <span><i class="fa fa-inbox"></i> <a class="category-link" href="/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">阅读笔记</a>><a class="category-link" href="/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/%E6%8A%80%E6%9C%AF%E7%B1%BB/">技术类</a> </span><span><i class="fa fa-tag"></i> <a class="tag-link" href="/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/" rel="tag">网络协议</a>, <a class="tag-link" href="/tags/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" rel="tag">阅读笔记</a></span></small><blockquote class="text-a_c">本站文章除注明转载外，均为原创文章。如需转载请注明出处：<br><a href="https://kwokronny.top/202102/read-book-diagram-http-2/">https://kwokronny.top/202102/read-book-diagram-http-2/</a></blockquote><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202102/read-book-diagram-http-2/cover.png" class="" width="0" height="0"><h1 id="HTTP-报文"><a href="#HTTP-报文" class="headerlink" title="HTTP 报文"></a>HTTP 报文</h1><ul><li><h2 id="报文结构"><a href="#报文结构" class="headerlink" title="报文结构"></a>报文结构</h2><p>下图为请求报文及响应报文结构</p><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202102/read-book-diagram-http-2/http_message_struc.jpg" class=""><table><thead><tr><th align="left">组成</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">请求行</td><td align="left"><code>[请求方法] [URI] [HTTP版本]</code> 格式，用于请求时</td></tr><tr><td align="left">状态行</td><td align="left"><code>[HTTP版本] [HTTP状态码] [原因短语]</code> 格式，告知响应的状态</td></tr><tr><td align="left">首部字段</td><td align="left">每个字段以 <code>[字段名]:[字段值]</code> 为一行格式写入，一般首部分为：通用首部、请求首部、响应首部和实体首部</td></tr><tr><td align="left">其他</td><td align="left">可能包含 HTTP 的 RFC 里未定义的首部，如 Cookie 等</td></tr></tbody></table></li><li><h2 id="HTTP-首部字段"><a href="#HTTP-首部字段" class="headerlink" title="HTTP 首部字段"></a>HTTP 首部字段</h2><p>HTTP 首部字段是 HTTP 报文的构成要素之一；无论在请求或响应中都会应用，起到传递额外重要信息的作用。</p><blockquote><p>首部字段中每个字段以 <code>[字段名]:[字段值]</code> 构成</p></blockquote><ul><li><h3 id="通用首部字段"><a href="#通用首部字段" class="headerlink" title="通用首部字段"></a>通用首部字段</h3><p>请求报文与响应报文都会使用的首部字段</p><table><thead><tr><th align="left">首部字段名</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">Date</td><td align="left">创建报文时间</td></tr><tr><td align="left">Cache-Control</td><td align="left">缓存的控制</td></tr><tr><td align="left">Connection</td><td align="left">逐跳首部、连接的管理</td></tr><tr><td align="left">Keep-Alive</td><td align="left">设置连接的超时时长和最大请求</td></tr><tr><td align="left">Pragma</td><td align="left">报文指令</td></tr><tr><td align="left">Trailer</td><td align="left">报文末端的首部一览</td></tr><tr><td align="left">Transfer-Encoding</td><td align="left">报文主体的传输编码方式</td></tr><tr><td align="left">Upgrade</td><td align="left">升级为其他协议</td></tr><tr><td align="left">Via</td><td align="left">代理服务器相关信息</td></tr><tr><td align="left">Warning</td><td align="left">错误通知</td></tr></tbody></table><ul><li><h4 id="连接管理-Connection"><a href="#连接管理-Connection" class="headerlink" title="连接管理 Connection"></a>连接管理 Connection</h4><ul><li><strong>控制不再转发给代理的首部字段</strong><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202102/read-book-diagram-http-2/http_connection.png" class=""></li><li><strong>管理持久连接</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">Connection: close 关闭连接<br>Connection: Keep-Alive 持续连接<br></code></pre></td></tr></table></figure></li></ul></li><li><h4 id="缓存-Cache"><a href="#缓存-Cache" class="headerlink" title="缓存 Cache"></a>缓存 Cache</h4><blockquote><p>Pragma 为 HTTP/1.1 之前版本的历史遗留，仅作为与 HTTP/1.0 向后兼容而定义</p></blockquote><p>通过首部字段 Cache-Control 控制缓存的工作机制<br>缓存指令按请求和响应分类如下</p><ul><li><p><strong>缓存请求指令</strong></p><table><thead><tr><th align="left">指令</th><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">no-chche</td><td align="left">无</td><td align="left">强制向源服务器再次验证</td></tr><tr><td align="left">no-store</td><td align="left">无</td><td align="left">不缓存请求或响应的任务内容</td></tr><tr><td align="left">max-age=[秒]</td><td align="left">必填</td><td align="left">响应的最大 Age 值</td></tr><tr><td align="left">max-stale(=[秒])</td><td align="left">可空</td><td align="left">接收已过期的响应，即使过期的资源也接收</td></tr><tr><td align="left">max-fresh=[秒]</td><td align="left">必填</td><td align="left">期望在指定时间内的响应仍有效</td></tr><tr><td align="left">no-transform</td><td align="left">无</td><td align="left">代理不可更改媒体类型</td></tr><tr><td align="left">only-if-cached</td><td align="left">无</td><td align="left">从缓存获取资源</td></tr><tr><td align="left">cache-extension</td><td align="left">-</td><td align="left">新指令标记</td></tr></tbody></table></li><li><p><strong>only-if-cached</strong><br>表示客户端仅在缓存服务器获取目标资源，请求缓存服务器的本地缓存无响应，则返回 504 Gateway Timeout</p></li><li><p><strong>缓存响应指令</strong></p><table><thead><tr><th align="left">指令</th><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">public</td><td align="left">无</td><td align="left">可向任意方提供响应缓存</td></tr><tr><td align="left">private</td><td align="left">无</td><td align="left">仅向特定用户返回响应</td></tr><tr><td align="left">no-chche</td><td align="left">无</td><td align="left">强制向源服务器再次验证</td></tr><tr><td align="left">no-store</td><td align="left">无</td><td align="left">不缓存请求或响应的任务内容</td></tr><tr><td align="left">no-transform</td><td align="left">无</td><td align="left">代理不可更改媒体类型</td></tr><tr><td align="left">must-revalidate</td><td align="left">无</td><td align="left">可缓存但必须再向源服务器进行确认</td></tr><tr><td align="left">proxy-revalidate</td><td align="left">无</td><td align="left">要求中间缓存服务器对缓存的响应有效性确认</td></tr><tr><td align="left">max-age=[秒]</td><td align="left">必填</td><td align="left">响应的最大 Age 值</td></tr><tr><td align="left">s-maxage=[秒]</td><td align="left">必填</td><td align="left">公共缓存服务器响应的最大 Age 值</td></tr><tr><td align="left">cache-extension</td><td align="left">-</td><td align="left">新指令标记</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">Cache-Control: private,max-age&#x3D;0,no-cache<br># 缓存多个指令通过 “,&quot; 分隔<br></code></pre></td></tr></table></figure></li><li><p><strong>易误解的两个指令：no-cache 指令 或 no-store 指令</strong></p><ul><li>no-cache 指令的目地是防止从缓存中返回过期的资源</li><li>no-store 指令的目地才是真正的不进行缓存</li></ul></li><li><p><strong>s-maxage 指令 和 max-age 指令</strong><br><code>s-maxage</code>指令与<code>max-age</code>指令相同，不同在于 <code>s-maxage</code> 只适用于供多用户使用的公共缓存服务器（指代理服务器）<br>如果缓存资源缓存时间数值 &lt; 指令设定时间数值，客户端接受缓存的资源。</p><blockquote><p>s-maxmage 指令后，则直接忽略对 Expires 首部字段 和 max-age 指令</p></blockquote></li></ul></li></ul></li><li><h3 id="请求首部字段"><a href="#请求首部字段" class="headerlink" title="请求首部字段"></a>请求首部字段</h3><p>请求报文会使用的首部字段</p><table><thead><tr><th align="left">首部字段名</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">Host</td><td align="left">请求资源所在服务器</td></tr><tr><td align="left">Accept</td><td align="left">用户可代理的的媒体类型</td></tr><tr><td align="left">Accept-Charset</td><td align="left">可接收的字符集</td></tr><tr><td align="left">Accept-Encoding</td><td align="left">可接受的内容编码</td></tr><tr><td align="left">Accept-Language</td><td align="left">可接受的自然语言</td></tr><tr><td align="left">Authorization</td><td align="left">Web 认证信息</td></tr><tr><td align="left">Form</td><td align="left">用户的电子邮箱地址</td></tr><tr><td align="left">Expect</td><td align="left">期待服务器的特定行为</td></tr><tr><td align="left">If-Match</td><td align="left">比较实体标记（ETag）</td></tr><tr><td align="left">If-Modified-Since</td><td align="left">比较资源的更新时间</td></tr><tr><td align="left">If-None-Match</td><td align="left">比较实体标记（与 If-Match 相反）</td></tr><tr><td align="left">If-Range</td><td align="left">资源未更新时发送实体字节的范围请求</td></tr><tr><td align="left">If-Unmodified-Since</td><td align="left">比较资源的更新时间（与 If-Modified-Since 相反）</td></tr><tr><td align="left">Max-Forwards</td><td align="left">最大传输逐跳数</td></tr><tr><td align="left">Proxy-Authorization</td><td align="left">代理服务器要求客户端的认证信息</td></tr><tr><td align="left">Range</td><td align="left">只请求获取字节范围的部分资源，处理请求返回 206，不能处理时返回 200</td></tr><tr><td align="left">Referer</td><td align="left">告知服务器请求从哪发出</td></tr><tr><td align="left">TE</td><td align="left">传输编码的优先级</td></tr><tr><td align="left">User-Agent</td><td align="left">HTTP 客户端程序的信息</td></tr></tbody></table><ul><li><h4 id="Accept-用户可代理的的媒体类型"><a href="#Accept-用户可代理的的媒体类型" class="headerlink" title="Accept 用户可代理的的媒体类型"></a>Accept 用户可代理的的媒体类型</h4><p>Accept 首部字段可通知服务器，用户代理能够处理的媒体类型及媒体类型的优先级，type/subtype。</p><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202102/read-book-diagram-http-2/http_field_accept.png" class=""><ul><li>文本类型：text/html、text/plain…</li><li>图片类型：image/jpeg、image/gif、image/png…</li><li>视频文件：video/mpeg、video/quicktime</li><li>二进制文件：application/octet-stream、application/zip…</li></ul><blockquote><p>若想要给显示的媒体类型增加优先级，可用 “;” 分隔并设置 q=[权重值] &gt; <code>[允许类型];q=[权重值]</code> 权重值范围 0~1（精确至小数点后 3 位）</p></blockquote></li><li><h4 id="Expect-期待服务器的特定行为"><a href="#Expect-期待服务器的特定行为" class="headerlink" title="Expect 期待服务器的特定行为"></a>Expect 期待服务器的特定行为</h4><p>目前规范中只规定了 “100-continue” 这一个期望条件。<br>通知接收方客户端要发送一个体积可能很大的消息体，期望收到状态码为 100 (Continue) 的临时回复。</p><blockquote><p>例如，如果请求中 Content-Length 的值太大的话，可能会遭到服务器的拒绝。<br>常见的浏览器不会发送 Expect 消息头，但是其他类型的客户端如 cURL 默认会这么做。</p></blockquote></li><li><h4 id="If-XXX-附带条件请求"><a href="#If-XXX-附带条件请求" class="headerlink" title="If-XXX 附带条件请求"></a>If-XXX 附带条件请求</h4><p>形如 <code>If-XXX</code> 格式的请求首部字段，即可称为条件请求。</p><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202102/read-book-diagram-http-2/http_field_if.jpg" class="" width="500"> <img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202102/read-book-diagram-http-2/http_field_if_match.jpg" class="" width="500"> <img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202102/read-book-diagram-http-2/http_field_if_modified_since.jpg" class="" width="500"></li></ul></li><li><h3 id="响应首部字段"><a href="#响应首部字段" class="headerlink" title="响应首部字段"></a>响应首部字段</h3><p>响应报文会使用的首部字段</p><table><thead><tr><th align="left">首部字段名</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">Accept-Ranges</td><td align="left">是否接受的字节范围请求</td></tr><tr><td align="left">Age</td><td align="left">推算资源创建经过时间</td></tr><tr><td align="left">ETag</td><td align="left">资源匹配信息</td></tr><tr><td align="left">Location</td><td align="left">令客户端重新定向到的 URI</td></tr><tr><td align="left">Proxy-Authenticate</td><td align="left">代理服务器对客户端的认证信息</td></tr><tr><td align="left">Retry-After</td><td align="left">对再次发起请求的时机要求</td></tr><tr><td align="left">Server</td><td align="left">HTTP 服务器的安装信息</td></tr><tr><td align="left">Vary</td><td align="left">代理服务器缓存的管理信息</td></tr><tr><td align="left">WWW-Authenticate</td><td align="left">服务器对客户端的认证信息</td></tr></tbody></table><ul><li><h4 id="ETag-实体标识"><a href="#ETag-实体标识" class="headerlink" title="ETag 实体标识"></a>ETag 实体标识</h4><p>将资源以字符串形式做唯一标识的方式，服务器会为每份资源分配对应的 ETag 值，资源更新时，ETag 同时更新。<br>分配唯一标识的目地：仅凭 URI 指定缓存资源是相当困难的。下载过程遇连接中断或再连接情况都会依照 ETag 值指定资源</p><blockquote><p>资源的 URI 相同时：如根据浏览器返回不同语言的网站时，相同 URI，ETag 不相同</p></blockquote><ul><li>强 ETag 值：不论实体发生多么细微的变化都会改变值<br><code>ETag: &quot;usagi-1234&quot;</code></li><li>弱 ETag 值：只有资源发生了根本改变，才会改变值，且会在值前附加 “W/“<br><code>ETag: W/&quot;usagi-1234&quot;</code></li></ul></li><li><h4 id="Vary-缓存控制"><a href="#Vary-缓存控制" class="headerlink" title="Vary 缓存控制"></a>Vary 缓存控制</h4><p>对缓存进行控制。源服务器会向代理服务器传达关于本地缓存使用方法的命令</p></li></ul></li><li><h3 id="实体首部字段（请求报文与响应报文的的实体部分使用的首部字段）"><a href="#实体首部字段（请求报文与响应报文的的实体部分使用的首部字段）" class="headerlink" title="实体首部字段（请求报文与响应报文的的实体部分使用的首部字段）"></a>实体首部字段（请求报文与响应报文的的实体部分使用的首部字段）</h3><table><thead><tr><th align="left">首部字段名</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">Allow</td><td align="left">资源可支持的 HTTP 方法</td></tr><tr><td align="left">Content-Type</td><td align="left">实体主类的类型</td></tr><tr><td align="left">Content-Encoding</td><td align="left">实体主体适用的编码方式</td></tr><tr><td align="left">Content-Language</td><td align="left">实体主体的自然语言</td></tr><tr><td align="left">Content-Location</td><td align="left">替代对应资源的 URI</td></tr><tr><td align="left">Content-Length</td><td align="left">实体主体的的字节数</td></tr><tr><td align="left">Content-Range</td><td align="left">实体主体的位置范围，一般用于发出部分请求时使用</td></tr><tr><td align="left">Content-MD5</td><td align="left">实体主体的报文摘要</td></tr><tr><td align="left">Expires</td><td align="left">实体主体过期的日期时间</td></tr><tr><td align="left">Last-Modified</td><td align="left">资源的最后修改日期时间</td></tr></tbody></table></li><li><h3 id="服务-Cookie-的字段"><a href="#服务-Cookie-的字段" class="headerlink" title="服务 Cookie 的字段"></a>服务 Cookie 的字段</h3><ul><li><h4 id="Set-Cookie"><a href="#Set-Cookie" class="headerlink" title="Set-Cookie"></a>Set-Cookie</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">Set-Cookie: status&#x3D;enable;expires&#x3D;Tue,05 Jul 2011 07:26:31 GMT;path&#x3D;&#x2F;;domail&#x3D;.example.com;<br></code></pre></td></tr></table></figure><p>Set-Cookie 字段属性</p><table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">[NAME]=[VALUE]</td><td align="left">Cookie 的名称与其值</td></tr><tr><td align="left">expires=[DATE]</td><td align="left">Cookie 的有效期，默认为关闭浏览器之前</td></tr><tr><td align="left">path=[PATH]</td><td align="left">Cookie 适用路径，默认为文档所在目录</td></tr><tr><td align="left">domain=[域名]</td><td align="left">Cookie 适用域名，默认为创建 Cookie 的服务器的域名</td></tr><tr><td align="left">Secure</td><td align="left">只有 HTTPS 安全通信时才会发送 Cookie</td></tr><tr><td align="left">HttpOnly</td><td align="left">限制 Cookie 不能被 Javascript 脚本访问</td></tr></tbody></table></li></ul></li><li><h3 id="End-to-end-首部和-Hop-by-hop-首部"><a href="#End-to-end-首部和-Hop-by-hop-首部" class="headerlink" title="End-to-end 首部和 Hop-by-hop 首部"></a>End-to-end 首部和 Hop-by-hop 首部</h3><p>HTTP 首部字段将定义成缓存代理和非缓存代理的行为，分为以下 2 种类型</p><ul><li><strong>端到端首部 End-to-end Header</strong><br>此类别的首部会转发给请求/响应的最终接收目标，且必须保存在由缓存生成的响应中，规定必须被转发</li><li><strong>逐跳首部 Hop-by-hop Header</strong><br>此类别首部只对单次转发有效，会因通过缓存或代理而不再转发<blockquote><p>HTTP/1.1 之后版本中，要使用逐跳首部，需提供 Connection 字段</p></blockquote></li></ul><p>除下列 8 个首部字段外，其他所有字段都属于端到端首部<br><code>Connection</code>、<code>Keep-Alive</code>、<code>Proxy-Authenticate</code>、<code>Proxy-Authentication</code>、<code>Trailer</code>、<code>TE</code>、<code>Transfer-Encoding</code>、<code>Upgrade</code></p></li></ul></li></ul><h1 id="HTTP-状态码"><a href="#HTTP-状态码" class="headerlink" title="HTTP 状态码"></a>HTTP 状态码</h1><ul><li><h2 id="2XX-成功状态码-Success"><a href="#2XX-成功状态码-Success" class="headerlink" title="2XX 成功状态码 Success"></a>2XX 成功状态码 Success</h2><p>请求正常处理完毕</p><ul><li>200 OK<br>请求已成功处理</li><li>204 No Content<br>无资源</li><li>206 Partial Content<br>接受范围请求，并返回了指定范围部分的实体内容</li></ul></li><li><h2 id="3XX-重定向-Redirection"><a href="#3XX-重定向-Redirection" class="headerlink" title="3XX 重定向 Redirection"></a>3XX 重定向 Redirection</h2><p>需要进行附加操作以完成请求</p><ul><li>301 Moved Permanently<br>永久性重定向</li><li>302 Found<br>临时性重定向</li><li>303 See Other<br>看下其他 URI，如：<br>用 POST 方法访问服务端，执行后服务端返回希望客户端以 GET 方法重定向到另一个 URI 时。</li><li>304 Not Modified<br>已找到资源，但不符合请求条件</li><li>307 Temporary Redirect<br>临时性重定向，与 302 Found 有相同含义，区别在于 307 会遵照浏览器标准。</li></ul></li><li><h2 id="4XX-客户端错误-Client-Error"><a href="#4XX-客户端错误-Client-Error" class="headerlink" title="4XX 客户端错误 Client Error"></a>4XX 客户端错误 Client Error</h2><p>服务器无法处理请求</p><ul><li>400 Bad Request<br>请求报文有错误</li><li>401 Unauthorized<br>请求需要通过 HTTP 认证（BASIC 认证、DIGEST 认证）</li><li>403 Forbidden<br>请求的资源被服务器拒绝，且没有给出拒绝理由</li><li>404 Not Found<br>服务器上没有请求的资源</li></ul></li><li><h2 id="5XX-服务器错误-Server-Error"><a href="#5XX-服务器错误-Server-Error" class="headerlink" title="5XX 服务器错误 Server Error"></a>5XX 服务器错误 Server Error</h2><p>服务器处理请求错误</p><ul><li>500 Internal Server Error<br>服务器执行请求发生错误</li><li>503 Service Unavailable<br>服务器繁忙，超负载或正停机维护</li></ul></li></ul><h1 id="继续阅读"><a href="#继续阅读" class="headerlink" title="继续阅读"></a>继续阅读</h1><ul><li><a href="/202103/read-book-diagram-http-3/" title="读记《图解HTTP》Web服务器与HTTPS">读记《图解HTTP》Web服务器与HTTPS</a></li></ul><div class="donate-panel"><label><input type="checkbox"><i class="fa fa-qrcode"></i> 打赏</label> 如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!<div class="donate-code"><img src="/img/wechat_pay.jpg"> <img src="/img/alipay.jpg"></div></div><script type="text/javascript">document.querySelector(".donate-panel input").addEventListener("change",function(){document.querySelector(".donate-code").classList.toggle("show")})</script><script id="KBComment" src="/kb-comment/web/client.js" token="b8b5b95d68afa14869223160a1cec631" theme="dark" crossorigin="anonymous" async></script></article></div></div></div><div class="footer">Power by <a target="_blank" rel="noopener" href="http://hexo.io">hexo</a>. | 3D Model Thx SketchFab: <a target="_blank" rel="noopener" href="https://sketchfab.com/Blender3D">Blender3D</a>, <a target="_blank" rel="noopener" href="https://sketchfab.com/arexon">Arexon</a></div><script src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/js/three/three.min.js"></script><script src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/js/three/GLTFLoader.min.js"></script><script src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/js/three/OrbitControls.min.js"></script><script src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/js/index.js"></script><script src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/js/minecraft.js"></script></body></html>