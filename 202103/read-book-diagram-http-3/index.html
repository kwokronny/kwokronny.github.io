<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="content-type" content="text/html; charset=utf-8"><title>读记《图解HTTP》Web服务器与HTTPS KwokRonny&#39;Blog</title><meta name="keywords" content="kwokronny,javascript,web,linux,docker,golang,全沾工程师,阅读笔记,网络协议,http,https,ajax,comet,spdy,认证,web,图解HTTP,协议,http协议,tcp协议,报文,http报文,状态码,http状态码,攻击,web攻击"><meta name="description" content="HTTPSHTTP 的缺点：通信使用明文（不加密），内容可能会被窃听不验证通信方的身份，可能遭遇伪装无法证明报文的完整性，所以有可能被篡改根据上面的缺点，加以保护，诞生了现在的 HTTPSHTTP + 加密 + 认证 + 完整性保护 = H"><meta content="telephone=no" name="format-detection"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><link rel="alternate" href="/atom.xml" title="KwokRonny Feed" type="application/atom+xml"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?ee452beed5ca135deb3d5befca38907d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Y5BQMHE7WN"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Y5BQMHE7WN")</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2236624_69rc9okdrcb.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/css/index.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="header"><div class="nav-btn"><span class="lt"><i></i></span><span class="lb"><i></i></span></div><a href="/" class="logo">KwokRonny&#39;Blog</a><div class="nav"><div class="nav-item"><a class="hover" href="/archives"><i class="fa fa-archive"></i> 文章</a></div><div class="nav-item"><a href="/categories" class="hover"><i class="fa fa-inbox"></i> 分类</a><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E8%BF%90%E7%BB%B4/"><i class="fa fa-folder-open"></i> 服务运维</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E8%BF%90%E7%BB%B4/docker/"><i class="fa fa-folder-open"></i> docker</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E6%96%87/"><i class="fa fa-folder-open"></i> 杂文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"><i class="fa fa-folder-open"></i> 解决方案</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/WEB%E5%BC%80%E5%8F%91/"><i class="fa fa-folder-open"></i> WEB开发</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%88%86%E4%BA%AB/"><i class="fa fa-folder-open"></i> 软件分享</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"><i class="fa fa-folder-open"></i> 阅读笔记</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/%E6%8A%80%E6%9C%AF%E7%B1%BB/"><i class="fa fa-folder-open"></i> 技术类</a></li></ul></li></ul></div><div class="nav-item"><a href="/tags" class="hover"><i class="fa fa-tag"></i> 标签</a><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag"><i class="fa fa-tag"></i> JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag"><i class="fa fa-tag"></i> LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag"><i class="fa fa-tag"></i> Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuex/" rel="tag"><i class="fa fa-tag"></i> Vuex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag"><i class="fa fa-tag"></i> css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag"><i class="fa fa-tag"></i> docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag"><i class="fa fa-tag"></i> nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stylus/" rel="tag"><i class="fa fa-tag"></i> stylus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/" rel="tag"><i class="fa fa-tag"></i> web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" rel="tag"><i class="fa fa-tag"></i> 响应式</a></li></ul></div><div class="nav-item"><a href="/friend" class="hover"><i class="fa fa-mars"></i> 伙伴们</a><div class="friend-link-list clearfix"><a class="friend" target="_blank" href="https://www.mokeyjay.com/"><img src="https://www.mokeyjay.com/headimg.png"><div class="info"><h3 class="text-clamp_1" title="超能小紫 mokeyjay">超能小紫 mokeyjay</h3><div class="text-clamp_1" title="Web全沾 // 专业学渣 // 贰刺猿 // 永远还不完信用卡">Web全沾 // 专业学渣 // 贰刺猿 // 永远还不完信用卡</div></div></a></div></div><div class="nav-item-link"><a href="/about" class="hover"><i class="fa fa-user"></i></a> <a target="_blank" rel="noopener" href="https://github.com/kwokronny" class="hover"><i class="fa fa-github-alt"></i></a> <a href="/atom.xml" class="hover"><i class="fa fa-rss-square"></i></a></div></div></div><div class="warning-zone"></div><div class="warning-zone right"></div><div class="container-mask"></div><div class="bg-canvas"><div class="loading"><img src="/img/loading.svg"><div>3D Model Loading</div></div><div class="switch-action"><label class="hvr-push"><input type="checkbox" name="rotate"> <i class="iconfont icon-rotate3d"></i></label> <label class="hvr-push"><input type="radio" value="walk" name="action"> <i class="iconfont icon-walk"></i></label> <label class="hvr-push"><input type="radio" value="idle" checked="checked" name="action"> <i class="iconfont icon-idle"></i></label> <label class="hvr-push"><input type="radio" value="push_up" name="action"> <i class="iconfont icon-push_up"></i></label></div></div><div class="main-container"><div id="content-outer"><div id="content-inner"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@10.4.0/styles/dracula.min.css"><div class="left-panel"><div class="article-menu panel"><h3>目录</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#HTTPS"><span class="toc-text">HTTPS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTPS-%E6%98%AF%E8%BA%AB%E6%8A%AB-SSL-%E5%A4%96%E5%A3%B3%E7%9A%84-HTTP"><span class="toc-text">HTTPS 是身披 SSL 外壳的 HTTP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTPS-%E5%8A%A0%E5%AF%86%E6%9C%BA%E5%88%B6"><span class="toc-text">HTTPS 加密机制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%81%E6%98%8E%E5%AF%86%E9%92%A5%E6%AD%A3%E7%A1%AE%E6%80%A7"><span class="toc-text">证明密钥正确性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTPS-%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B"><span class="toc-text">HTTPS 通信过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SSL-%E5%92%8C-TLS"><span class="toc-text">SSL 和 TLS</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Web-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">Web 服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E4%BF%A1%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8F%91%E7%A8%8B%E5%BA%8F"><span class="toc-text">通信数据转发程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%90%86"><span class="toc-text">代理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E4%BB%A3%E7%90%86-Caching-Proxy"><span class="toc-text">缓存代理 Caching Proxy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%8F%E6%98%8E%E4%BB%A3%E7%90%86-Transparent-Proxy"><span class="toc-text">透明代理 Transparent Proxy</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E5%85%B3"><span class="toc-text">网关</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%A7%E9%81%93"><span class="toc-text">隧道</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E4%BC%A0%E8%BE%93%E9%80%9F%E7%8E%87"><span class="toc-text">编码传输速率</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E5%A4%9A%E7%A7%8D%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A4%9A%E9%83%A8%E5%88%86%E5%AF%B9%E8%B1%A1%E9%9B%86%E5%90%88"><span class="toc-text">发送多种数据的多部分对象集合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#multipart-form-data"><span class="toc-text">multipart&#x2F;form-data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multipart-byteranges"><span class="toc-text">multipart&#x2F;byteranges</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E9%83%A8%E5%88%86%E5%86%85%E5%AE%B9%E8%8C%83%E5%9B%B4%E8%AF%B7%E6%B1%82"><span class="toc-text">获取部分内容范围请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#byte-%E6%8C%87%E5%AE%9A%E5%BD%A2%E5%BC%8F"><span class="toc-text">byte 指定形式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86"><span class="toc-text">内容协商</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%A7%E7%BB%AD%E9%98%85%E8%AF%BB"><span class="toc-text">继续阅读</span></a></li></ol></div></div><article id="post"><h1 class="title">读记《图解HTTP》Web服务器与HTTPS</h1><small class="description"><span class="date"><i class="fa fa-calendar"></i> 2021年03月01日</span> <span><i class="fa fa-inbox"></i> <a class="category-link" href="/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">阅读笔记</a>><a class="category-link" href="/categories/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/%E6%8A%80%E6%9C%AF%E7%B1%BB/">技术类</a> </span><span><i class="fa fa-tag"></i> <a class="tag-link" href="/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/" rel="tag">网络协议</a>, <a class="tag-link" href="/tags/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" rel="tag">阅读笔记</a></span></small><blockquote class="text-a_c">本站文章除注明转载外，均为原创文章。如需转载请注明出处：<br><a href="https://kwokronny.top/202103/read-book-diagram-http-3/">https://kwokronny.top/202103/read-book-diagram-http-3/</a></blockquote><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202103/read-book-diagram-http-3/cover.png" class="" width="0" height="0"><h1 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h1><p>HTTP 的缺点：</p><ul><li>通信使用明文（不加密），内容可能会被窃听</li><li>不验证通信方的身份，可能遭遇伪装</li><li>无法证明报文的完整性，所以有可能被篡改</li></ul><p>根据上面的缺点，加以保护，诞生了现在的 HTTPS</p><p>HTTP + 加密 + 认证 + 完整性保护 = HTTPS</p><h2 id="HTTPS-是身披-SSL-外壳的-HTTP"><a href="#HTTPS-是身披-SSL-外壳的-HTTP" class="headerlink" title="HTTPS 是身披 SSL 外壳的 HTTP"></a>HTTPS 是身披 SSL 外壳的 HTTP</h2><p>HTTPS 并非是应用层的一种新协议，HTTP 通信接口部分用 SSL 和 TLS 协议代替</p><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202103/read-book-diagram-http-3/https.png" class="" width="600"><h2 id="HTTPS-加密机制"><a href="#HTTPS-加密机制" class="headerlink" title="HTTPS 加密机制"></a>HTTPS 加密机制</h2><ul><li><p><strong>共享密钥加密</strong><br>加密与解密用同一密钥的方式称为共享密钥加密，亦称对称密钥加密。</p></li><li><p><strong>公开密钥加密</strong><br>发送请求时发送密文一方通过证书公开密钥加密，收到加密消息后再利用私有密钥解密。这样就不需要发送用于解密的私有密钥。公开密钥+密文恢复信息原文是异常困难的。</p><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202103/read-book-diagram-http-3/https_ssl.jpg" class="" width="600"></li><li><p><strong>HTTPS 采用混合加密机制</strong><br>HTTPS 采用上面两种并用的加密机制。公开密钥处理速度慢；所有先通过公开密钥机制安全的将共享密钥交予对方后，再采用共享密钥方式进行通信</p><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202103/read-book-diagram-http-3/https_crypto.png" class="" width="600"></li></ul><h2 id="证明密钥正确性"><a href="#证明密钥正确性" class="headerlink" title="证明密钥正确性"></a>证明密钥正确性</h2><p>在建立公开密钥加密方式通信时，服务器无法保证公开密钥是否被攻击者替换，为了解决此问题，就需要使用数字证书认证机构(CA, Certificate Authority)和相关机关颁发的公开密钥证书。</p><ol><li>申请公钥证书<br><strong>数字证书认证机构</strong>是客户端与服务端都可信赖的第三方机构。由服务器运营人员向机构提出公开密钥的申请，机构验明申请者身份后，对公开密钥做数字签名，并将公开密钥与公钥证书绑定。</li><li>向请求客户端发送公钥证书<br>服务器将机构颁发的公钥证书发给客户端以进行公开密钥加密方法通信。</li><li>客户端确认公钥证书后通信<br>客户端接收到证书后确认：<ul><li>收到的公钥证书为真实有效的数字证书认证机构颁发的。</li><li>服务器的公开密钥是值得依赖的。</li></ul></li></ol><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202103/read-book-diagram-http-3/https_ca.png" class="" width="600"><h2 id="HTTPS-通信过程"><a href="#HTTPS-通信过程" class="headerlink" title="HTTPS 通信过程"></a>HTTPS 通信过程</h2><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202103/read-book-diagram-http-3/https_flow.png" class="" width="600"><blockquote><p>应用层数据数据时会附加 MAC(Message Authentication Code) 报文摘要。能够查知报文是否遭到篡改。</p></blockquote><h3 id="SSL-和-TLS"><a href="#SSL-和-TLS" class="headerlink" title="SSL 和 TLS"></a>SSL 和 TLS</h3><p>HTTPS 使用 SSL(Secure Socket Layer) 和 TLS(Transport Layer Security) 两个协议</p><ul><li>SSL1.0 与 SSL2.0 都先后在设计之初和后面就发现了问题，1.0 并没有实际投入使用，许多浏览器直接废除了 2.0 版本。</li><li>IETF 以 SSL3.0 为基准，后制定了 TLS1.0、TLS1.1 和 TLS1.2。有时也统一称为 SSL。主要使用的是版本是 SSL3.和 TLS1.0。</li></ul><blockquote><p>HTTPS 比 HTTP 速度慢 2~100倍，加密与解密运算对CPU及内存资源的消耗大</p></blockquote><h1 id="Web-服务器"><a href="#Web-服务器" class="headerlink" title="Web 服务器"></a>Web 服务器</h1><p>HTTP/1.1 规范允许一台 HTTP 服务器搭建多个 Web 站点。</p><h2 id="通信数据转发程序"><a href="#通信数据转发程序" class="headerlink" title="通信数据转发程序"></a>通信数据转发程序</h2><ul><li><h2 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h2><p>代理是一种转发功能的应用程序，接收由客户端发送的请求并转发给服务器，同时也接收服务器返回的响应并转发给客户端。</p><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202103/read-book-diagram-http-3/http_proxy.jpg" class=""><p>每经过代理服务器转发请求或响应时，都会追加写入 Via 首部信息</p><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202103/read-book-diagram-http-3/http_multiple_proxy.jpg" class=""><blockquote><p>使用代理服务器的理由：</p><ul><li>利用缓存技术减少网络带宽的流量</li><li>针对特定网站的访问控制</li><li>获取访问日志</li></ul></blockquote><ul><li><h3 id="缓存代理-Caching-Proxy"><a href="#缓存代理-Caching-Proxy" class="headerlink" title="缓存代理 Caching Proxy"></a>缓存代理 Caching Proxy</h3><p>代理转发响应时将资源副本缓存在代理服务器上，当再次接收到相同资源请求时，则不再请求源服务器，直接返回缓存在代理服务器的副本</p><blockquote><p>缓存的有效期限会根据客户端的要求、缓存的有效期等，向源服务器确认资源有效性，若失效则会向源服务器获取“新”资源</p></blockquote></li><li><h3 id="透明代理-Transparent-Proxy"><a href="#透明代理-Transparent-Proxy" class="headerlink" title="透明代理 Transparent Proxy"></a>透明代理 Transparent Proxy</h3><p>不对报文做任何的加工代理方式，</p><blockquote><p>反之对报文内容加工的代理方式称<code>为非透明代理</code></p></blockquote></li></ul></li><li><h2 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h2><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202103/read-book-diagram-http-3/http_gate_way.jpg" class=""><p>工作机制与代理非常相似，但网关能使通信线路上的服务器提供非 HTTP 协议服务，且具有更高的通信安全性，客户端与网关间的通信线路可加密确保连接安全。</p></li><li><h2 id="隧道"><a href="#隧道" class="headerlink" title="隧道"></a>隧道</h2><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202103/read-book-diagram-http-3/http_tunnel.jpg" class=""><p>可按要求建立起一条与其他服务器的通信线路，届时使用 SSL 等加密手段进行通信。目的是确保客户端与服务器的通信安全。隧道本身不会解析请求</p></li><li><h2 id="编码传输速率"><a href="#编码传输速率" class="headerlink" title="编码传输速率"></a>编码传输速率</h2><ul><li><p><strong>报文主体与实体主体差异</strong></p><ul><li><p><strong>报文(message)</strong><br>是 HTTP 通信中的基本单位，由 8 位组字节流组成、 通过 HTTP 通信传输</p></li><li><p><strong>实体(entity)</strong><br>为请求或响应的有效载荷数据被传输，其内容由实体首部和实体主体组成</p></li></ul><p>通常，报文主体等于实体主体。只有当传输中进行编码时，实体主体的内容发生变化，导致它和报文主体产生差展示</p></li><li><p><strong>常用压缩传输的内容编码</strong></p><ul><li>gzip (GUN zip)</li><li>compress (UNIX 系统的标准压缩)</li><li>deflate (zlib)</li><li>identity (不进行编码)</li></ul></li><li><p><strong>分割发送的分块传输编码（Chunked Transfer Coding）</strong><br>在 HTTP 通信时，请求的编码实体资源尚未全部传输完成前，浏览器无法显示请求的页面。在传输大容量数据时，通过将数据分割成多块，让浏览器逐步显示页面。<br>将实体主体分块，将每一块用<code>十六进制</code>标记块的大小，最后一块使用<code>0(CR+LF)</code>标记</p></li></ul></li><li><h2 id="发送多种数据的多部分对象集合"><a href="#发送多种数据的多部分对象集合" class="headerlink" title="发送多种数据的多部分对象集合"></a>发送多种数据的多部分对象集合</h2><p>HTTP 协议中采用了与 MIME（Multipurpose Internet Mail Extensions) 同样的多部分对象集合，发送一份报文主体内可含有多类型实体。</p><ul><li><h3 id="multipart-form-data"><a href="#multipart-form-data" class="headerlink" title="multipart/form-data"></a>multipart/form-data</h3><p>Web 表单文件上传时使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plain">Content-Type: multipart&#x2F;form-data;boundary&#x3D;AaB03x<br><br>--AaB03x<br>Content-Dispostion: form-data; name&#x3D;&quot;field1&quot;<br><br>JoeBlow<br>--AaB03x<br>Content-Dispostion: form-data; name&#x3D;&quot;pics&quot;; filename&#x3D;&quot;file1.txt&quot;<br>Content-Type: text&#x2F;plain<br><br>...(file1.txt的数据)...<br>--AaB03x--<br></code></pre></td></tr></table></figure></li><li><h3 id="multipart-byteranges"><a href="#multipart-byteranges" class="headerlink" title="multipart/byteranges"></a>multipart/byteranges</h3><p>状态码 206（部分内容）响应报文包含了多个范围的内容时使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs plain">HTTP&#x2F;1.1 206 Partial Content<br>Date: Fri,13 Jul 2012 02:45:26 GMT<br>Last-Modified: Fri,13 Jul 2012 02:45:26 GMT<br>Content-Type: multipart&#x2F;byteranges; boundary&#x3D;THIS_STRING_SEPARATES<br><br>--THIS_STRING_SEPARATES<br>Content-Type: application&#x2F;pdf<br>Content-Range: bytes 500-999&#x2F;8000<br><br>--THIS_STRING_SEPARATES<br>Content-Type: application&#x2F;pdf<br>Content-Range: bytes 7000-7999&#x2F;8000<br><br>--THIS_STRING_SEPARATES--<br></code></pre></td></tr></table></figure><p>使用 <code>boundary</code> 字符串划分多部分对象集合指明的各类实体。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs plain">Content-Type: multipart&#x2F;form-data; boundary&#x3D;[多部分名称字符]<br><br>--[多部分名称字符]<br>实体首部字段1<br><br>实体数据1<br><br>--[多部分名称字符]<br>实体首部字段2<br><br>实体数据2<br><br>...<br><br>--[多部分名称字符]--<br></code></pre></td></tr></table></figure></li></ul></li><li><h2 id="获取部分内容范围请求"><a href="#获取部分内容范围请求" class="headerlink" title="获取部分内容范围请求"></a>获取部分内容范围请求</h2><img src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/202103/read-book-diagram-http-3/http_range_byte.jpg" class="" width="500"><ul><li><h3 id="byte-指定形式"><a href="#byte-指定形式" class="headerlink" title="byte 指定形式"></a>byte 指定形式</h3><ul><li>范围<br><code>Range: bytes=5001-10000</code></li><li>由指定字节之后<br><code>Range: bytes=5001-</code></li><li>由指定字节之前<br><code>Range: bytes=-5001</code></li><li>多重范围<br><code>Range: bytes=-3000,5000-7000</code></li></ul></li></ul></li><li><h2 id="内容协商"><a href="#内容协商" class="headerlink" title="内容协商"></a>内容协商</h2><p>内容协商机制指客户端和服务端就响应资源交涉，为客户端提供最合适的资源，判断基准以语言、字符集、编码方式。</p><ul><li>服务端驱动协商<br>以请求首部字段参考，在服务端自动处理。但对用户来说，以浏览器发送的信息作为判定依据，不一定能筛出最优内容</li><li>客户端驱动协商<br>用户从浏览器显示的可选项列表手动选择，亦可利用 Javascript 脚本在页面上自动选择，如：按 OS 类型或浏览器类型切换 PC 版页面或手机版页面</li><li>透明协商<br>服务商与客户端各自进行内容协商的方法</li></ul></li></ul><h1 id="继续阅读"><a href="#继续阅读" class="headerlink" title="继续阅读"></a>继续阅读</h1><ul><li><a href="/202103/read-book-diagram-http-4/" title="读记《图解HTTP》 认证、追加协议和攻击手段">读记《图解HTTP》 认证、追加协议和攻击手段</a></li></ul><div class="donate-panel"><label><input type="checkbox"><i class="fa fa-qrcode"></i> 打赏</label> 如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!<div class="donate-code"><img src="/img/wechat_pay.jpg"> <img src="/img/alipay.jpg"></div></div><script type="text/javascript">document.querySelector(".donate-panel input").addEventListener("change",function(){document.querySelector(".donate-code").classList.toggle("show")})</script><script id="KBComment" src="/kb-comment/web/client.js" token="c3e30d5dbe7a8b62005ba4d33b14cd6f" theme="dark" crossorigin="anonymous" async></script></article></div></div></div><div class="footer">Power by <a target="_blank" rel="noopener" href="http://hexo.io">hexo</a>. | 3D Model Thx SketchFab: <a target="_blank" rel="noopener" href="https://sketchfab.com/Blender3D">Blender3D</a>, <a target="_blank" rel="noopener" href="https://sketchfab.com/arexon">Arexon</a></div><script src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/js/three/three.min.js"></script><script src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/js/three/GLTFLoader.min.js"></script><script src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/js/three/OrbitControls.min.js"></script><script src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/js/index.js"></script><script src="https://cdn.jsdelivr.net/gh/kwokronny/kwokronny.github.io@latest/js/minecraft.js"></script></body></html>