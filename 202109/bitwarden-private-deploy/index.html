<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="content-type" content="text/html; charset=utf-8"><title>私有化部署Bitwarden密码管理服务 KwokRonny&#39;Blog</title><meta name="keywords" content="kwokronny, javascript, web, docker, golang, 全沾工程师,docker,服务,docker, bitwarden, nginx, https, password, vault, 服务, 密码管理, 问题, 反向代理, 运维, 分享"><meta name="description" content="Bitwarden 是基佬又发现并推荐的另一个多平台密码管理工具，官方提供免费的存储服务，最赞的还是支持免费的私有化部署！由于官方网站国内访问不畅😭，日常就不方便与家人共用，所以就只好将其私有化部署至自己的NAS上啦😉。私有环境家中自建"><meta content="telephone=no" name="format-detection"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><link rel="stylesheet" href="/css/index.css"><link rel="dns-prefetch" href="https://kwokronny.top/"><link rel="dns-prefetch" href="https://unpkg.com/"><link rel="alternate" href="/atom.xml" title="KwokRonny Feed" type="application/atom+xml"><link rel="stylesheet" href="//at.alicdn.com/t/font_2236624_69rc9okdrcb.css"><link rel="stylesheet" href="https://unpkg.com/animate.css@4.1.1/animate.min.css"><link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="header"><div class="nav-btn"><span class="lt"><i></i></span><span class="lb"><i></i></span></div><a href="/" class="logo">KwokRonny&#39;Blog</a><div class="nav"><div class="nav-item"><a class="hover" href="/archives"><i class="fa fa-archive"></i> 文章</a></div><div class="nav-item"><a href="/categories" class="hover"><i class="fa fa-inbox"></i> 分类</a><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/"><i class="fa fa-folder-open"></i> 开源项目</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"><i class="fa fa-folder-open"></i> 技术分享</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"><i class="fa fa-folder-open"></i> 前端技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/"><i class="fa fa-folder-open"></i> 后端技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/%E6%9C%8D%E5%8A%A1%E8%BF%90%E7%BB%B4/"><i class="fa fa-folder-open"></i> 服务运维</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%88%86%E4%BA%AB/"><i class="fa fa-folder-open"></i> 软件分享</a></li></ul></div><div class="nav-item"><a href="/tags" class="hover"><i class="fa fa-tag"></i> 标签</a><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag"><i class="fa fa-tag"></i> JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Three-js/" rel="tag"><i class="fa fa-tag"></i> Three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag"><i class="fa fa-tag"></i> Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuex/" rel="tag"><i class="fa fa-tag"></i> Vuex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag"><i class="fa fa-tag"></i> docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/golang/" rel="tag"><i class="fa fa-tag"></i> golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag"><i class="fa fa-tag"></i> nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/parcel/" rel="tag"><i class="fa fa-tag"></i> parcel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stylus/" rel="tag"><i class="fa fa-tag"></i> stylus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typescript/" rel="tag"><i class="fa fa-tag"></i> typescript</a></li></ul></div><div class="nav-item"><a href="/friend" class="hover"><i class="fa fa-mars"></i> 伙伴们</a><div class="friend-link-list clearfix"><a class="friend" target="_blank" href="https://www.mokeyjay.com/"><img src="https://www.mokeyjay.com/headimg.png"><div class="info"><h3 class="text-clamp_1" title="超能小紫 mokeyjay">超能小紫 mokeyjay</h3><div class="text-clamp_1" title="Web全沾 // 专业学渣 // 贰刺猿 // 永远还不完信用卡">Web全沾 // 专业学渣 // 贰刺猿 // 永远还不完信用卡</div></div></a></div></div><div class="nav-item-link"><a href="/about" class="hover"><i class="fa fa-user"></i></a> <a target="_blank" rel="noopener" href="https://github.com/kwokronny" class="hover"><i class="fa fa-github-alt"></i></a> <a href="/atom.xml" class="hover"><i class="fa fa-rss-square"></i></a></div></div></div><div class="container-mask"></div><div class="bg-canvas"><div class="loading"><img src="/img/loading.svg"><div>3D Model Loading</div></div><div class="switch-action"><label class="hvr-push"><input type="checkbox" name="rotate"> <i class="iconfont icon-rotate3d"></i></label> <label class="hvr-push"><input type="radio" value="walk" checked="checked" name="action"> <i class="iconfont icon-walk"></i></label> <label class="hvr-push"><input type="radio" value="idle" name="action"> <i class="iconfont icon-idle"></i></label> <label class="hvr-push"><input type="radio" value="push_up" name="action"> <i class="iconfont icon-push_up"></i></label></div></div><div class="main-container"><div id="content-outer"><div id="content-inner"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@10.4.0/styles/dracula.min.css"><div class="left-panel"><div class="article-menu panel"><h3>目录</h3><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%81%E6%9C%89%E7%8E%AF%E5%A2%83"><span class="toc-text">私有环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2"><span class="toc-text">部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2-bitwarden"><span class="toc-text">部署 bitwarden</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2-nginx"><span class="toc-text">部署 nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6"><span class="toc-text">生成证书</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99nginx%E9%85%8D%E7%BD%AE"><span class="toc-text">编写nginx配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E5%B9%B6%E5%BA%94%E7%94%A8"><span class="toc-text">端口转发并应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E6%9B%B4%E6%96%B0%E8%AF%81%E4%B9%A6"><span class="toc-text">定时更新证书</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD"><span class="toc-text">关闭注册功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%81%87%E5%88%B0%E7%9A%84%E5%B0%8F%E5%9D%91"><span class="toc-text">遇到的小坑</span></a></li></ol></div></div><article id="post"><h1 class="title">私有化部署Bitwarden密码管理服务</h1><small class="description"><span class="date"><i class="fa fa-calendar"></i> 2021年09月20日</span> <span><i class="fa fa-inbox"></i> <a class="category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%88%86%E4%BA%AB/">软件分享</a> </span><span><i class="fa fa-tag"></i> <a class="tag-link" href="/tags/docker/" rel="tag">docker</a>, <a class="tag-link" href="/tags/%E6%9C%8D%E5%8A%A1/" rel="tag">服务</a></span></small><blockquote class="text-a_c">本站文章除注明转载外，均为原创文章。如需转载请注明出处：<br><a href="https://kwokronny.top/202109/bitwarden-private-deploy/">https://kwokronny.top/202109/bitwarden-private-deploy/</a></blockquote><img src="/202109/bitwarden-private-deploy/cover.png" class="" width="0" height="0"><p>Bitwarden 是基佬又发现并推荐的另一个多平台密码管理工具，官方提供免费的存储服务，最赞的还是支持免费的私有化部署！<br>由于官方网站国内访问不畅😭，日常就不方便与家人共用，所以就只好将其私有化部署至自己的NAS上啦😉。</p><img src="/202109/bitwarden-private-deploy/preview.png" class=""><h2 id="私有环境"><a href="#私有环境" class="headerlink" title="私有环境"></a>私有环境</h2><ul><li>家中自建NAS，申请公网IP</li><li>CentOS 7</li><li>Docker</li><li>自有域名</li></ul><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><blockquote><p>由于密码库的相对私密性，所以端口自然不会使用常规端口，且暂时仅有些服务需要https的支持，需要nginx的反向代理完成，我这边就随机了个端口使用，常规端口就留给日后内网架设服务给家人使用吧。</p></blockquote><ol><li><h3 id="部署-bitwarden"><a href="#部署-bitwarden" class="headerlink" title="部署 bitwarden"></a>部署 bitwarden</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker volume create bitwarden_data // 创建 bitwarden_data 卷<br><br>docker run --name bitwarden \<br>-v bitwarden_data:/data \<br>-p 39434:80<br>--restart always <br>vaultwarden/server<br></code></pre></td></tr></table></figure><p>浏览器访问 宿主IP:39434 即可看到 Bitwarden 的服务</p></li><li><h3 id="部署-nginx"><a href="#部署-nginx" class="headerlink" title="部署 nginx"></a>部署 nginx</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">docker run --name Nginx \<br>-v /etc/nginx:/etc/nginx \<br>-v /usr/share/nginx:/usr/share/nginx \<br>-p 39435:39435 \<br>nginx<br></code></pre></td></tr></table></figure></li><li><h3 id="生成证书"><a href="#生成证书" class="headerlink" title="生成证书"></a>生成证书</h3><p>由于 Bitwarden 需要 HTTPS 的支持才可以在 chrome 等浏览器中应用，所以我为还需为 Bitwarden 服务反向代理开启 HTTPS。我们当然是使用免费的 <a target="_blank" rel="noopener" href="https://letsencrypt.org/zh-cn/docs/">Let’s Encrypt</a>。</p><p>而证书生成需要验证域名是否为你持有，提供了以下认证方式：</p><ul><li>在 <code>example.com</code> 下配置 DNS 记录</li><li>在 <code>https://example.com/</code> 的已知 URI 下放置一个 HTTP 资源</li></ul><p>这个时候我们当然选择通过配置DNS记录完成认证获取证书啦，因为私有化的部署嘛，一般就不暴露常规接口啦。</p><p>通过 docker 运行 certbox 完成证书获取至 nginx 挂载配置文件夹下创建的cert内。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash">mkdir -p /etc/nginx/cert <br>docker run -it --rm --name certbot -v /etc/nginx/cert:/etc/letsencrypt certbot/certbot --manual --preferred-challenges dns certonly<br><span class="hljs-comment"># 交互式提问：</span><br><span class="hljs-comment"># 请输入你想认证的域名（多个域名通过逗号或空格分隔）（取消输入 &#x27;c&#x27; ）</span><br>Please enter the domain name(s) you would like on your certificate (comma and/or space separated) (Enter <span class="hljs-string">&#x27;c&#x27;</span> to cancel): vault.example.com<br><span class="hljs-comment"># 请求证书，为 域名 增加 一条 txt 记录，name 为 &quot;_acme-challenge.vault.example.com&quot; ，data 为 &quot;qRbOGoLXA889-IplowmYFlT_dgHYTKya9RBW5l0B73Y&quot;</span><br><span class="hljs-comment"># 完成后可通过下面提示的 google验证工具链接直接验证是否解析成功，验证成功按回车认证即可</span><br>Requesting a certificate <span class="hljs-keyword">for</span> vault.example.com<br>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br>Please deploy a DNS TXT record under the name:<br><br>_acme-challenge.vault.example.com. <br><br>with the following value:<br><br>qRbOGoLXA889-IplowmYFlT_dgHYTKya9RBW5l0B73Y<br><br>Before continuing, verify the TXT record has been deployed. Depending on the DNS<br>provider, this may take some time, from a few seconds to multiple minutes. You can<br>check <span class="hljs-keyword">if</span> it has finished deploying with aid of online tools, such as the Google<br>Admin Toolbox: https://toolbox.googleapps.com/apps/dig/<span class="hljs-comment">#TXT/_acme-challenge.vault.example.com.</span><br>Look <span class="hljs-keyword">for</span> one or more bolded line(s) below the line \<span class="hljs-string">&#x27;;ANSWER\&#x27;</span>. It should show the<br>value(s) you\<span class="hljs-string">&#x27;ve just added.</span><br><span class="hljs-string"></span><br><span class="hljs-string">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="hljs-string">Press Enter to Continue</span><br><span class="hljs-string"># 还有些交互式回答就是些是否订阅及是否同意遵守协议的问答就个人自行选择了</span><br></code></pre></td></tr></table></figure></li><li><h3 id="编写nginx配置"><a href="#编写nginx配置" class="headerlink" title="编写nginx配置"></a>编写nginx配置</h3><p>新增并编辑 <code>vault.example.com.conf</code> 配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vi /etc/nginx/conf.d/vault.example.com.conf<br></code></pre></td></tr></table></figure><figure class="highlight bash"><figcaption><span>vault.example.com.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash">server&#123;<br>	listen 443 ssl http2;<br>	server_name vault.example.com;<br>	index index.html index.htm default.htm default.html;<br>	root /usr/share/nginx/www/vault.example.com;<br><br>	add_header Permissions-Policy <span class="hljs-string">&quot;geolocation=(),midi=(),sync-xhr=(),microphone=(),camera=(),magnetometer=(),gyroscope=(),fullscreen=(self),payment=()&quot;</span>;<br>	server_tokens off; <span class="hljs-comment"># 不显示nginx版本信息</span><br><br>	ssl_certificate   	cert/live/vault.example.com/fullchain.pem;<br>	ssl_certificate_key     cert/live/vault.example.com/privkey.pem;<br>	ssl_protocols TLSv1.2 TLSv1.1 TLSv1;<br>	ssl_prefer_server_ciphers on;<br>	ssl_ciphers ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DH+3DES:!ADH:!AECDH:!MD5;<br>	ssl_ecdh_curve secp384r1;<br>	ssl_session_tickets off;<br><br>	<span class="hljs-comment"># OCSP stapling</span><br>	ssl_stapling on;<br>	ssl_stapling_verify on;<br><br>	location ^~ /3KD63sjY2dd85 &#123; <span class="hljs-comment"># 指定到自己喜欢的随机数与字母的组合作为密码库服务的入口，增加其隐蔽性</span><br>		proxy_set_header		Host <span class="hljs-variable">$host</span>;<br>		proxy_set_header		X-Real-IP <span class="hljs-variable">$remote_addr</span>;<br>		proxy_hide_header		X-Powered-By;<br>		proxy_hide_header		feature-policy;<br><br>		proxy_pass http://宿主IP:39434/; <span class="hljs-comment"># 指向bitwarden服务</span><br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><h3 id="端口转发并应用"><a href="#端口转发并应用" class="headerlink" title="端口转发并应用"></a>端口转发并应用</h3><p>由于为内网的 NAS 服务，部署完成后当然还需要通过路由器端口转发将 nginx 为 bitwarden服务定的随机端口名转发至外网<br>至于域名如何与路由器绑定可搜索动态域名之类的，主要就是通过 NAS 定时请求域名更新IP的 URL 完成。</p><p>浏览器输入 <a target="_blank" rel="noopener" href="https://vault.example.com/3KD63sjY2dd85/">https://vault.example.com/3KD63sjY2dd85/</a> ，进入服务</p><img src="/202109/bitwarden-private-deploy/login.jpg" class=""><p>到这一步基本就可以完成注册，导入密码库啦。</p><p>在 APP 及 各平台应用上，都可以找到在右上角点击设置图标的按钮，输入托管服务的网址</p><img src="/202109/bitwarden-private-deploy/set_service.png" class=""></li><li><h3 id="定时更新证书"><a href="#定时更新证书" class="headerlink" title="定时更新证书"></a>定时更新证书</h3><p><a target="_blank" rel="noopener" href="https://letsencrypt.org/zh-cn/docs/">Let’s Encrypt</a> 证书的有效期是90天，需要定时为其更新证书，所以也就需要为写个脚本定时执行一下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">touch renew.sh<br>chmod -x renew.sh<br>vi renew.sh<br></code></pre></td></tr></table></figure><p>编辑更新脚本</p><figure class="highlight bash"><figcaption><span>renew.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br>docker run -it --rm --name certbot -v /etc/nginx/cert/:/etc/letsencrypt certbot/certbot renew --webroot -w /etc/letsencrypt<br><span class="hljs-comment"># 通过之前生成证书后生成的renew文件夹内的信息，自动更新证书</span><br>docker <span class="hljs-built_in">exec</span> -it Nginx nginx -s reload<br><span class="hljs-comment"># 重启nginx</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 编辑定时任务</span><br>crontab -e<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">0 0 1 * * ~/renew.sh &gt; ~/letsencrypt.log <span class="hljs-comment">#每月执行一次</span><br></code></pre></td></tr></table></figure></li><li><h3 id="关闭注册功能"><a href="#关闭注册功能" class="headerlink" title="关闭注册功能"></a>关闭注册功能</h3><p>为自己和家人都注册帐号后，保证安全性，就关闭密码库的注册功能啦。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker stop bitwarden <br><br>docker run --name bitwarden \<br>-v bitwarden_data:/data \<br>-p 39434:80<br>-e SIGNUP_ALLOWED=<span class="hljs-literal">false</span><br>--restart always <br>vaultwarden/server<br></code></pre></td></tr></table></figure></li></ol><h2 id="遇到的小坑"><a href="#遇到的小坑" class="headerlink" title="遇到的小坑"></a>遇到的小坑</h2><p>通过nginx简单的配置，HTTPS的标识依旧为红色锁，表示着不安全，虽说已不影响使用了；但强迫症的我还是找了下为什么。<br>继而发现了个检测 HTTPS 认证状态的网站：<br><a target="_blank" rel="noopener" href="https://securityheaders.com/">SecurityHeaders</a><br>发现是少了一些Header属性以及部分属性已不安全等<br>根据 Missing Header 去谷歌必应搜索添加上即可</p><p>在搜索的过程中发现了下列文章，刚好教你 Apache 和 Nginx 如何配置安全头部信息的文章，对照上述网站可以快速将头部配置完成<br><a target="_blank" rel="noopener" href="https://webdock.io/en/docs/how-guides/security-guides/how-to-configure-security-headers-in-nginx-and-apache#7.-permissions-policy">Apache 和 Nginx 如何配置安全头部信息</a></p><blockquote><p>由于我仅此服务需要 HTTPS 的支持，所以不可以使用 HSTS（强制HTTPS），所以也就不可添加以下头部：</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs conf">add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot; always;<br></code></pre></td></tr></table></figure><div class="donate-panel"><label><input type="checkbox"><i class="fa fa-qrcode"></i> 打赏</label> 如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!<div class="donate-code"><img src="/img/wechat_pay.jpg"> <img src="/img/alipay.jpg"></div></div><script type="text/javascript">document.querySelector(".donate-panel input").addEventListener("change",function(){document.querySelector(".donate-code").classList.toggle("show")})</script><script id="KBComment" src="/kb-comment/client.js" token="4fdd2f13e213eb7a2243fa6cd987eb83" theme="dark" crossorigin="anonymous" async></script></article></div></div></div><div class="footer">Power by <a target="_blank" rel="noopener" href="http://hexo.io">hexo</a>. | 3D Model Thx SketchFab: <a target="_blank" rel="noopener" href="https://sketchfab.com/Blender3D">Blender3D</a>, <a target="_blank" rel="noopener" href="https://sketchfab.com/arexon">Arexon</a></div><script src="https://unpkg.com/tween.js@16.6.0/src/Tween.js"></script><script src="/js/three/three.min.js"></script><script src="/js/three/GLTFLoader.min.js"></script><script src="/js/minecraft.js"></script><script src="/js/index.js"></script></body></html>